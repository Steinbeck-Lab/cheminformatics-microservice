"use strict";(self.webpackChunkketcher_react_app=self.webpackChunkketcher_react_app||[]).push([[12],{29012:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Cm});var r=n(97850),o=n(7114),i=n(78335),a=n(60471),l=n(55830),c=n(32876),u=n(24530),s=n(94044),d=n(74511),f=n(74412),p=n(49312),h=n(65498),m=n(61790),v=n.n(m),g=n(68102),y=n(94300),b=n(41705),x=n(92099),w=n(48183),A=n(49257),M=n(22380),C=n.n(M),k=n(7071),S=n(26899),O=n(97348),I=n(14788),E=n(25973),j=n(73140),P=n(45025),D=n(28222),N=n(72328),L=n(27182),F=n(14150),Y=n(9913),T=n(63770),_=n(93895),z=n(40528),B=n(13677),R=n(17141),q=n(79684),H=n(70055),U=n(46944),K=n(88818),W=n(97466),G=n(45841),V=n(81515),Z=n(25907),$=n(82144),Q=n(10694),X=n(40694);function J(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ee(e){return!!e&&!!e[Be]}function te(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Re}(e)||Array.isArray(e)||!!e[ze]||!!(null===(t=e.constructor)||void 0===t?void 0:t[ze])||le(e)||ce(e))}function ne(e,t,n){void 0===n&&(n=!1),0===re(e)?(n?Object.keys:qe)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function re(e){var t=e[Be];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:le(e)?2:ce(e)?3:0}function oe(e,t){return 2===re(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ie(e,t,n){var r=re(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function ae(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function le(e){return Fe&&e instanceof Map}function ce(e){return Ye&&e instanceof Set}function ue(e){return e.o||e.t}function se(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=He(e);delete t[Be];for(var n=qe(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function de(e,t){return void 0===t&&(t=!1),pe(e)||ee(e)||!te(e)||(re(e)>1&&(e.set=e.add=e.clear=e.delete=fe),Object.freeze(e),t&&ne(e,(function(e,t){return de(t,!0)}),!0)),e}function fe(){J(2)}function pe(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function he(e){var t=Ue[e];return t||J(18,e),t}function me(){return Ne}function ve(e,t){t&&(he("Patches"),e.u=[],e.s=[],e.v=t)}function ge(e){ye(e),e.p.forEach(xe),e.p=null}function ye(e){e===Ne&&(Ne=e.l)}function be(e){return Ne={p:[],l:Ne,h:e,m:!0,_:0}}function xe(e){var t=e[Be];0===t.i||1===t.i?t.j():t.g=!0}function we(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||he("ES5").S(t,e,r),r?(n[Be].P&&(ge(t),J(4)),te(e)&&(e=Ae(t,e),t.l||Ce(t,e)),t.u&&he("Patches").M(n[Be].t,e,t.u,t.s)):e=Ae(t,n,[]),ge(t),t.u&&t.v(t.u,t.s),e!==_e?e:void 0}function Ae(e,t,n){if(pe(t))return t;var r=t[Be];if(!r)return ne(t,(function(o,i){return Me(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Ce(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=se(r.k):r.o,i=o,a=!1;3===r.i&&(i=new Set(o),o.clear(),a=!0),ne(i,(function(t,i){return Me(e,r,o,t,i,n,a)})),Ce(e,o,!1),n&&e.u&&he("Patches").N(r,n,e.u,e.s)}return r.o}function Me(e,t,n,r,o,i,a){if(ee(o)){var l=Ae(e,o,i&&t&&3!==t.i&&!oe(t.R,r)?i.concat(r):void 0);if(ie(n,r,l),!ee(l))return;e.m=!1}else a&&n.add(o);if(te(o)&&!pe(o)){if(!e.h.D&&e._<1)return;Ae(e,o),t&&t.A.l||Ce(e,o)}}function Ce(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&de(t,n)}function ke(e,t){var n=e[Be];return(n?ue(n):e)[t]}function Se(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Oe(e){e.P||(e.P=!0,e.l&&Oe(e.l))}function Ie(e){e.o||(e.o=se(e.t))}function Ee(e,t,n){var r=le(t)?he("MapSet").F(t,n):ce(t)?he("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:me(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=Ke;n&&(o=[r],i=We);var a=Proxy.revocable(o,i),l=a.revoke,c=a.proxy;return r.k=c,r.j=l,c}(t,n):he("ES5").J(t,n);return(n?n.A:me()).p.push(r),r}function je(e){return ee(e)||J(22,e),function e(t){if(!te(t))return t;var n,r=t[Be],o=re(t);if(r){if(!r.P&&(r.i<4||!he("ES5").K(r)))return r.t;r.I=!0,n=Pe(t,o),r.I=!1}else n=Pe(t,o);return ne(n,(function(t,o){r&&function(e,t){return 2===re(e)?e.get(t):e[t]}(r.t,t)===o||ie(n,t,e(o))})),3===o?new Set(n):n}(e)}function Pe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return se(e)}var De,Ne,Le="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Fe="undefined"!=typeof Map,Ye="undefined"!=typeof Set,Te="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_e=Le?Symbol.for("immer-nothing"):((De={})["immer-nothing"]=!0,De),ze=Le?Symbol.for("immer-draftable"):"__$immer_draftable",Be=Le?Symbol.for("immer-state"):"__$immer_state",Re=""+Object.prototype.constructor,qe="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,He=Object.getOwnPropertyDescriptors||function(e){var t={};return qe(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Ue={},Ke={get:function(e,t){if(t===Be)return e;var n=ue(e);if(!oe(n,t))return function(e,t,n){var r,o=Se(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!te(r)?r:r===ke(e.t,t)?(Ie(e),e.o[t]=Ee(e.A.h,r,e)):r},has:function(e,t){return t in ue(e)},ownKeys:function(e){return Reflect.ownKeys(ue(e))},set:function(e,t,n){var r=Se(ue(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=ke(ue(e),t),i=null==o?void 0:o[Be];if(i&&i.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(ae(n,o)&&(void 0!==n||oe(e.t,t)))return!0;Ie(e),Oe(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ke(e.t,t)||t in e.t?(e.R[t]=!1,Ie(e),Oe(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ue(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){J(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){J(12)}},We={};ne(Ke,(function(e,t){We[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),We.deleteProperty=function(e,t){return We.set.call(this,e,t,void 0)},We.set=function(e,t,n){return Ke.set.call(this,e[0],t,n,e[0])};var Ge=function(){function e(e){var t=this;this.O=Te,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&J(6),void 0!==r&&"function"!=typeof r&&J(7),te(e)){var l=be(t),c=Ee(t,e,void 0),u=!0;try{a=n(c),u=!1}finally{u?ge(l):ye(l)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return ve(l,r),we(e,l)}),(function(e){throw ge(l),e})):(ve(l,r),we(a,l))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===_e&&(a=void 0),t.D&&de(a,!0),r){var s=[],d=[];he("Patches").M(e,a,s,d),r(s,d)}return a}J(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){te(e)||J(8),ee(e)&&(e=je(e));var t=be(this),n=Ee(this,e,void 0);return n[Be].C=!0,ye(t),n},t.finishDraft=function(e,t){var n=(e&&e[Be]).A;return ve(n,t),we(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Te&&J(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=he("Patches").$;return ee(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),Ve=new Ge,Ze=Ve.produce;Ve.produceWithPatches.bind(Ve),Ve.setAutoFreeze.bind(Ve),Ve.setUseProxies.bind(Ve),Ve.applyPatches.bind(Ve),Ve.createDraft.bind(Ve),Ve.finishDraft.bind(Ve);var $e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(l){i=[6,l],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Xe=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Je=Object.defineProperty,et=Object.defineProperties,tt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,it=function(e,t,n){return t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},at=function(e,t){for(var n in t||(t={}))rt.call(t,n)&&it(e,n,t[n]);if(nt)for(var r=0,o=nt(t);r<o.length;r++){n=o[r];ot.call(t,n)&&it(e,n,t[n])}return e},lt=function(e,t){return et(e,tt(t))},ct="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?d.Zz:d.Zz.apply(null,arguments)};function ut(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function st(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var o=t.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return at(at({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var dt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.apply(this,n)||this;return Object.setPrototypeOf(o,t.prototype),o}return $e(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Xe([void 0],e[0].concat(this)))):new(t.bind.apply(t,Xe([void 0],e.concat(this))))},t}(Array),ft=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.apply(this,n)||this;return Object.setPrototypeOf(o,t.prototype),o}return $e(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Xe([void 0],e[0].concat(this)))):new(t.bind.apply(t,Xe([void 0],e.concat(this))))},t}(Array);function pt(e){return te(e)?Ze(e,(function(){})):e}function ht(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new dt);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(p.A.withExtraArgument(n.extraArgument)):r.push(p.A));0;return r}(e)}}var mt=!0;function vt(e){var t,n={},r=[],o={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,o},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),o},addDefaultCase:function(e){return t=e,o}};return e(o),[n,r,t]}function gt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:pt(e.initialState),o=e.reducers||{},i=Object.keys(o),a={},l={},c={};function u(){var t="function"===typeof e.extraReducers?vt(e.extraReducers):[e.extraReducers],n=t[0],o=void 0===n?{}:n,i=t[1],a=void 0===i?[]:i,c=t[2],u=void 0===c?void 0:c,s=at(at({},o),l);return function(e,t,n,r){void 0===n&&(n=[]);var o,i="function"===typeof t?vt(t):[t,n,r],a=i[0],l=i[1],c=i[2];if(function(e){return"function"===typeof e}(e))o=function(){return pt(e())};else{var u=pt(e);o=function(){return u}}function s(e,t){void 0===e&&(e=o());var n=Xe([a[t.type]],l.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(ee(e))return void 0===(r=n(e,t))?e:r;if(te(e))return Ze(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return s.getInitialState=o,s}(r,(function(e){for(var t in s)e.addCase(t,s[t]);for(var n=0,r=a;n<r.length;n++){var o=r[n];e.addMatcher(o.matcher,o.reducer)}u&&e.addDefaultCase(u)}))}return i.forEach((function(e){var n,r,i=o[e],u=t+"/"+e;"reducer"in i?(n=i.reducer,r=i.prepare):n=i,a[e]=n,l[u]=n,c[e]=r?st(u,r):st(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var yt=["name","message","stack","code"],bt=function(e,t){this.payload=e,this.meta=t},xt=function(e,t){this.payload=e,this.meta=t},wt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=yt;n<r.length;n++){var o=r[n];"string"===typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}};function At(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}!function(){function e(e,t,n){var r=st(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:lt(at({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),o=st(e+"/pending",(function(e,t,n){return{payload:void 0,meta:lt(at({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=st(e+"/rejected",(function(e,t,r,o,i){return{payload:o,error:(n&&n.serializeError||wt)(e||"Rejected"),meta:lt(at({},i||{}),{arg:r,requestId:t,rejectedWithValue:!!o,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(l,c,u){var s,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new a;function p(e){s=e,f.abort()}var h=function(){return a=this,h=null,m=function(){var a,h,m,v,g,y;return Qe(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),v=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:c,extra:u}),null===(x=v)||"object"!==typeof x||"function"!==typeof x.then?[3,2]:[4,v];case 1:v=b.sent(),b.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return g=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:s||"Aborted"})}))})),l(o(d,e,null==(h=null==n?void 0:n.getPendingMeta)?void 0:h.call(n,{requestId:d,arg:e},{getState:c,extra:u}))),[4,Promise.race([g,Promise.resolve(t(e,{dispatch:l,getState:c,extra:u,requestId:d,signal:f.signal,abort:p,rejectWithValue:function(e,t){return new bt(e,t)},fulfillWithValue:function(e,t){return new xt(e,t)}})).then((function(t){if(t instanceof bt)throw t;return t instanceof xt?r(t.payload,d,e,t.meta):r(t,d,e)}))])];case 3:return m=b.sent(),[3,5];case 4:return y=b.sent(),m=y instanceof bt?i(null,d,e,y.payload,y.meta):i(y,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&i.match(m)&&m.meta.condition||l(m),[2,m]}var x}))},new Promise((function(e,t){var n=function(e){try{o(m.next(e))}catch(n){t(n)}},r=function(e){try{o(m.throw(e))}catch(n){t(n)}},o=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,r)};o((m=m.apply(a,h)).next())}));var a,h,m}();return Object.assign(h,{abort:p,requestId:d,arg:e,unwrap:function(){return h.then(At)}})}}),{pending:o,rejected:i,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();var Mt="listenerMiddleware";st(Mt+"/add"),st(Mt+"/removeAll"),st(Mt+"/remove"),"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis),function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Be];return Ke.get(t,e)},set:function(t){var n=this[Be];Ke.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var o=e[t][Be];if(!o.P)switch(o.i){case 5:r(o)&&Oe(o);break;case 4:n(o)&&Oe(o)}}}function n(e){for(var t=e.t,n=e.k,r=qe(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==Be){var a=t[i];if(void 0===a&&!oe(t,i))return!0;var l=n[i],c=l&&l[Be];if(c?c.t!==a:!ae(l,a))return!0}}var u=!!t[Be];return r.length!==qe(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};!function(e,t){Ue[e]||(Ue[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),o=function(t,n){if(t){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,e(o,!0));return r}var i=He(n);delete i[Be];for(var a=qe(i),l=0;l<a.length;l++){var c=a[l];i[c]=e(c,t||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,t),i={i:r?5:4,A:n?n.A:me(),P:!1,I:!1,R:{},l:n,t:t,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,Be,{value:i,writable:!0}),o},S:function(e,n,o){o?ee(n)&&n[Be].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Be];if(n){var o=n.t,i=n.k,a=n.R,l=n.i;if(4===l)ne(i,(function(t){t!==Be&&(void 0!==o[t]||oe(o,t)?a[t]||e(i[t]):(a[t]=!0,Oe(n)))})),ne(o,(function(e){void 0!==i[e]||oe(i,e)||(a[e]=!1,Oe(n))}));else if(5===l){if(r(n)&&(Oe(n),a.length=!0),i.length<o.length)for(var c=i.length;c<o.length;c++)a[c]=!1;else for(var u=o.length;u<i.length;u++)a[u]=!0;for(var s=Math.min(i.length,o.length),d=0;d<s;d++)i.hasOwnProperty(d)||(a[d]=!0),void 0===a[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();var Ct=function(e){return"@@redux-saga/"+e},kt=Ct("CANCEL_PROMISE"),St=Ct("CHANNEL_END"),Ot=Ct("IO"),It=Ct("MATCH"),Et=Ct("MULTICAST"),jt=Ct("SAGA_ACTION"),Pt=Ct("SELF_CANCELLATION"),Dt=Ct("TASK"),Nt=Ct("TASK_CANCEL"),Lt=Ct("TERMINATE"),Ft=Ct("LOCATION"),Yt=function(e){return null===e||void 0===e},Tt=function(e){return null!==e&&void 0!==e},_t=function(e){return"function"===typeof e},zt=function(e){return"string"===typeof e},Bt=Array.isArray,Rt=function(e){return e&&_t(e.then)},qt=function(e){return e&&_t(e.next)&&_t(e.throw)},Ht=function e(t){return t&&(zt(t)||Wt(t)||_t(t)||Bt(t)&&t.every(e))},Ut=function(e){return e&&_t(e.take)&&_t(e.close)},Kt=function(e){return _t(e)&&e.hasOwnProperty("toString")},Wt=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Gt=function(e){return Ut(e)&&e[Et]};var Vt=function(e){return function(){return e}},Zt=Vt(!0),$t=function(){};var Qt=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var Xt=function(e,t){(0,g.A)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function Jt(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var en=function(e){throw e},tn=function(e){return{value:e,done:!0}};function nn(e,t,n){void 0===t&&(t=en),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:tn,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function rn(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var on=function(e){return Array.apply(null,new Array(e))},an=function(e){return function(t){return e(Object.defineProperty(t,jt,{value:!0}))}},ln=function(e){return e===Lt},cn=function(e){return e===Nt},un=function(e){return ln(e)||cn(e)};function sn(e,t){var n=Object.keys(e),r=n.length;var o,i=0,a=Bt(e)?on(r):{},l={};return n.forEach((function(e){var n=function(n,l){o||(l||un(n)?(t.cancel(),t(n,l)):(a[e]=n,++i===r&&(o=!0,t(a))))};n.cancel=$t,l[e]=n})),t.cancel=function(){o||(o=!0,n.forEach((function(e){return l[e].cancel()})))},l}function dn(e){return{name:e.name||"anonymous",location:fn(e)}}function fn(e){return e[Ft]}function pn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var hn=function(e){return function(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,o=0,i=0,a=function(t){n[o]=t,o=(o+1)%e,r++},l=function(){if(0!=r){var t=n[i];return n[i]=null,r--,i=(i+1)%e,t}},c=function(){for(var e=[];r;)e.push(l());return e};return{isEmpty:function(){return 0==r},put:function(l){var u;if(r<e)a(l);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[o]=l,i=o=(o+1)%e;break;case 4:u=2*e,n=c(),r=n.length,o=n.length,i=0,n.length=u,e=u,a(l)}},take:l,flush:c}}(e,4)},mn="TAKE",vn="PUT",gn="CALL",yn="FORK",bn=function(e,t){var n;return(n={})[Ot]=!0,n.combinator=!1,n.type=e,n.payload=t,n},xn=function(e){return bn(yn,(0,g.A)({},e.payload,{detached:!0}))};function wn(e,t){return void 0===e&&(e="*"),Ht(e)?(Tt(t)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),bn(mn,{pattern:e})):Gt(e)&&Tt(t)&&Ht(t)?bn(mn,{channel:e,pattern:t}):Ut(e)?(Tt(t)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),bn(mn,{channel:e})):void 0}function An(e,t){return Yt(t)&&(t=e,e=void 0),bn(vn,{channel:e,action:t})}function Mn(e,t){var n,r=null;return _t(e)?n=e:(Bt(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&zt(n)&&_t(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function Cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bn(gn,Mn(e,n))}function kn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bn(yn,Mn(e,n))}function Sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xn(kn.apply(void 0,[e].concat(n)))}var On=function(e){return{done:!0,value:e}},In={};function En(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i,a={done:!1,value:wn(e)},l=function(e){return i=e};return function(e,t,n){var r,o,i,a=t;function l(t,n){if(a===In)return On(t);if(n&&!o)throw a=In,n;r&&r(t);var l=n?e[o](n):e[a]();return a=l.nextState,i=l.effect,r=l.stateUpdater,o=l.errorState,a===In?On(t):i}return nn(l,(function(e){return l(null,e)}),n)}({q1:function(){return{nextState:"q2",effect:a,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:(e=i,{done:!1,value:kn.apply(void 0,[t].concat(r,[e]))})};var e}},"q1","takeEvery("+function(e){return Ut(e)?"channel":Kt(e)?String(e):_t(e)?e.name:String(e)}(e)+", "+t.name+")")}function jn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return kn.apply(void 0,[En,e,t].concat(r))}var Pn=[],Dn=0;function Nn(e){try{Yn(),e()}finally{Tn()}}function Ln(e){Pn.push(e),Dn||(Yn(),_n())}function Fn(e){try{return Yn(),e()}finally{_n()}}function Yn(){Dn++}function Tn(){Dn--}function _n(){var e;for(Tn();!Dn&&void 0!==(e=Pn.shift());)Nn(e)}var zn=function(e){return function(t){return e.some((function(e){return Un(e)(t)}))}},Bn=function(e){return function(t){return e(t)}},Rn=function(e){return function(t){return t.type===String(e)}},qn=function(e){return function(t){return t.type===e}},Hn=function(){return Zt};function Un(e){var t="*"===e?Hn:zt(e)?Rn:Bt(e)?zn:Kt(e)?Rn:_t(e)?Bn:Wt(e)?qn:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var Kn={type:St},Wn=function(e){return e&&e.type===St};function Gn(){var e=function(){var e,t=!1,n=[],r=n,o=function(){r===n&&(r=n.slice())},i=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(Kn)}))};return(e={})[Et]=!0,e.put=function(e){if(!t)if(Wn(e))i();else for(var o=n=r,a=0,l=o.length;a<l;a++){var c=o[a];c[It](e)&&(c.cancel(),c(e))}},e.take=function(e,n){void 0===n&&(n=Hn),t?e(Kn):(e[It]=n,o(),r.push(e),e.cancel=function(e){var t=!1;return function(){t||(t=!0,e())}}((function(){o(),Jt(r,e)})))},e.close=i,e}(),t=e.put;return e.put=function(e){e[jt]?t(e):Ln((function(){t(e)}))},e}var Vn=0,Zn=1,$n=2,Qn=3;function Xn(e,t){var n=e[kt];_t(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var Jn,er=0,tr=function(){return++er};function nr(e){e.isRunning()&&e.cancel()}var rr=((Jn={})[mn]=function(e,t,n){var r=t.channel,o=void 0===r?e.channel:r,i=t.pattern,a=t.maybe,l=function(e){e instanceof Error?n(e,!0):!Wn(e)||a?n(e):n(Lt)};try{o.take(l,Tt(i)?Un(i):null)}catch(c){return void n(c,!0)}n.cancel=l.cancel},Jn[vn]=function(e,t,n){var r=t.channel,o=t.action,i=t.resolve;Ln((function(){var t;try{t=(r?r.put:e.dispatch)(o)}catch(a){return void n(a,!0)}i&&Rt(t)?Xn(t,n):n(t)}))},Jn.ALL=function(e,t,n,r){var o=r.digestEffect,i=er,a=Object.keys(t);if(0!==a.length){var l=sn(t,n);a.forEach((function(e){o(t[e],i,l[e],e)}))}else n(Bt(t)?[]:{})},Jn.RACE=function(e,t,n,r){var o=r.digestEffect,i=er,a=Object.keys(t),l=Bt(t)?on(a.length):{},c={},u=!1;a.forEach((function(e){var t=function(t,r){u||(r||un(t)?(n.cancel(),n(t,r)):(n.cancel(),u=!0,l[e]=t,n(l)))};t.cancel=$t,c[e]=t})),n.cancel=function(){u||(u=!0,a.forEach((function(e){return c[e].cancel()})))},a.forEach((function(e){u||o(t[e],i,c[e],e)}))},Jn[gn]=function(e,t,n,r){var o=t.context,i=t.fn,a=t.args,l=r.task;try{var c=i.apply(o,a);if(Rt(c))return void Xn(c,n);if(qt(c))return void hr(e,c,l.context,er,dn(i),!1,n);n(c)}catch(u){n(u,!0)}},Jn.CPS=function(e,t,n){var r=t.context,o=t.fn,i=t.args;try{var a=function(e,t){Yt(e)?n(t):n(e,!0)};o.apply(r,i.concat(a)),a.cancel&&(n.cancel=a.cancel)}catch(l){n(l,!0)}},Jn[yn]=function(e,t,n,r){var o=t.context,i=t.fn,a=t.args,l=t.detached,c=r.task,u=function(e){var t=e.context,n=e.fn,r=e.args;try{var o=n.apply(t,r);if(qt(o))return o;var i=!1;return nn((function(e){return i?{value:e,done:!0}:(i=!0,{value:o,done:!Rt(o)})}))}catch(a){return nn((function(){throw a}))}}({context:o,fn:i,args:a}),s=function(e,t){return e.isSagaIterator?{name:e.meta.name}:dn(t)}(u,i);Fn((function(){var t=hr(e,u,c.context,er,s,l,void 0);l?n(t):t.isRunning()?(c.queue.addTask(t),n(t)):t.isAborted()?c.queue.abort(t.error()):n(t)}))},Jn.JOIN=function(e,t,n,r){var o=r.task,i=function(e,t){if(e.isRunning()){var n={task:o,cb:t};t.cancel=function(){e.isRunning()&&Jt(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Bt(t)){if(0===t.length)return void n([]);var a=sn(t,n);t.forEach((function(e,t){i(e,a[t])}))}else i(t,n)},Jn.CANCEL=function(e,t,n,r){var o=r.task;t===Pt?nr(o):Bt(t)?t.forEach(nr):nr(t),n()},Jn.SELECT=function(e,t,n){var r=t.selector,o=t.args;try{n(r.apply(void 0,[e.getState()].concat(o)))}catch(i){n(i,!0)}},Jn.ACTION_CHANNEL=function(e,t,n){var r=t.pattern,o=function(e){void 0===e&&(e=hn());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(Kn):e.isEmpty()?(n.push(r),r.cancel=function(){Jt(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(Kn):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,o=e.length;r<o;r++)(0,e[r])(Kn)}}}}(t.buffer),i=Un(r),a=function t(n){Wn(n)||e.channel.take(t,i),o.put(n)},l=o.close;o.close=function(){a.cancel(),l()},e.channel.take(a,i),n(o)},Jn.CANCELLED=function(e,t,n,r){n(r.task.isCancelled())},Jn.FLUSH=function(e,t,n){t.flush(n)},Jn.GET_CONTEXT=function(e,t,n,r){n(r.task.context[t])},Jn.SET_CONTEXT=function(e,t,n,r){var o=r.task;Xt(o.context,t),n()},Jn);function or(e,t){return e+"?"+t}function ir(e){var t=e.name,n=e.location;return n?t+"  "+or(n.fileName,n.lineNumber):t}function ar(e){var t=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var lr=null,cr=[],ur=function(e){e.crashedEffect=lr,cr.push(e)},sr=function(){lr=null,cr.length=0},dr=function(e){lr=e},fr=function(){var e=cr[0],t=cr.slice(1),n=e.crashedEffect?function(e){var t=fn(e);return t?t.code+"  "+or(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+ir(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+ir(e.meta)})),[ar(cr)]).join("\n")};function pr(e,t,n,r,o,i,a){var l;void 0===a&&(a=$t);var c,u,s=Vn,d=null,f=[],p=Object.create(n),h=function(e,t,n){var r,o=[],i=!1;function a(e){t(),c(),n(e,!0)}function l(t){o.push(t),t.cont=function(l,c){i||(Jt(o,t),t.cont=$t,c?a(l):(t===e&&(r=l),o.length||(i=!0,n(r))))}}function c(){i||(i=!0,o.forEach((function(e){e.cont=$t,e.cancel()})),o=[])}return l(e),{addTask:l,cancelAll:c,abort:a,getTasks:function(){return o}}}(t,(function(){f.push.apply(f,h.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,n){if(n){if(s=$n,ur({meta:o,cancelledTasks:f}),v.isRoot){var r=fr();sr(),e.onError(t,{sagaStack:r})}u=t,d&&d.reject(t)}else t===Nt?s=Zn:s!==Zn&&(s=Qn),c=t,d&&d.resolve(t);v.cont(t,n),v.joiners.forEach((function(e){e.cb(t,n)})),v.joiners=null}var v=((l={})[Dt]=!0,l.id=r,l.meta=o,l.isRoot=i,l.context=p,l.joiners=[],l.queue=h,l.cancel=function(){s===Vn&&(s=Zn,h.cancelAll(),m(Nt,!1))},l.cont=a,l.end=m,l.setContext=function(e){Xt(p,e)},l.toPromise=function(){return d||(d=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}(),s===$n?d.reject(u):s!==Vn&&d.resolve(c)),d.promise},l.isRunning=function(){return s===Vn},l.isCancelled=function(){return s===Zn||s===Vn&&t.status===Zn},l.isAborted=function(){return s===$n},l.result=function(){return c},l.error=function(){return u},l);return v}function hr(e,t,n,r,o,i,a){var l=e.finalizeRunEffect((function(t,n,r){if(Rt(t))Xn(t,r);else if(qt(t))hr(e,t,u.context,n,o,!1,r);else if(t&&t[Ot]){(0,rr[t.type])(e,t.payload,r,s)}else r(t)}));d.cancel=$t;var c={meta:o,cancel:function(){c.status===Vn&&(c.status=Zn,d(Nt))},status:Vn},u=pr(e,c,n,r,o,i,a),s={task:u,digestEffect:f};return a&&(a.cancel=u.cancel),d(),u;function d(e,n){try{var o;n?(o=t.throw(e),sr()):cn(e)?(c.status=Zn,d.cancel(),o=_t(t.return)?t.return(Nt):{done:!0,value:Nt}):o=ln(e)?_t(t.return)?t.return():{done:!0}:t.next(e),o.done?(c.status!==Zn&&(c.status=Qn),c.cont(o.value)):f(o.value,r,d)}catch(i){if(c.status===Zn)throw i;c.status=$n,c.cont(i,!0)}}function f(t,n,r,o){void 0===o&&(o="");var i,a=tr();function c(n,o){i||(i=!0,r.cancel=$t,e.sagaMonitor&&(o?e.sagaMonitor.effectRejected(a,n):e.sagaMonitor.effectResolved(a,n)),o&&dr(t),r(n,o))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:a,parentEffectId:n,label:o,effect:t}),c.cancel=$t,r.cancel=function(){i||(i=!0,c.cancel(),c.cancel=$t,e.sagaMonitor&&e.sagaMonitor.effectCancelled(a))},l(t,a,c)}}var mr,vr;function gr(e,t){var n=e.channel,r=void 0===n?Gn():n,o=e.dispatch,i=e.getState,a=e.context,l=void 0===a?{}:a,c=e.sagaMonitor,u=e.effectMiddlewares,s=e.onError,d=void 0===s?rn:s;for(var f=arguments.length,p=new Array(f>2?f-2:0),h=2;h<f;h++)p[h-2]=arguments[h];var m=t.apply(void 0,p);var v,g=tr();if(c&&(c.rootSagaStarted=c.rootSagaStarted||$t,c.effectTriggered=c.effectTriggered||$t,c.effectResolved=c.effectResolved||$t,c.effectRejected=c.effectRejected||$t,c.effectCancelled=c.effectCancelled||$t,c.actionDispatched=c.actionDispatched||$t,c.rootSagaStarted({effectId:g,saga:t,args:p})),u){var y=pn.apply(void 0,u);v=function(e){return function(t,n,r){return y((function(t){return e(t,n,r)}))(t)}}}else v=Qt;var b={channel:r,dispatch:an(o),getState:i,sagaMonitor:c,onError:d,finalizeRunEffect:v};return Fn((function(){var e=hr(b,m,l,g,dn(t),!0,void 0);return c&&c.effectResolved(g,e),e}))}!function(e){e.Monomer="monomer",e.Preset="preset",e.Bond="bond",e.AmbiguousMonomer="ambiguousMonomer"}(mr||(mr={})),function(e){e.Library="library",e.ChainStart="chainStart",e.ChainMiddle="chainMiddle",e.ChainEnd="chainEnd"}(vr||(vr={}));var yr=gt({name:"editor",initialState:{isReady:null,activeTool:"select",editor:void 0,editorLayoutMode:void 0,preview:{type:mr.Monomer,monomer:void 0,style:{}},position:void 0},reducers:{init:function(e){e.isReady=!1},initSuccess:function(e){e.isReady=!0},initFailure:function(e){e.isReady=!1},selectTool:function(e,t){e.activeTool=t.payload},setPosition:function(e,t){e.position=t.payload},createEditor:function(e,t){e.editor=new h.CoreEditor({theme:t.payload.theme,canvas:t.payload.canvas,mode:e.editorLayoutMode?new h.modesMap[e.editorLayoutMode]:void 0,monomersLibraryUpdate:t.payload.monomersLibraryUpdate})},destroyEditor:function(e){e.editorLayoutMode=e.editor.mode.modeName,e.editor.switchToMicromolecules(),e.editor=void 0},showPreview:function(e,t){e.preview=t.payload||{monomer:void 0,style:""}}}}),br=yr.actions,xr=br.init,wr=br.initSuccess,Ar=br.initFailure,Mr=br.selectTool,Cr=br.createEditor,kr=br.showPreview,Sr=br.destroyEditor;br.setPosition;var Or=function(e){return e.editor.preview},Ir=function(e){return e.editor.activeTool},Er=function(e){return e.editor.editor},jr=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isSequenceEditInRNABuilderMode},Pr=function(e){return e.editor.editorLayoutMode},Dr=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isHandToolSelected},Nr=yr.reducer,Lr=v().mark(_r),Fr=v().mark(zr),Yr="editor/fetchData",Tr=function(){return new Promise((function(e){setTimeout((function(){return e("some data")}),1e3)}))};function _r(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(xr(yr));case 2:return e.prev=2,e.next=5,Cn(Tr);case 5:return e.next=7,An(wr(yr));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),h.KetcherLogger.error("editorSaga.ts::fetchData",e.t0),e.next=14,An(Ar(yr));case 14:case"end":return e.stop()}}),Lr,null,[[2,9]])}function zr(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(Yr,_r);case 2:case"end":return e.stop()}}),Fr)}var Br,Rr,qr="FAVORITES",Hr="PEPTIDE",Ur="CHEM",Kr="RNA";!function(e){e.SUGARS="Sugars",e.BASES="Bases",e.PHOSPHATES="Phosphates",e.PEPTIDES="Amino acids",e.NUCLEOTIDES="Nucleotides"}(Br||(Br={})),function(e){e.R="R",e.A="A",e.C="C",e.G="G",e.T="T",e.U="U",e.X="X",e.P="P"}(Rr||(Rr={}));var Wr={R:Br.SUGARS,A:Br.BASES,C:Br.BASES,G:Br.BASES,T:Br.BASES,U:Br.BASES,X:Br.BASES,P:Br.PHOSPHATES},Gr="favoriteItemsUniqueKeys",Vr="ketcher_custom_presets",Zr="thymine",$r="uracil",Qr=1,Xr=2,Jr=new(function(){function e(){(0,x.A)(this,e),this.localStorage=window.localStorage}return(0,w.A)(e,[{key:"getItem",value:function(e){var t=this.localStorage.getItem(e);return t?JSON.parse(t):null}},{key:"setItem",value:function(e,t){this.localStorage.setItem(e,JSON.stringify(t))}},{key:"removeItem",value:function(e){this.localStorage.removeItem(e)}}]),e}());function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var no=(0,b.A)((0,b.A)({},h.MonomerGroups.PEPTIDES,h.KetMonomerClass.AminoAcid),h.MonomerGroups.BASES,h.KetMonomerClass.Base);function ro(e){var t;return(0,h.isAmbiguousMonomerLibraryItem)(e)?e.id||e.label:"".concat(e.props.MonomerName,"___").concat(null===(t=e.props)||void 0===t?void 0:t.Name)}function oo(e){var t,n,r;return"".concat(e.name,"_").concat((null===(t=e.base)||void 0===t?void 0:t.label)||".","_").concat((null===(n=e.sugar)||void 0===n?void 0:n.label)||".","_").concat((null===(r=e.phosphate)||void 0===r?void 0:r.label)||".")}var io=gt({name:"library",initialState:{monomers:[],favorites:{},searchFilter:"",selectedTabIndex:Xr},reducers:{loadMonomerLibrary:function(e,t){var n=t.payload.map((function(e){return to(to({},e),{},{props:to({},e.props)})}));e.monomers=n},setFavoriteMonomersFromLocalStorage:function(e){var t={},n=Jr.getItem(Gr);n&&Array.isArray(n)&&(e.monomers.forEach((function(e){var r=ro(e);n.find((function(e){return e===r}))&&(t[r]=to(to({},e),{},{favorite:!0}))})),e.favorites=t)},clearFavorites:function(e){e.favorites={}},toggleMonomerFavorites:function(e,t){var n=ro(t.payload),r=Jr.getItem(Gr)||[];e.favorites[n]?(delete e.favorites[n],Jr.setItem(Gr,r.filter((function(e){return e!==n})))):(e.favorites[n]=to(to({},t.payload),{},{favorite:!0}),r.push(n),Jr.setItem(Gr,r))},setSearchFilter:function(e,t){e.searchFilter=t.payload},setSelectedTabIndex:function(e,t){e.selectedTabIndex=t.payload}}}),ao=function(e,t){return e.filter((function(e){var n;return!e.isAmbiguous&&(null===(n=e.props)||void 0===n?void 0:n.MonomerType)===t}))},lo=function(e,t){var n=e.filter((function(e){if(!(0,h.isAmbiguousMonomerLibraryItem)(e))return!1;var n=new h.AmbiguousMonomer(e,void 0,!1);return no[t]===n.monomerClass}));if(0===n.length)return[];var r=[];t===h.MonomerGroups.BASES?r=[{groupTitle:"Ambiguous DNA Bases",groupItems:n.filter((function(e){return(0,h.isAmbiguousMonomerLibraryItem)(e)&&e.options.find((function(e){return e.templateId.toLowerCase().includes(Zr)}))}))},{groupTitle:"Ambiguous RNA Bases",groupItems:n.filter((function(e){return(0,h.isAmbiguousMonomerLibraryItem)(e)&&e.options.find((function(e){return e.templateId.toLowerCase().includes($r)}))}))},{groupTitle:"Ambiguous Bases",groupItems:n.filter((function(e){return(0,h.isAmbiguousMonomerLibraryItem)(e)&&e.options.every((function(e){return!e.templateId.toLowerCase().includes(Zr)&&!e.templateId.toLowerCase().includes($r)}))}))}]:r.push({groupTitle:"Ambiguous ".concat(t),groupItems:n});var o=["X","N"];return r.forEach((function(e){e.groupItems.sort((function(e,t){return e.label.localeCompare(t.label)})),e.groupItems.sort((function(e){return o.includes(e.label)?-1:1}))})),r},co=function(e){return e.filter((function(e){return e.favorite&&!e.isAmbiguous}))},uo=(0,f.Mz)((function(e){return e.library}),(function(e){var t=e.searchFilter,n=e.monomers,r=e.favorites,o=t.toLowerCase(),i=function(){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),i=t.toLowerCase(),a=null===n||void 0===n||null===(e=n.base)||void 0===e?void 0:e.toLowerCase(),l=null!==n&&void 0!==n&&n.modifications?Object.values(n.modifications).map((function(e){return e.toLowerCase()})).join(" "):"";if("/"===r)return Boolean(a||l);if(r.includes("/")){var c=r.split("/");if(c.length>3||3===c.length&&""!==c[2])return!1;if(3===c.length&&""!==c[1]){var u=c[1],s=a&&a.length===u.length&&Array.from(a).every((function(e,t){return e===u[t]})),d=!!l&&l.split(" ").some((function(e){return e.length===u.length&&Array.from(e).every((function(e,t){return e===u[t]}))}));return s||d}var f=c[0],p=c[1];if(r.startsWith("/")&&r.length>1){var h=r.slice(1);return a&&a.startsWith(h)||l&&l.split(" ").some((function(e){return e.startsWith(h)}))}if(r.endsWith("/")&&r.length>1){var m=r.slice(0,-1),v=r[r.length-2];return a&&a.endsWith(m)&&a[a.length-1]===v||l&&l.split(" ").some((function(e){return e.endsWith(m)&&e[e.length-1]===v}))}var g=a&&a.startsWith(p)&&a.endsWith(f),y=!!l&&l.split(" ").some((function(e){return e.startsWith(p)&&e.endsWith(f)}));return g||y}var b=!!a&&a.includes(r),x=!!l&&l.includes(r);return o.includes(r)||i.includes(r)||b||x};return n.filter((function(e){if(e.isAmbiguous){var t=e.label,n=e.id,r=e.idtAliases,a=e.monomers;return i(t,n,r,o)||a.some((function(e){var t=e.monomerItem.props,n=t.Name,r=t.MonomerName,a=t.idtAliases;return i(n,r,a,o)}))}var l=e.props,c=l.Name,u=l.MonomerName,s=l.idtAliases;return i(c,u,s,o)})).map((function(e){return to(to({},e),{},{favorite:!!r[ro(e)]})}))})),so=function(e){var t=e.reduce((function(e,t){var n=t.props.MonomerNaturalAnalogCode||"Z";return e[n]||(e[n]=[]),e[n].push(to(to({},t),{},{label:t.props.MonomerName})),e}),{}),n=Object.entries(t).reduce((function(e,t){var n=(0,r.A)(t,2),o=n[0],i=n[1].sort((function(e,t){return e.label.localeCompare(t.label)})),a=i.findIndex((function(e){return e.label===o}));if(-1!==a){var l=i.splice(a,1);i.unshift(l[0])}return e[o]=i,e}),{});return Object.keys(n).sort((function(e,t){return e.localeCompare(t)})).reduce((function(e,t){var r={groupTitle:"Z"===t?"No natural analogue":t,groupItems:[]};return n[t].forEach((function(e){r.groupItems.push(to(to({},e),{},{props:to({},e.props)}))})),r.groupItems.length&&e.push(r),e}),[])},fo=function(e){return e.library.selectedTabIndex},po=io.actions,ho=po.loadMonomerLibrary,mo=po.setFavoriteMonomersFromLocalStorage;po.clearFavorites;var vo=po.toggleMonomerFavorites,go=po.setSearchFilter,yo=po.setSelectedTabIndex,bo=io.reducer,xo=v().mark(wo);function wo(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(zr);case 2:case"end":return e.stop()}}),xo)}var Ao=gt({name:"modal",initialState:{name:null,isOpen:!1,additionalProps:null,errorTooltipText:"",errorModalText:"",errorModalTitle:""},reducers:{openModal:function(e,t){"string"===typeof t.payload?e.name=t.payload:(e.name=t.payload.name,e.additionalProps=t.payload.additionalProps),e.isOpen=!0},closeModal:function(e){e.name=null,e.isOpen=!1,e.additionalProps=null},openErrorTooltip:function(e,t){e.errorTooltipText=t.payload},closeErrorTooltip:function(e){e.errorTooltipText=""},openErrorModal:function(e,t){if("string"===typeof t.payload)e.errorModalText=t.payload;else{var n=t.payload,r=n.errorMessage,o=n.errorTitle;e.errorModalText=r,e.errorModalTitle=o}},closeErrorModal:function(e){e.errorModalText=""}}}),Mo=Ao.actions,Co=Mo.openModal,ko=Mo.closeModal,So=Mo.openErrorTooltip,Oo=Mo.closeErrorTooltip,Io=Mo.openErrorModal,Eo=Mo.closeErrorModal,jo=function(e){return e.modal.name},Po=function(e){return e.modal.isOpen},Do=function(e){return e.modal.additionalProps},No=function(e){return e.modal.errorTooltipText},Lo=function(e){return e.modal.errorModalText},Fo=function(e){return e.modal.errorModalTitle},Yo=Ao.reducer;function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _o,zo=function(){return Jr.getItem(Vr)},Bo=function(e){var t,n=zo();return null!==(t=null===n||void 0===n?void 0:n.findIndex((function(t){return t.name===e})))&&void 0!==t?t:-1},Ro=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),n=zo()||[],r=Bo(t.nameInList);t.nameInList=t.name,r>-1?(n.splice(r,1,t),Jr.setItem(Vr,n)):Jr.setItem(Vr,[].concat((0,y.A)(n),[t]))};function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Presets="Presets"}(_o||(_o={}));var Uo={activePreset:null,sequenceSelection:void 0,sequenceSelectionName:void 0,isSequenceFirstsOnlyNucleoelementsSelected:void 0,activePresetMonomerGroup:null,groupItemValidations:(0,b.A)((0,b.A)((0,b.A)({},Br.BASES,[]),Br.SUGARS,[]),Br.PHOSPHATES,[]),presetsDefault:[],presetsCustom:[],activeRnaBuilderItem:null,isEditMode:!1,uniqueNameError:"",invalidPresetError:"",activePresetForContextMenu:null},Ko=(0,b.A)((0,b.A)((0,b.A)({},Br.BASES,"base"),Br.SUGARS,"sugar"),Br.PHOSPHATES,"phosphate"),Wo=gt({name:"rna-builder",initialState:Uo,reducers:{createNewPreset:function(e){e.activePreset={base:void 0,sugar:void 0,phosphate:void 0,name:"",nameInList:""}},setActivePreset:function(e,t){e.activePreset=Ho(Ho({},t.payload),{},{nameInList:t.payload.name})},setSequenceSelection:function(e,t){e.sequenceSelection=(0,y.A)(t.payload)},setSequenceSelectionName:function(e,t){e.sequenceSelectionName=t.payload},setIsSequenceFirstsOnlyNucleoelementsSelected:function(e,t){e.isSequenceFirstsOnlyNucleoelementsSelected=t.payload},setActivePresetForContextMenu:function(e,t){e.activePresetForContextMenu=t.payload},setActivePresetName:function(e,t){e.activePreset.name=t.payload},setActiveRnaBuilderItem:function(e,t){e.activeRnaBuilderItem=t.payload},recalculateRnaBuilderValidations:function(e,t){var n=function(e,t){var n,r,o=[],i=[],a=[];return t&&(null!==e&&void 0!==e&&e.sugar||null!==e&&void 0!==e&&e.phosphate||null!==e&&void 0!==e&&e.base)?(null!==e&&void 0!==e&&e.phosphate&&o.push("R2"),null!==e&&void 0!==e&&e.base&&o.push("R3"),a.push("R1"),null!==e&&void 0!==e&&null!==(n=e.sugar)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.MonomerCaps&&!("R3"in e.sugar.props.MonomerCaps)&&a.push("DISABLED"),i.push("R1"),null!==e&&void 0!==e&&null!==(r=e.sugar)&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.MonomerCaps&&!("R2"in e.sugar.props.MonomerCaps)&&i.push("DISABLED"),{sugarValidations:o,phosphateValidations:i,baseValidations:a}):{sugarValidations:o,phosphateValidations:i,baseValidations:a}}(t.payload.rnaPreset,t.payload.isEditMode),r=n.sugarValidations,o=n.phosphateValidations,i=n.baseValidations;e.groupItemValidations[Br.SUGARS]=r,e.groupItemValidations[Br.BASES]=i,e.groupItemValidations[Br.PHOSPHATES]=o},setActivePresetMonomerGroup:function(e,t){e.activePresetMonomerGroup=t.payload},savePreset:function(e,t){var n=Ho({},t.payload);if(Ro(function(e){var t=["sugar","base","phosphate"],n=C()(e,t);n.templates=[];for(var r=0,o=t;r<o.length;r++){var i,a=e[o[r]],l=(null===a||void 0===a||null===(i=a.props)||void 0===i?void 0:i.id)||(null===a||void 0===a?void 0:a.id);l&&n.templates.push({$ref:a.isAmbiguous?(0,h.setAmbiguousMonomerTemplatePrefix)(l):(0,h.setMonomerTemplatePrefix)(l)})}return n}(n)),n.nameInList){var r=e.presetsCustom.findIndex((function(e){return e.name===n.nameInList}));n.nameInList=n.name,-1===r?e.presetsCustom.push(n):e.presetsCustom.splice(r,1,n)}else e.presetsCustom.push(n);e.activePreset&&(e.activePreset.nameInList=n.name)},deletePreset:function(e,t){var n=t.payload;!function(e){if(e){var t=zo(),n=Bo(e);t&&(t.splice(n,1),t.length?Jr.setItem(Vr,t):Jr.removeItem(Vr))}}(n.name);var r=e.presetsCustom.findIndex((function(e){return e.name===n.name}));e.presetsCustom.splice(r,1),n.nameInList&&(e.activePreset=null)},setIsEditMode:function(e,t){e.isEditMode=t.payload},setUniqueNameError:function(e,t){e.uniqueNameError=t.payload},setInvalidPresetError:function(e,t){e.invalidPresetError=t.payload},setDefaultPresets:function(e,t){var n=t.payload[0];n&&(e.presetsDefault.find((function(e){return e.name===n.name}))||(e.presetsDefault=t.payload))},setCustomPresets:function(e,t){e.presetsCustom=t.payload},setFavoritePresetsFromLocalStorage:function(e){var t=Jr.getItem(Gr);t&&Array.isArray(t)&&(e.presetsDefault=e.presetsDefault.map((function(e){var n="".concat(e.name,"_").concat(h.MONOMER_CONST.RNA);return t.find((function(e){return e===n}))?Ho(Ho({},e),{},{favorite:!0}):e})))},clearFavorites:function(e){e.presetsDefault=[]},togglePresetFavorites:function(e,t){var n=e.presetsDefault.findIndex((function(e){return e.name===t.payload.name})),r=e.presetsCustom.findIndex((function(e){return e.name===t.payload.name}));if(n>=0){var o=e.presetsDefault[n].favorite;e.presetsDefault[n].favorite=!o}else if(r>=0){!function(e){if(e){var t=zo(),n=Bo(e);t&&n>-1&&(t[n].favorite=!t[n].favorite,Jr.setItem(Vr,t))}}(e.presetsCustom[r].name);var i=e.presetsCustom[r].favorite;return void(e.presetsCustom[r].favorite=!i)}var a="".concat(t.payload.name,"_").concat(h.MONOMER_CONST.RNA),l=Jr.getItem(Gr)||[];l.some((function(e){return e===a}))?Jr.setItem(Gr,l.filter((function(e){return e!==a}))):(l.push(a),Jr.setItem(Gr,l))}}}),Go=function(e){return e.rnaBuilder.activeRnaBuilderItem},Vo=function(e){return e.rnaBuilder.groupItemValidations},Zo=function(e){return e.rnaBuilder.activePreset},$o=function(e){return e.rnaBuilder.sequenceSelection},Qo=function(e){return e.rnaBuilder.sequenceSelectionName},Xo=function(e){return e.rnaBuilder.isSequenceFirstsOnlyNucleoelementsSelected},Jo=function(e,t){if(Ko[t]&&e)return e[Ko[t]]},ei=function(e){return e.rnaBuilder.activePresetMonomerGroup},ti=function(e){return Boolean(e.name&&e.sugar&&(e.base||e.phosphate))},ni=function(e){return e.rnaBuilder.isEditMode},ri=function(e){var t,n,r,o,i,a;if(!e)return"";var l=(null===(t=e.sugar)||void 0===t?void 0:t.label)||(null===(n=e.sugar)||void 0===n?void 0:n.props.MonomerName)||"",c=(null===(r=e.base)||void 0===r?void 0:r.label)||(null===(o=e.base)||void 0===o?void 0:o.props.MonomerName)||"",u=(null===(i=e.phosphate)||void 0===i?void 0:i.label)||(null===(a=e.phosphate)||void 0===a?void 0:a.props.MonomerName)||"",s=l;return s+=l&&u||(l||u)&&c?"(".concat(c,")"):c,s+=u},oi=function(e){return e.rnaBuilder.uniqueNameError},ii=function(e){return e.rnaBuilder.invalidPresetError},ai=function(e){var t=e.rnaBuilder.activePreset;return t&&!t.nameInList&&!t.name&&!t.sugar&&!t.base&&!t.phosphate},li=function(e){return e.rnaBuilder.activePresetForContextMenu},ci=function(e){return e.filter((function(e){return e.favorite}))},ui=function(e){var t=e.rnaBuilder,n=t.presetsDefault,r=void 0===n?[]:n,o=t.presetsCustom,i=void 0===o?[]:o;return[].concat((0,y.A)(r),(0,y.A)(i))},si=function(e){var t,n=e.library.searchFilter,r=ui(e),o=null!==(t=function(e){return e.editor.position}(e))&&void 0!==t?t:k.vr.Library,i=n.toLowerCase();return r.filter((function(e){var t,n,r,a,l,c,u,s,d=null===(t=e.name)||void 0===t?void 0:t.toLowerCase(),f=null===(n=e.sugar)||void 0===n||null===(n=n.label)||void 0===n?void 0:n.toLowerCase(),p=null===(r=e.phosphate)||void 0===r||null===(r=r.label)||void 0===r?void 0:r.toLowerCase(),h=null===(a=e.base)||void 0===a||null===(a=a.label)||void 0===a?void 0:a.toLowerCase(),m=null===(l=e.idtAliases)||void 0===l||null===(l=l.base)||void 0===l?void 0:l.toLowerCase(),v=null===(c=e.idtAliases)||void 0===c?void 0:c.modifications,g=m;if(null!==(u=e.name)&&void 0!==u&&u.includes("MOE")&&m){var y,b,x,w=m,A=null!==(y=null===v||void 0===v?void 0:v.endpoint5)&&void 0!==y?y:"5".concat(w),M=null!==(b=null===v||void 0===v?void 0:v.internal)&&void 0!==b?b:"i".concat(w),C=null!==(x=null===v||void 0===v?void 0:v.endpoint3)&&void 0!==x?x:"3".concat(w);switch(o){case k.vr.Library:g="".concat(A,", ").concat(M);break;case k.vr.ChainStart:g=A;break;case k.vr.ChainMiddle:g=M;break;case k.vr.ChainEnd:g=C}}var S=(i.match(/\//g)||[]).length,O=i.split("/");if(S>=2&&void 0!==O[2]&&""!==O[2])return!1;if(i.startsWith("/")&&i.length>1){var I,E=i.slice(1);return(null===(I=g)||void 0===I?void 0:I.toLowerCase().startsWith(E))||(null===m||void 0===m?void 0:m.startsWith(E))||v&&Object.values(v).some((function(e){return null===e||void 0===e?void 0:e.toLowerCase().startsWith(E)}))}if(i.endsWith("/")&&i.length>1){var j,P=i.slice(0,-1),D=i[i.length-2];return(null===(j=g)||void 0===j?void 0:j.toLowerCase().endsWith(P))&&g[g.length-1]===D||(null===m||void 0===m?void 0:m.endsWith(P))&&m[m.length-1]===D||v&&Object.values(v).some((function(e){return(null===e||void 0===e?void 0:e.toLowerCase().endsWith(P))&&e[e.length-1]===D}))}return"/"===i?!!e.idtAliases:(null===d||void 0===d?void 0:d.includes(i))||(null===f||void 0===f?void 0:f.includes(i))||(null===p||void 0===p?void 0:p.includes(i))||(null===h||void 0===h?void 0:h.includes(i))||(null===(s=g)||void 0===s?void 0:s.toLowerCase().includes(i))}))},di=Wo.actions,fi=di.setActivePreset,pi=di.setSequenceSelection,hi=di.setSequenceSelectionName,mi=di.setIsSequenceFirstsOnlyNucleoelementsSelected;di.setActivePresetName;var vi=di.setActiveRnaBuilderItem,gi=di.recalculateRnaBuilderValidations,yi=di.setActivePresetMonomerGroup,bi=di.savePreset,xi=di.deletePreset,wi=di.createNewPreset,Ai=di.setIsEditMode,Mi=di.setUniqueNameError,Ci=di.setInvalidPresetError,ki=di.setDefaultPresets,Si=di.setCustomPresets,Oi=di.setActivePresetForContextMenu,Ii=di.togglePresetFavorites,Ei=di.setFavoritePresetsFromLocalStorage,ji=di.clearFavorites,Pi=Wo.reducer;var Di=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){var t,n=void 0===e?{}:e,r=n.context,o=void 0===r?{}:r,i=n.channel,a=void 0===i?Gn():i,l=n.sagaMonitor,c=(0,A.A)(n,["context","channel","sagaMonitor"]);function u(e){var n=e.getState,r=e.dispatch;return t=gr.bind(null,(0,g.A)({},c,{context:o,channel:a,dispatch:r,getState:n,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var n=e(t);return a.put(t),n}}}return u.run=function(){return t.apply(void 0,arguments)},u.setContext=function(e){Xt(o,e)},u}(),n=function(e){var t,n=ht(),r=e||{},o=r.reducer,i=void 0===o?void 0:o,a=r.middleware,l=void 0===a?n():a,c=r.devTools,u=void 0===c||c,s=r.preloadedState,f=void 0===s?void 0:s,p=r.enhancers,h=void 0===p?void 0:p;if("function"===typeof i)t=i;else{if(!ut(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,d.HY)(i)}var m=l;if("function"===typeof m&&(m=m(n),!mt&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!mt&&m.some((function(e){return"function"!==typeof e})))throw new Error("each middleware provided to configureStore must be a function");var v=d.Tw.apply(void 0,m),g=d.Zz;u&&(g=ct(at({trace:!mt},"object"===typeof u&&u)));var y=new ft(v),b=y;Array.isArray(h)?b=Xe([v],h):"function"===typeof h&&(b=h(y));var x=g.apply(void 0,b);return(0,d.y$)(t,f,x)}({reducer:{editor:Nr,modal:Yo,library:bo,rnaBuilder:Pi},middleware:function(e){return e({thunk:!1,serializableCheck:!1}).concat(t)},preloadedState:e});return t.run(wo),n}(),Ni={colorA:{regular:"#CCCBD6",hover:"#B8BBCC"},colorCM:{regular:"#FFE34C",hover:"#FFD700"},colorDQ:{regular:"#AD4551",hover:"#AB0014"},colorEN:{regular:"#93F5F5",hover:"#00F0F0"},colorFY:{regular:"#5656BF",hover:"#2626BF"},colorGX:{regular:"#E1E6ED",hover:"#CAD3E0"},colorH:{regular:"#BFC9FF",hover:"#99AAFF"},colorILV:{regular:"#50E576",hover:"#00D936"},colorKR:{regular:"#365CFF",hover:"#002CEB"},colorP:{regular:"#F2C5B6",hover:"#FFA98C"},colorST:{regular:"#FFC44C",hover:"#FFAA00"},colorW:{regular:"#99458B",hover:"#7F006B"},colorU:{regular:"#99458B",hover:"#7F006B"},chem:{regular:"#333333",hover:"#555555"},default:{regular:"#CCCBD6",hover:"#B8BBCC"}},Li={D:{regular:"#FF8C69",hover:"#0097A8"},E:{regular:"#DC143C",hover:"#0097A8"},K:{regular:"#B0E0E6",hover:"#0097A8"},H:{regular:"#007FFF",hover:"#0097A8"},O:{regular:"#2A52BE",hover:"#0097A8"},R:{regular:"#0A12FF",hover:"#0097A8"},Q:{regular:"#EDB4ED",hover:"#0097A8"},Y:{regular:"#D65CBC",hover:"#0097A8"},U:{regular:"#CA7DE3",hover:"#0097A8"},S:{regular:"#9966CC",hover:"#0097A8"},C:{regular:"#BF00FF",hover:"#0097A8"},N:{regular:"#800080",hover:"#0097A8"},T:{regular:"#FF00FF",hover:"#0097A8"},L:{regular:"#7FFF00",hover:"#0097A8"},I:{regular:"#4CBB17",hover:"#0097A8"},F:{regular:"#008A00",hover:"#0097A8"},A:{regular:"#008080",hover:"#0097A8"},P:{regular:"#D2D900",hover:"#0097A8"},G:{regular:"#BDB76B",hover:"#0097A8"},M:{regular:"#FFF600",hover:"#0097A8"},V:{regular:"#FFD700",hover:"#0097A8"}},Fi={color:{background:{canvas:"#F5F5F5",primary:"#FFFFFF",secondary:"#F8FEFF",overlay:"rgba(94,94,94,.8)"},border:{primary:"#CAD3DD",secondary:"#7C7C7F"},text:{primary:"#333333",secondary:"#167782",light:"#585858",dark:"#000000",error:"#FF4A4A",lightgrey:"#7C7C7F"},tab:{regular:"#FFFFFF",active:"#EFF2F5",hover:"#00838F",content:"#EFF2F5"},scroll:{regular:"#717171",inactive:"#DDDDDD"},button:{primary:{active:"#167782",hover:"#00838F",clicked:"#4FB3BF",disabled:"rgba(113, 113, 113, 0.4)"},secondary:{active:"#585858",hover:"#333333",clicked:"#AEAEAE",disabled:"rgba(113, 113, 113, 0.4)"},group:{active:"#167782",hover:"#2E858F"},transparent:{active:"transparent"},text:{primary:"#FFFFFF",secondary:"#005662",disabled:"#7A7A7A"}},dropdown:{primary:"#333333",secondary:"#FFFFFF",hover:"#DDDDDD",disabled:"#7A7A7A"},tooltip:{background:"#FFFFFF",text:"#333333"},link:{active:"#00838F",hover:"#005662"},divider:"#AEAEAE",spinner:"#005662",error:"#FF4A4A",input:{text:{default:"#585858",active:"#333333",disabled:"#585858",error:"#FF4A4A"},background:{primary:"#FFFFFF",default:"#EFF2F5",hover:"#DDDDDD",disabled:"#eff2f5"},border:{regular:"#cad3dd",active:"#FFFFFF",hover:"#43b5c0",focus:"#EFF2F5",error:"#FF4A4A"}},icon:{grey:"#B4B9D6",hover:"#005662",active:"#525252",activeMenu:"#005662",clicked:"#FFFFFF",disabled:"rgba(82, 82, 82, 0.4)"},monomer:{default:"#C8C8C8"},editMode:{sequenceInRNABuilder:"#99d7dc"}},font:{size:{small:"10px",regular:"12px",medium:"14px",xsmall:"6px"},family:{montserrat:"Montserrat, sans-serif",inter:"Inter, FreeSans, Arimo, 'Droid Sans', Helvetica, 'Helvetica Neue',\nArial, sans-serif",roboto:"Roboto, FreeSans, Arimo, Droid Sans, Helvetica, Helvetica Neue, Arial, sans-serif"},weight:{light:300,regular:400,bold:600}},monomer:{color:{A:Ni.colorA,C:Ni.colorCM,M:Ni.colorCM,D:Ni.colorDQ,Q:Ni.colorDQ,E:Ni.colorEN,N:Ni.colorEN,F:Ni.colorFY,Y:Ni.colorFY,G:Ni.colorGX,X:Ni.colorGX,H:Ni.colorH,I:Ni.colorILV,L:Ni.colorILV,V:Ni.colorILV,K:Ni.colorKR,R:Ni.colorKR,P:Ni.colorP,S:Ni.colorST,T:Ni.colorST,W:Ni.colorW,U:Ni.colorU,CHEM:Ni.chem,default:Ni.default}},peptide:{color:{D:Li.D,E:Li.E,K:Li.K,H:Li.H,O:Li.O,R:Li.R,Q:Li.Q,Y:Li.Y,U:Li.U,S:Li.S,C:Li.C,N:Li.N,T:Li.T,L:Li.L,I:Li.I,F:Li.F,A:Li.A,P:Li.P,G:Li.G,M:Li.M,V:Li.V}},border:{regular:"1px solid #CAD3DD",small:"1px solid #E1E5EA",radius:{regular:"4px"}},shadow:{regular:"0px 1px 1px rgba(197, 203, 207, 0.7)"},outline:{small:"1px solid #B4B9D6",medium:"2px solid #B4B9D6",color:"#B4B9D6",selected:{color:"#167782",small:"1px solid #167782",medium:"2px solid #167782"},grey:{small:"1px solid #585858"}},transition:{regular:"all .3s"}},Yi=function(e){return(0,l.AH)({body:{fontSize:e.ketcher.font.size.medium,fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,boxSizing:"border-box"},div:{boxSizing:"border-box"},input:{fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,fontSize:e.ketcher.font.size.regular,boxSizing:"border-box"},h1:{fontSize:96},h2:{fontSize:60},h3:{fontSize:48},h4:{fontSize:34},h5:{fontSize:24},h6:{fontSize:20,fontWeight:e.ketcher.font.weight.bold},p:{fontSize:e.ketcher.font.size.regular},button:{textTransform:"uppercase",fontWeight:e.ketcher.font.weight.bold}},"","")};var Ti="254px",_i=(0,S.A)(k.pd,{target:"e1vkl5kv4"})({name:"4b23tt",styles:"outline:0;:hover{outline:none;}"}),zi=(0,S.A)("div",{target:"e1vkl5kv3"})((function(e){var t=e.theme;return{width:Ti,height:"calc(100% - 16px)",backgroundColor:t.ketcher.color.background.primary,boxShadow:"0px 2px 5px rgba(103, 104, 132, 0.15)",display:"flex",flexDirection:"column",borderRadius:"4px"}}),""),Bi=(0,S.A)("h3",{target:"e1vkl5kv2"})((function(e){var t=e.theme;return{margin:0,padding:0,fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular}}),""),Ri=(0,S.A)("div",{target:"e1vkl5kv1"})((function(){return{padding:"12px",position:"relative"}}),""),qi=(0,S.A)("div",{target:"e1vkl5kv0"})((function(e){var t=e.theme;return{padding:"12px 0","& > div":{background:t.ketcher.color.input.background.default,display:"flex",height:"24px",flexDirection:"row",border:"1px solid transparent",borderRadius:"4px",padding:"0 4px","& > span":{display:"flex",alignItems:"center",justifyContent:"center"},"&:has(input:focus)":{outline:"1px solid ".concat(t.ketcher.color.input.border.focus)},"& > input":{background:"transparent",border:"none",padding:"0 0 0 8px",margin:0,flex:1,"&:focus":{outline:"none"}}}}}),"");var Hi=(0,S.A)("div",{target:"e1pv9pa9"})((function(e){return{width:e.fullWidth?"100%":"fit-content",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingRight:e.withPaddingRight?"12px":0}}),""),Ui=(0,S.A)("div",{target:"e1pv9pa8"})((function(e){return{height:"100%",width:"100%",position:"relative",padding:"12px",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",containerType:"size",overflow:"hidden"}}),""),Ki=(0,S.A)("div",{target:"e1pv9pa7"})((function(e){return{height:"100%",width:"100%",position:"relative",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",columnGap:"3px"}}),""),Wi=(0,S.A)("div",{target:"e1pv9pa6"})((function(e){var t=e.hide;return{height:"100%",width:"fit-content",display:void 0!==t&&t?"none":"flex",flexDirection:"column"}}),""),Gi=(0,S.A)(Wi,{target:"e1pv9pa5"})(""),Vi=(0,S.A)(Wi,{target:"e1pv9pa4"})(""),Zi=(0,S.A)("div",{target:"e1pv9pa3"})((function(e){var t=e.shortened;return{height:"36px",width:void 0!==t&&t?"calc(100% - ".concat(Ti,")"):"100%",marginBottom:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FFFFFF",boxShadow:"0px 2px 5px rgba(103, 104, 132, 0.15)",borderRadius:"4px"}}),""),$i=(0,S.A)("div",{target:"e1pv9pa2"})({name:"149k9u4",styles:"height:100%;width:100%;position:relative"}),Qi=(0,S.A)("div",{target:"e1pv9pa1"})({name:"0",styles:""}),Xi=(0,S.A)("div",{target:"e1pv9pa0"})({name:"1k18kha",styles:"height:40px"}),Ji=function(e){var t=e.children,n={Left:null,Main:null,Right:null,Top:null,InsideRoot:null};return a.Children.forEach(t,(function(e){e.type===Gi?n.Left=e:e.type===Vi?n.Right=e:e.type===Zi?n.Top=e:e.type===$i?n.Main=e:e.type===Qi&&(n.InsideRoot=e)})),(0,o.FD)(Ui,{children:[(0,o.FD)(Hi,{fullWidth:!0,withPaddingRight:!0,children:[n.Top,(0,o.FD)(Ki,{children:[n.Left,(0,o.Y)(Xi,{}),n.Main]})]}),(0,o.Y)(Hi,{children:n.Right}),n.InsideRoot]})};Ji.Left=Gi,Ji.Top=Zi,Ji.Right=Vi,Ji.Main=$i,Ji.InsideRoot=Qi;var ea=function(){return(0,i.wA)()},ta=i.d4;function na(){var e,t=h.ketcherProvider.getKetcher(),n=(null===t||void 0===t||null===(e=t.editor)||void 0===e?void 0:e.struct().isBlank())?h.DEFAULT_LAYOUT_MODE:h.HAS_CONTENT_LAYOUT_MODE,o=ta(Er),i=ta(Pr),l=(0,a.useState)(i||n),c=(0,r.A)(l,2),u=c[0],s=c[1],d=(0,a.useCallback)((function(e){s(e)}),[s]);return(0,a.useEffect)((function(){return null===o||void 0===o||o.events.layoutModeChange.add(d),function(){null===o||void 0===o||o.events.layoutModeChange.remove(d)}}),[d,null===o||void 0===o?void 0:o.events.layoutModeChange]),u}function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ia=(0,S.A)("div",{target:"e1fsnjs54"})((function(){return{backgroundColor:"#eef2f5",flexGrow:1,overflowY:"auto"}}),""),aa=(0,S.A)(R.A,{target:"e1fsnjs53"})({name:"jwg7h4",styles:"height:100%;width:100%;align-items:start"});function la(e){var t=e.children,n=e.value,r=e.index;return(0,o.Y)(ia,{role:"tabpanel",hidden:n!==r,id:r.toString(),children:n===r&&(0,o.Y)(aa,{children:t})})}function ca(e){var t=ea(),n=ta(fo),r=e.tabs,i=r[n],a=null===i||void 0===i?void 0:i.component,l=null===i||void 0===i?void 0:i.props,c=(0,S.A)(O.A,{target:"e1fsnjs52"})({name:"1oug8xv",styles:"height:24px;min-height:24px;list-style-type:none;margin:0;padding:0;& .MuiTabs-indicator{display:none;}"}),u=(0,S.A)(I.A,{target:"e1fsnjs51"})((function(e){var t=e.theme;return{minHeight:24,minWidth:0,height:1,padding:0,fontSize:t.ketcher.font.size.regular,textTransform:"none",cursor:"pointer",textAlign:"center",backgroundColor:t.ketcher.color.tab.regular,color:t.ketcher.color.text.light,listStyleType:"none",margin:0,flex:"1 1 auto",border:"1px solid transparent",borderBottom:"1px solid ".concat(t.ketcher.color.border.primary),borderRadius:"4px 4px 0 0","&:first-of-type":{borderLeftColor:"transparent !important",borderRadius:"0 4px 0 0 "},"&:last-of-type":{borderRightColor:"transparent !important",borderRadius:"4px 0 0 0"},"&:hover":{backgroundColor:t.ketcher.color.tab.regular,color:t.ketcher.color.text.primary,border:"1px solid ".concat(t.ketcher.color.border.primary)},"&.Mui-selected":{backgroundColor:t.ketcher.color.tab.active,color:t.ketcher.color.text.primary,border:"1px solid ".concat(t.ketcher.color.border.primary),borderBottom:"1px solid transparent"}}}),""),s=(0,S.A)("div",{target:"e1fsnjs50"})({name:"2r6rpv",styles:"display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;width:100%;height:100%"});return(0,o.FD)(o.FK,{children:[(0,o.Y)(c,{value:n,onChange:function(e,n){t(yo(n))},children:r.map((function(e,t){return(0,o.Y)(u,oa({label:e.caption,"data-testid":e.testId},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),t)}))}),i&&(0,o.Y)(la,{value:n,index:n,children:(0,o.Y)(s,{children:(0,o.Y)(a,oa({},l))})})]})}var ua=function(){};function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fa=function(e,t,n){var o=new Map(e.map((function(e){return[(0,h.isAmbiguousMonomerLibraryItem)(e)?(0,h.setAmbiguousMonomerTemplatePrefix)(e.id):(0,h.setMonomerTemplatePrefix)(ro(e)),e]})));return t.filter((function(e){return e.templates.every((function(e){return Boolean(o.get(e.$ref))}))})).map((function(e){var t=new Map(e.templates.map((function(e){var t=o.get(e.$ref),n=(0,h.monomerFactory)(t);return[(0,r.A)(n,3)[2],t]}))),i=t.get(h.KetMonomerClass.Sugar),a=t.get(h.KetMonomerClass.Base),l=t.get(h.KetMonomerClass.Phosphate),c={base:a?da(da({},a),{},{label:a.label}):void 0,name:e.name,phosphate:l?da(da({},l),{},{label:l.label}):void 0,sugar:i?da(da({},i),{},{label:i.label}):void 0,favorite:e.favorite,default:n||e.default};return e.idtAliases?da(da({},c),{},{idtAliases:e.idtAliases}):c}))},pa=function(e){return Object.entries(e).filter((function(e){var t=(0,r.A)(e,2);t[0];var n=t[1];return Boolean(n)})).map((function(e){return(0,r.A)(e,1)[0]}))};var ha=(0,S.A)("div",{target:"e719szw2"})("background:white;height:48px;text-align:center;cursor:",(function(e){return e.disabled?"default":"pointer"}),";opacity:",(function(e){return e.disabled?"0.4":"1"}),";display:flex;justify-content:space-between;align-items:center;padding:0 5px;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";position:relative;overflow:hidden;border-radius:4px;box-shadow:0 2px 4px rgba(0, 0, 0, 0.15);margin:0;user-select:none;border-color:#167782;border-width:",(function(e){return e.selected?"2px 2px 2px":"0px"}),";border-style:solid;box-sizing:border-box;z-index:",(function(e){return e.selected?2:void 0}),";.hidden & .star{visibility:hidden!important;}&:hover{outline:1px solid #b4b9d6;>.star{visibility:visible;opacity:1;}}&::after{content:'';display:block;position:absolute;top:0;left:0;width:100%;height:8px;border-bottom:",(function(e){return e.isVariantMonomer?"1px solid #CAD3DD":"none"}),";background:",(function(e){var t,n,r,o,i,a,l=e.code,c=e.theme,u=e.item;return u?"PEPTIDE"===(null===(n=u.props)||void 0===n?void 0:n.MonomerType)&&null!==(r=c.ketcher.peptide.color[l])&&void 0!==r&&r.regular?null===(a=c.ketcher.peptide.color[l])||void 0===a?void 0:a.regular:(null===(o=c.ketcher.monomer.color[l])||void 0===o?void 0:o.regular)||(null===(i=c.ketcher.monomer.color.default)||void 0===i?void 0:i.regular):null===(t=c.ketcher.monomer.color.default)||void 0===t?void 0:t.regular}),";},>span{position:absolute;bottom:",(function(e){return e.selected?"4px":"6px"}),";left:",(function(e){return e.selected?"4px":"6px"}),";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:85%;}>.star{color:#e1e5ea;position:absolute;top:12px;right:3px;font-size:15px;opacity:0;transition:0.2s ease;flex-shrink:0;&.visible{visibility:visible;opacity:1;}&:active{transform:scale(1.4);}&:hover,&.visible{color:#faa500;}}"),ma=(0,S.A)("div",{target:"e719szw1"})("display:flex;justify-content:center;align-items:center;height:15px;width:",(function(e){return e.monomersAmount>=10?"20px":"15px"}),";border-radius:",(function(e){return e.monomersAmount>=10?"20px":"50%"}),";border:1px solid #cceaee;position:absolute;bottom:",(function(e){return e.selected?"4px":"6px"}),";left:",(function(e){return e.selected?"18px":"20px"}),";font-size:12px;line-height:12px;"),va=(0,S.A)("span",{target:"e719szw0"})({name:"rnnx2x",styles:"font-size:12px"});function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ba=function(e){var t=e.item,n=e.groupName,l=e.onMouseLeave,c=e.onMouseMove,u=e.isSelected,s=e.disabled,d=e.onClick,f=void 0===d?ua:d,p=(0,a.useState)(t.favorite),m=(0,r.A)(p,2),v=m[0],g=m[1],y=ea(),b=function(e,t){var n,o,l,c=ta(jr),u=(0,i.d4)(Xo),s=(0,a.useState)(!1),d=(0,r.A)(s,2),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(!c)return p(!1);var n;if(t===h.MonomerGroups.BASES)p(!(null!==e&&void 0!==e&&null!==(n=e.props)&&void 0!==n&&null!==(n=n.MonomerCaps)&&void 0!==n&&n.R1));else if(t===h.MonomerGroups.PHOSPHATES){var r,o;p(!(null!==e&&void 0!==e&&null!==(r=e.props)&&void 0!==r&&null!==(r=r.MonomerCaps)&&void 0!==r&&r.R1&&null!==e&&void 0!==e&&null!==(o=e.props)&&void 0!==o&&null!==(o=o.MonomerCaps)&&void 0!==o&&o.R2))}else if(t===h.MonomerGroups.SUGARS){var i,a,l,s,d;p(u?!(null!==e&&void 0!==e&&null!==(i=e.props)&&void 0!==i&&null!==(i=i.MonomerCaps)&&void 0!==i&&i.R3&&null!==e&&void 0!==e&&null!==(a=e.props)&&void 0!==a&&null!==(a=a.MonomerCaps)&&void 0!==a&&a.R2):!(null!==e&&void 0!==e&&null!==(l=e.props)&&void 0!==l&&null!==(l=l.MonomerCaps)&&void 0!==l&&l.R3&&null!==e&&void 0!==e&&null!==(s=e.props)&&void 0!==s&&null!==(s=s.MonomerCaps)&&void 0!==s&&s.R2&&null!==e&&void 0!==e&&null!==(d=e.props)&&void 0!==d&&null!==(d=d.MonomerCaps)&&void 0!==d&&d.R1))}}),[t,c,u,null===e||void 0===e||null===(n=e.props)||void 0===n||null===(n=n.MonomerCaps)||void 0===n?void 0:n.R1,null===e||void 0===e||null===(o=e.props)||void 0===o||null===(o=o.MonomerCaps)||void 0===o?void 0:o.R2,null===e||void 0===e||null===(l=e.props)||void 0===l||null===(l=l.MonomerCaps)||void 0===l?void 0:l.R3,p]),f}(t,n)||s,x=(0,h.isAmbiguousMonomerLibraryItem)(t)?"":t.props.MonomerType===Ur?t.props.MonomerType:t.props.MonomerNaturalAnalogCode,w=ro(t),A=(0,h.isAmbiguousMonomerLibraryItem)(t)?void 0:t;return(0,o.FD)(ha,ya(ya({selected:u,disabled:b,"data-testid":w,"data-monomer-item-id":w,item:A,isVariantMonomer:t.isAmbiguous,code:x,onMouseLeave:l,onMouseMove:c},b?{}:{onClick:f}),{},{children:[(0,o.Y)(va,{children:t.label}),!b&&(0,o.Y)("div",{onClick:function(e){e.stopPropagation(),g(!v),y(vo(t))},className:"star ".concat(v?"visible":""),children:"\u2605"}),(0,h.isAmbiguousMonomerLibraryItem)(t)&&(0,o.Y)(ma,{selected:u,monomersAmount:t.monomers.length,children:t.monomers.length})]}))};var xa=(0,S.A)("div",{target:"e10tnh3n3"})({name:"183ulj8",styles:"display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:auto;flex:1;gap:8px;&::after{content:'';flex:auto;}"}),wa=(0,S.A)("div",{target:"e10tnh3n2"})("position:relative;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";font-family:",(function(e){return e.theme.ketcher.font.family.roboto}),";color:",(function(e){return e.theme.ketcher.color.divider}),";margin:0;gap:8px;"),Aa=(0,S.A)(wa,{target:"e10tnh3n1"})({name:"qdeacm",styles:"flex-direction:column"}),Ma=(0,S.A)("div",{target:"e10tnh3n0"})("height:100%;display:flex;flex-grow:0;flex-basis:14px;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";font-family:",(function(e){return e.theme.ketcher.font.family.roboto}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";margin:0;"),Ca=function(e){var t=e.items,n=e.title,r=e.groupName,i=e.selectedMonomerUniqueKey,l=e.libraryName,c=e.disabled,u=e.onItemClick,d=void 0===u?ua:u,f=ea(),p=ta(Er),m=ta(Vo),v=function(e){var t=!1;if((0,h.isAmbiguousMonomerLibraryItem)(e))return!1;if(c)t=c;else{var n,r,o=m["".concat(null===(n=e.props)||void 0===n?void 0:n.MonomerClass,"s")];if((null===o||void 0===o?void 0:o.length)>0&&null!==(r=e.props)&&void 0!==r&&r.MonomerCaps)for(var i=0;i<o.length;i++)o[i]in e.props.MonomerCaps||(t=!0)}return t},g=(0,a.useCallback)((function(e){return f(kr(e))}),[f]),y=(0,a.useCallback)((0,s.debounce)((function(e){return g(e)}),500),[g]),b=function(){y.cancel(),f(kr(void 0))},x=function(e){return i===ro(e)};return(0,o.FD)(Aa,{children:[n&&(0,o.Y)(Ma,{children:n}),(0,o.Y)(xa,{children:t.map((function(e){return(0,o.Y)(ba,{disabled:v(e),item:e,groupName:r,isSelected:x(e),onMouseLeave:b,onMouseMove:function(t){return function(e,t){b();var n,r,o,i=t.currentTarget.getBoundingClientRect();if((0,h.isAmbiguousMonomerLibraryItem)(e)){o=e?(0,k.Xv)(e)(i):"";var a="".concat(i.left+i.width/2,"px");r=mr.AmbiguousMonomer,n={left:a,top:o,transform:"translate(-50%, 0)"}}else n={right:"-88px",top:o=e?(0,k.Dk)(i):"",transform:"translate(-50%, 0)"},r=mr.Monomer;y({type:r,monomer:e,style:n})}(e,t)},onClick:function(){return function(e){f(Mr("monomer")),["FAVORITES","PEPTIDE","CHEM"].includes(null!==l&&void 0!==l?l:"")&&p.events.selectMonomer.dispatch(e),d(e)}(e)}},ro(e))}))})]})};var ka,Sa=(0,S.A)("div",{target:"e1bp6il60"})({name:"jewv9i",styles:"width:100%;display:flex;flex-direction:column;justify-items:center;gap:24px;padding:16px 12px"}),Oa=(0,S.A)(ha,{target:"e1txcvj90"})("&::after{content:'';background:",(function(e){var t=e.theme;return e.selected?t.ketcher.color.button.primary.active:"#faa500"}),";}.dots{visibility:visible;position:absolute;right:2px;top:10px;}.hidden{visibility:hidden!important;}>.star{right:0;left:4px;top:10px;width:min-content;}"),Ia=(0,S.A)("div",{target:"ernj46o2"})((function(e){return{minHeight:"32px",display:"flex",alignItems:"center",padding:"8px 12px",gap:"8px",borderBottom:e.theme.ketcher.border.small}}),""),Ea=(0,S.A)("span",{target:"ernj46o1"})((function(e){return{flexGrow:1,fontSize:e.theme.ketcher.font.size.regular}}),""),ja=(0,S.A)(k.In,{target:"ernj46o0"})((function(e){return{width:"16px",height:"16px",color:e.theme.ketcher.color.icon.grey,transition:e.theme.ketcher.transition.regular,transform:e.expanded?"rotate(180deg)":"none"}}),""),Pa=function(e){var t=e.preset,n=e.isSelected,i=e.onClick,l=void 0===i?ua:i,c=e.onContextMenu,u=void 0===c?ua:c,s=e.onMouseLeave,d=void 0===s?ua:s,f=e.onMouseMove,p=void 0===f?ua:f,h=(0,a.useState)(!1),m=(0,r.A)(h,2),v=m[0],g=m[1],y=(0,a.useState)(t.favorite),b=(0,r.A)(y,2),x=b[0],w=b[1],A=ea();return(0,o.FD)(Oa,{"data-testid":oo(t),onClick:l,onContextMenu:u,onMouseLeave:d,onMouseMove:p,onMouseOver:function(){g(!0)},onMouseOut:function(){g(!1)},selected:n,code:t.name,"data-rna-preset-item-name":t.name,children:[(0,o.Y)("span",{children:t.name}),(0,o.Y)(ja,{name:"vertical-dots",className:v?"dots":"dots hidden",onClick:u}),(0,o.Y)("div",{"aria-hidden":!0,onClick:function(e){e.stopPropagation(),w(!x),A(Ii(t))},className:"star ".concat(x?"visible":""),children:"\u2605"})]})};!function(e){e.FOR_RNA="context-menu-for-RNA",e.FOR_SEQUENCE="context-menu-for-sequence",e.FOR_POLYMER_BOND="context-menu-for-polymer-bond",e.FOR_SELECTED_MONOMERS="context-menu-for-selected-monomers"}(ka||(ka={}));var Da=(0,S.A)(W.W1,{target:"ekj16lc0"})("--contexify-activeItem-bgColor:rgba(243, 245, 247, 1);--contexify-menu-minWidth:140px;--contexify-activeItem-color:rgba(51, 51, 51, 1);.contexify_itemContent{font-family:",(function(e){return e.theme.ketcher.font.family.inter}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";}.contexify_separator{color:rgba(225, 229, 234, 1);}.contexify_item-title{opacity:1;font-weight:bold;}"),Na=function(e,t){var n=[];return e.forEach((function(e,r){var i=e.name,a=e.title,l=e.hidden,c=e.disabled,u=e.isMenuTitle,s=e.separator,d=(0,o.Y)(W.q7,{id:i,onClick:t,"data-testid":i,hidden:l,disabled:c,className:u?"contexify_item-title":"",children:(0,o.Y)("span",{children:a})},i);n.push(d),s&&n.push((0,o.Y)(W.wv,{},r))})),n},La=function(e){var t=e.id,n=e.handleMenuChange,r=e.menuItems;return(0,o.Y)(Da,{id:t,children:Na(r,n)})},Fa=function(){var e=Xr,t=ea(),n=ta(li),r=ta(fo),i=ta(jr),a=[{name:"duplicateandedit",title:"Duplicate and Edit...",disabled:!1},{name:"edit",title:"Edit...",separator:!0,disabled:null===n||void 0===n?void 0:n.default},{name:"deletepreset",title:"Delete Preset",disabled:null===n||void 0===n?void 0:n.default}],l=document.querySelector(k.tS);return l&&!i?(0,K.createPortal)((0,o.Y)(La,{id:ka.FOR_RNA,menuItems:a,handleMenuChange:function(o){var i=o.id,a=o.props;switch(i){case"duplicateandedit":a.duplicatePreset(n),r!==e&&t(yo(e));break;case"edit":a.editPreset(n),r!==e&&t(yo(e));break;case"deletepreset":t(Co("delete"))}}}),l):null},Ya=function(e){var t=e.presets,n=e.duplicatePreset,r=e.editPreset,l=ta(Zo),c=ta(Er),u=(0,W.EF)({id:ka.FOR_RNA}).show,d=(0,i.wA)(),f=function(e){return function(){var t=function(e){var t,n,r,o,i,a=!0,l=!0,c=!0;return null!==e&&void 0!==e&&null!==(t=e.base)&&void 0!==t&&null!==(t=t.props)&&void 0!==t&&t.MonomerCaps&&(a="R1"in e.base.props.MonomerCaps),null!==e&&void 0!==e&&null!==(n=e.sugar)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.MonomerCaps&&a&&null!==e&&void 0!==e&&null!==(o=e.base)&&void 0!==o&&null!==(o=o.props)&&void 0!==o&&o.MonomerCaps&&(l="R3"in e.sugar.props.MonomerCaps),null!==e&&void 0!==e&&null!==(r=e.phosphate)&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.MonomerCaps&&(c="R1"in e.phosphate.props.MonomerCaps,l&&null!==e&&void 0!==e&&null!==(i=e.sugar)&&void 0!==i&&null!==(i=i.props)&&void 0!==i&&i.MonomerCaps&&(l="R2"in e.sugar.props.MonomerCaps)),a&&l&&c}(e);t||!e.name?(d(fi(e)),c.events.selectPreset.dispatch(e),e.name!==l.name&&d(Ai(!1))):d(Ci(e.name))}},p=function(e){var t;!(e instanceof HTMLDivElement)&&e.parentElement&&(e=e.parentElement);var n=e.getBoundingClientRect(),r=null===(t=e.offsetParent)||void 0===t?void 0:t.getBoundingClientRect(),o=n.right-140,i=n.y+n.height/2;return null!==r&&void 0!==r&&r.x&&(null===r||void 0===r?void 0:r.x)>o&&(o=n.x),{x:o,y:i}},m=ta(Or),v=(0,a.useCallback)((function(e){return d(kr(e))}),[d]),g=(0,a.useCallback)((0,s.debounce)((function(e){return v(e)}),500),[v]),y=function(){g.cancel(),d(kr(void 0))},b=function(e){return function(t){t.stopPropagation(),d(Oi(e)),u({event:t,props:{duplicatePreset:n,editPreset:r},position:p(t.currentTarget)})}};return(0,o.FD)(wa,{"data-testid":"rna-preset-group",children:[(0,o.Y)(xa,{children:t.map((function(e,t){return(0,o.Y)(Pa,{isSelected:(null===l||void 0===l?void 0:l.name)===e.name,preset:e,onClick:f(e),onContextMenu:b(e),onMouseMove:function(t){return function(e,t){if(y(),m.type!==mr.Preset&&t.currentTarget){var n=[e.sugar,e.base,e.phosphate],r=t.currentTarget.getBoundingClientRect(),o={left:"".concat(r.left+r.width,"px"),top:(0,h.isAmbiguousMonomerLibraryItem)(e.base)?(0,k.Xv)(e.base)(r):(0,k._Y)(r),transform:"translate(-100%, 0)"},i=(0,h.isAmbiguousMonomerLibraryItem)(e.base)?{type:mr.AmbiguousMonomer,monomer:e.base,presetMonomers:n,style:o}:{type:mr.Preset,monomers:n,name:e.name,idtAliases:e.idtAliases,position:vr.Library,style:o};g(i)}}(e,t)},onMouseLeave:y},"".concat(e.name).concat(t))}))}),(0,o.Y)(Fa,{})]})},Ta=function(e){var t=e.onItemClick,n=e.libraryName,i=e.duplicatePreset,l=e.editPreset,c=ta(uo),u=ta(si),s=ta(Ir),d=n===qr,f=d?{monomers:co(c),presets:ci(u)}:ao(c,n),p=so(d?f.monomers:f),m=d?function(e){var t=[];for(var n in h.MonomerGroups){var r=lo(e,h.MonomerGroups[n]);t=[].concat((0,y.A)(t),(0,y.A)(r))}return t.forEach((function(e){e.groupItems=e.groupItems.filter((function(e){return e.favorite}))})),t.filter((function(e){return e.groupItems.length}))}(c):lo(c,Br.PEPTIDES),v=(0,a.useState)(""),g=(0,r.A)(v,2),b=g[0],x=g[1],w=function(e){x(ro(e))};return(0,a.useEffect)((function(){"monomer"!==s&&x("")}),[s]),(0,o.FD)(Sa,{children:[d&&p.length>0&&(0,o.Y)("div",{children:"Monomers"}),p.map((function(e,r,i){var a=e.groupItems,l=e.groupTitle;return(0,o.Y)(Ca,{title:1===i.length?void 0:l,items:a,libraryName:n,onItemClick:t||w,selectedMonomerUniqueKey:b},l)})),d&&f.presets.length>0&&(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{children:"Presets"}),(0,o.Y)(Ya,{duplicatePreset:i,editPreset:l,presets:f.presets})]}),(0,o.Y)(o.FK,{children:("PEPTIDE"===n||d)&&m.map((function(e){return(0,o.Y)(Ca,{title:e.groupTitle,items:e.groupItems,libraryName:n,onItemClick:t||w,selectedMonomerUniqueKey:b},e.groupTitle)}))})]})};var _a=(0,S.A)("div",{target:"e1hdfnag5"})({name:"uawiic",styles:"display:flex;flex-direction:column;justify-content:flex-start;overflow:hidden;height:100%"}),za=(0,S.A)(k.nD,{target:"e1hdfnag4"})({name:"u6kpdv",styles:"min-height:32px"}),Ba=(0,S.A)("div",{target:"e1hdfnag3"})({name:"vz8pb8",styles:"flex-grow:2;min-height:32px"}),Ra=(0,S.A)("div",{target:"e1hdfnag2"})({name:"gs2evd",styles:"position:relative;width:100%;display:flex;flex-direction:column;gap:24px;justify-content:start;padding:16px 12px"}),qa=(0,S.A)(k.$n,{target:"e1hdfnag1"})((function(e){return{backgroundColor:e.theme.ketcher.color.button.transparent.active,color:e.theme.ketcher.color.text.light,borderColor:e.theme.ketcher.color.text.light}}),""),Ha=(0,S.A)("div",{target:"e1hdfnag0"})({name:"1q5khk2",styles:"width:100%;height:100%;background-color:#eff2f594;position:absolute;top:0;left:0"}),Ua=function(e){var t=e.groupName,n=e.quantity,r=e.expanded,i=e.iconName;return(0,o.FD)(Ia,{"data-testid":"summary-".concat(t),children:[(0,o.Y)(ja,{name:i}),(0,o.FD)(Ea,{children:[t," (",n,")"]}),(0,o.Y)(ja,{name:"chevron",expanded:r})]})};function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ga=function(e){var t=e.libraryName,n=e.duplicatePreset,l=e.editPreset,c=ta(uo),u=ao(c,t),s=ta(Go),d=ta(Zo),f=so(u),p=ta(si),m=function(e){return e.filter((function(e){var t,n;return!e.isAmbiguous&&((null===(t=e.props)||void 0===t?void 0:t.MonomerClass)===h.KetMonomerClass.RNA||(null===(n=e.props)||void 0===n?void 0:n.MonomerClass)===h.KetMonomerClass.DNA)}))}(c),v=so(m),g=ta(ni),x=ta(Er),w=ta(ai),A=ta(jr),M=(0,a.useState)(s),C=(0,r.A)(M,2),k=C[0],S=C[1],O=(0,a.useState)(d),I=(0,r.A)(O,2),E=I[0],j=I[1],P=(0,a.useState)(""),D=(0,r.A)(P,2),N=D[0],L=D[1],F=(0,i.wA)(),Y=function(e){k===e?S(null):(S(e),F(gi({rnaPreset:E,isEditMode:g})))},T=[{groupName:_o.Presets,iconName:"preset",groups:[{groupItems:p}]},{groupName:Br.SUGARS,iconName:"sugar",groups:f.filter((function(e){return Wr[e.groupTitle]===Br.SUGARS}))},{groupName:Br.BASES,iconName:"base",groups:f.filter((function(e){return Wr[e.groupTitle]===Br.BASES})).map((function(e){return Wa(Wa({},e),{},{groupItems:e.groupItems.filter((function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.MonomerClass)!==h.KetMonomerClass.RNA}))})}))},{groupName:Br.PHOSPHATES,iconName:"phosphate",groups:f.filter((function(e){return Wr[e.groupTitle]===Br.PHOSPHATES}))},{groupName:Br.NUCLEOTIDES,iconName:"nucleotide",groups:v}],_=function(e,t){var n;if(L(ro(e)),A||g||x.events.selectMonomer.dispatch(e),g){var r=(0,h.isAmbiguousMonomerLibraryItem)(e)?null===(n=e.monomers[0].monomerItem.props.MonomerClass)||void 0===n?void 0:n.toLowerCase():e.props.MonomerClass.toLowerCase(),o=Wa(Wa({},E),{},(0,b.A)({},r,e));j(o),F(yi({groupName:t,groupItem:e})),F(vi(t))}};(0,a.useEffect)((function(){S(s)}),[s]),(0,a.useEffect)((function(){F(vi(g&&d?s:_o.Presets))}),[g]);return(0,o.Y)(_a,{"data-testid":"rna-accordion",children:T.map((function(e){var r=k===e.groupName,i=lo(c,e.groupName),a=[].concat((0,y.A)(e.groups),(0,y.A)(i)).reduce((function(e,t){return e+t.groupItems.length||0}),0),u=(0,o.Y)(Ua,{iconName:e.iconName,groupName:e.groupName,quantity:a,expanded:r}),s=e.groupName===_o.Presets?(0,o.FD)(Ra,{children:[(0,o.Y)(qa,{onClick:function(){return F(wi()),F(vi(_o.Presets)),void F(Ai(!0))},children:"New Preset"}),(0,o.Y)(Ya,{duplicatePreset:n,editPreset:l,presets:p}),g&&!w&&(0,o.Y)(Ha,{})]}):(0,o.Y)(Ra,{children:(0,o.FD)(o.FK,{children:[e.groups.map((function(t){var n=t.groupItems,r=t.groupTitle;return(0,o.Y)(Ca,{title:e.groups.length>1?r:void 0,groupName:e.groupName,items:n,selectedMonomerUniqueKey:N,onItemClick:function(t){return _(t,e.groupName)}},r)})),i.map((function(n){return(0,o.Y)(Ca,{title:n.groupTitle,items:n.groupItems,libraryName:t,selectedMonomerUniqueKey:N,onItemClick:function(t){return _(t,e.groupName)}},n.groupTitle)}))]})});return e.groupName===_o.Presets&&r?(0,o.Y)(Ba,{children:(0,o.Y)(za,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(e.groupName),summary:u,details:s,expanded:r,onSummaryClick:function(){return Y(e.groupName)}})},e.groupName):(0,o.Y)(za,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(e.groupName),summary:u,details:s,expanded:r,onSummaryClick:function(){return Y(e.groupName)}},e.groupName)}))})};var Va=(0,S.A)("div",{target:"e1fsx6x2"})({name:"2zz6af",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:10px"}),Za=(0,S.A)("span",{target:"e1fsx6x1"})((function(e){return{fontSize:e.theme.ketcher.font.size.medium,overflow:"hidden",textOverflow:"ellipsis",color:e.grey?e.theme.ketcher.color.text.lightgrey:e.theme.ketcher.color.text.primary}}),""),$a=(0,S.A)("div",{target:"e1fsx6x0"})({name:"1x17g94",styles:"display:flex;align-items:center;width:100%"}),Qa=function(e){var t=e.name,n=e.fullName;return t||n?(0,o.Y)(Va,{children:(0,o.Y)($a,{children:(0,o.Y)(Za,{grey:!t&&!n,children:t||n})})}):(0,o.Y)(o.FK,{})};var Xa=(0,S.A)("div",{target:"e1ie5fzr4"})((function(e){return{height:"40px",position:"relative",marginLeft:e.isEditMode?"30px":"28.5px",display:"flex",alignItems:"center",border:e.isEditMode?"none":"1.5px solid ".concat(e.theme.ketcher.outline.color),backgroundColor:e.selected?e.theme.ketcher.color.button.primary.active:e.isEditMode?e.theme.ketcher.color.background.primary:"transparent",borderRadius:e.theme.ketcher.border.radius.regular,boxShadow:e.isEditMode?e.theme.ketcher.shadow.regular:"none",padding:"5px 10px",color:e.selected?"white":"black",gap:"14px",cursor:"pointer",outlineOffset:"1px",boxSizing:"border-box",":hover":{outline:e.theme.ketcher.outline.small},":not(:last-child)":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:e.theme.ketcher.outline.medium,borderBottom:e.theme.ketcher.outline.medium,height:"2px",width:"17px"}},":last-child":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:e.theme.ketcher.outline.medium,borderBottom:e.theme.ketcher.outline.medium,borderRadius:"0 0 0 4px",height:"130px",width:"17px"}}}}),""),Ja=(0,S.A)("div",{target:"e1ie5fzr3"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),el=(0,S.A)("span",{target:"e1ie5fzr2"})((function(e){return{fontSize:e.theme.ketcher.font.size.small}}),""),tl=(0,S.A)("span",{target:"e1ie5fzr1"})((function(e){return{marginTop:"1px",fontSize:e.theme.ketcher.font.size.medium,color:e.selected?"white":e.empty?e.theme.ketcher.color.text.lightgrey:e.theme.ketcher.color.text.primary}}),""),nl=(0,S.A)(k.In,{target:"e1ie5fzr0"})((function(e){return{color:e.empty?"transparent":e.selected?e.theme.ketcher.color.background.primary:e.theme.ketcher.color.icon.grey,stroke:e.selected?e.theme.ketcher.color.background.primary:e.theme.ketcher.color.icon.grey,paddingRight:"sugar"===e.name?"5px":"phosphate"===e.name?"1px":0}}),""),rl=(0,b.A)((0,b.A)((0,b.A)({},Br.SUGARS,"Select sugar"),Br.BASES,"Select base"),Br.PHOSPHATES,"Select phosphate"),ol=(0,b.A)((0,b.A)((0,b.A)({},Br.SUGARS,"Sugar"),Br.BASES,"Base"),Br.PHOSPHATES,"Phosphate"),il=function(e){var t=e.groupName,n=e.iconName,r=e.monomerName,i=e.selected,a=e.onClick,l=e.testid,c=ta(ni);return(0,o.FD)(Xa,{selected:i,onClick:a,empty:!r,isEditMode:c,"data-testid":l,children:[(0,o.Y)(nl,{empty:!r,selected:i,name:n}),(0,o.FD)(Ja,{children:[(0,o.Y)(el,{children:ol[t]}),(0,o.Y)(tl,{empty:!r,selected:i,children:r||(i?rl[t]:"Not selected")})]})]})};var al=(0,S.A)("div",{target:"e18wzlbg7"})((function(e){return{display:"flex",flexDirection:"column",padding:"10px","&.rna-editor-expanded--sequence-edit-mode":{padding:"8px",paddingTop:"10px",border:"2px ".concat(e.theme.ketcher.color.editMode.sequenceInRNABuilder," solid"),borderTop:"none",borderBottomRightRadius:"4px",borderBottomLeftRadius:"4px"}}}),""),ll=(0,S.A)("div",{target:"e18wzlbg6"})({name:"1l5e953",styles:"margin-top:16px;width:100%;display:flex;flex-direction:column;gap:8px"}),cl=(0,S.A)("div",{target:"e18wzlbg5"})({name:"zmhcg5",styles:"margin-top:16px;display:flex;justify-content:space-evenly;align-items:center;gap:8px"}),ul=(0,S.A)(k.$n,{target:"e18wzlbg4"})((function(e){return{width:"100%",whiteSpace:"nowrap",fontSize:e.theme.ketcher.font.size.regular,backgroundColor:e.primary?e.theme.ketcher.color.button.primary.active:void 0,color:e.primary&&!e.disabled?e.theme.ketcher.color.button.text.primary:e.theme.ketcher.color.text.light,outline:e.primary&&!e.disabled?e.theme.ketcher.outline.selected.small:e.theme.ketcher.outline.grey.small}}),""),sl=(0,S.A)("div",{target:"e18wzlbg3"})((function(e){return{position:"relative",borderRadius:e.theme.ketcher.border.radius.regular,backgroundColor:e.theme.ketcher.color.background.primary,boxShadow:e.theme.ketcher.shadow.regular,cursor:"pointer",overflow:"hidden",padding:"0 6px 6px 6px",display:"flex",alignItems:"flex-end",height:"48px",outline:e.selected?e.theme.ketcher.outline.selected.medium:"none",":hover":{outline:e.selected?void 0:e.theme.ketcher.outline.small}}}),""),dl=(0,S.A)("span",{target:"e18wzlbg2"})((function(e){return{position:"absolute",top:"0",left:"0",width:"100%",height:"8px",backgroundColor:e.selected?e.theme.ketcher.outline.selected.color:e.theme.ketcher.outline.color}}),""),fl=(0,S.A)(k.pd,{target:"e18wzlbg1"})({name:"1jdipvd",styles:"width:100%;&:disabled{background:none;outline:none;color:inherit;}"}),pl=(0,S.A)("div",{target:"e18wzlbg0"})({name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"}),hl=function(e){return 0===e.size?"":1===e.size?(0,y.A)(e)[0]:"[multiple]"},ml=function(e){if(null!==e&&void 0!==e&&e.length){for(var t={sugarLabel:new Set,baseLabel:new Set,phosphateLabel:new Set},n=0;n<e.length;n++)for(var r=0,o=["sugarLabel","baseLabel","phosphateLabel"];r<o.length;r++){var i,a,l,c=o[r];(null!==(i=e[n])&&void 0!==i&&i[c]||(null===(a=e[n])||void 0===a||!a[c])&&e[n].type===h.Entities.Nucleoside&&!e[n].isNucleosideConnectedAndSelectedWithPhosphate)&&t[c].add(null===(l=e[n])||void 0===l?void 0:l[c])}return{Sugars:hl(t.sugarLabel),Bases:hl(t.baseLabel),Phosphates:hl(t.phosphateLabel)}}},vl=function(e){e(yi(null)),e(Ai(!1))},gl=function(e){vl(e)},yl=function(e,t){vl(e),e(pi([])),t.events.turnOffSequenceEditInRNABuilderMode.dispatch(),t.mode instanceof h.SequenceMode&&t.mode.turnOffEditMode()},bl=function(e){return e.filter((function(e){return e.type?e.type===h.Entities.Nucleotide||e.type===h.Entities.Nucleoside:!!e.node&&(e.node instanceof h.Nucleotide||e.node instanceof h.Nucleoside)})).length};function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Al=function(e){var t=e.isEditMode,n=e.onDuplicate,l=[{groupName:Br.SUGARS,iconName:"sugar",testId:"rna-builder-slot--sugar"},{groupName:Br.BASES,iconName:"base",testId:"rna-builder-slot--base"},{groupName:Br.PHOSPHATES,iconName:"phosphate",testId:"rna-builder-slot--phosphate"}],c=(0,i.wA)(),u=ta(Zo),s=ta(ai),d=ta(Go),f=ta(Er),p=ta(ui),m=ta(ei),v=(0,a.useState)(u),g=(0,r.A)(v,2),y=g[0],x=g[1],w=ta($o),A=ta(Qo),M=ta(jr),C=(0,a.useState)(!1),k=(0,r.A)(C,2),S=k[0],O=k[1],I=(0,a.useState)(ml(w)),E=(0,r.A)(I,2),j=E[0],P=E[1],D=na()===h.ModeTypes.sequence;(0,a.useEffect)((function(){x(u)}),[u]),(0,a.useEffect)((function(){w&&(1===bl(w)&&c(hi(function(e){var t=ml(e);return"".concat(null===t||void 0===t?void 0:t.Sugars,"(").concat(null===t||void 0===t?void 0:t.Bases,")").concat((null===t||void 0===t?void 0:t.Phosphates)||"")}(w))),P(ml(w)))}),[c,w]),(0,a.useEffect)((function(){if(d!==_o.Presets&&t)if(M&&m){var e=Ko[m.groupName],n="".concat(e,"Label"),r=w.map((function(e){var t,r="baseLabel"===n&&null!==(t=m.groupItem.props)&&void 0!==t&&t.MonomerNaturalAnalogCode?m.groupItem.props.MonomerNaturalAnalogCode:m.groupItem.label;return e.isNucleosideConnectedAndSelectedWithPhosphate&&"phosphateLabel"===n||e.type===h.Entities.Phosphate&&("sugarLabel"===n||"baseLabel"===n)?e:wl(wl({},e),{},(0,b.A)({},n,r))}));O(!0),c(pi(r))}else{var o=function(){if(m){var e=Ko[m.groupName],t=wl(wl({},y),{},(0,b.A)({},e,m.groupItem));return x(t),t}return y}(),i=null===y||void 0===y?void 0:y.name;o.editedName||(i=ri(o)),x(wl(wl({},o),{},{name:i}))}}),[null===m||void 0===m?void 0:m.groupItem,M]);var N,L=function(e){return function(){var n=Jo(y,e);n&&!D&&f.events.selectMonomer.dispatch(n),function(e){if(e===_o.Presets)return Il(null===y||void 0===y?void 0:y.name),void(y&&f.events.selectPreset.dispatch(y));var t=y[Ko[e]];t&&El(ro(t))}(e),c(vi(e)),c(gi({rnaPreset:y,isEditMode:t}))}},F=function(){bl(w)>1?c(Co("updateSequenceInRNABuilder")):(f.events.modifySequenceInRnaBuilder.dispatch(w),yl(c,f))},Y=function(){if(null!==y&&void 0!==y&&y.name){var e=p.find((function(e){return e.name===y.name}));e&&u.nameInList!==e.name?c(Mi(y.name)):(c(bi(y)),c(fi(y)),D||f.events.selectPreset.dispatch(y),setTimeout((function(){Il(y.name)}),0),gl(c))}},T=function(){M?yl(c,f):(x(u),gl(c))},_=function(e){var t,n;return m&&m.groupName===e?m.groupItem.label:(null===(t=Jo(y,e))||void 0===t?void 0:t.label)||(null===(n=Jo(y,e))||void 0===n?void 0:n.props.MonomerName)},z=function(e){return j?j[e]:""};return(0,a.useEffect)((function(){var e=function(e){"Escape"===e.key?(T(),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&(M?F():Y(),e.preventDefault(),e.stopPropagation())};return null===f||void 0===f||f.events.keyDown.add(e),function(){null===f||void 0===f||f.events.keyDown.remove(e)}}),[f,w]),N=s&&!M?(0,o.Y)(ul,{disabled:!ti(y),primary:!0,"data-testid":"add-to-presets-btn",onClick:Y,children:"Add to Presets"}):t?(0,o.Y)(ul,{primary:!0,disabled:!!M&&!S,"data-testid":"save-btn",onClick:M?F:Y,children:M?"Update":"Save"}):(0,o.Y)(ul,{"data-testid":"edit-btn",onClick:function(){c(Ai(!0))},disabled:u.default,children:"Edit"}),(0,o.FD)(al,{"data-testid":"rna-editor-expanded",className:M?"rna-editor-expanded--sequence-edit-mode":"",children:[(0,o.FD)(sl,{selected:d===_o.Presets,onClick:function(){return L(_o.Presets)},children:[t?(0,o.Y)(fl,{value:M?A:null===y||void 0===y?void 0:y.name,placeholder:"Name your structure",disabled:M,onChange:function(e){if(t){var n=e.target.value;x(wl(wl({},y),{},{name:n.trim(),editedName:!0}))}}}):(0,o.Y)(pl,{children:null===y||void 0===y?void 0:y.name}),(0,o.Y)(dl,{selected:d===_o.Presets})]}),(0,o.Y)(ll,{children:l.map((function(e){var t=e.groupName,n=e.iconName,r=e.testId;return(0,o.Y)(il,{selected:d===t,groupName:t,monomerName:M?z(t):_(t),iconName:n,testid:r,onClick:L(t)},t)}))}),(0,o.FD)(cl,{children:[t?(0,o.Y)(ul,{"data-testid":"cancel-btn",onClick:T,children:"Cancel"}):(0,o.Y)(ul,{"data-testid":"duplicate-btn",disabled:!ti(y),onClick:function(){return n(y)},children:"Duplicate and Edit"}),N]})]})};var Ml=(0,S.A)("div",{target:"e1ms1w5g3"})((function(e){return{borderRadius:e.theme.ketcher.border.radius.regular,backgroundColor:"#F7F9FA",boxShadow:e.theme.ketcher.shadow.regular,overflow:"hidden",margin:"12px",flexShrink:0}}),""),Cl=(0,S.A)("div",{target:"e1ms1w5g2"})((function(e){return{height:"32px",backgroundColor:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:"10px",fontSize:e.theme.ketcher.font.size.regular,"&.styled-header--sequence-edit-mode":{backgroundColor:e.theme.ketcher.color.editMode.sequenceInRNABuilder}}}),""),kl=(0,S.A)(k.$n,{target:"e1ms1w5g1"})({name:"nqk7pj",styles:"background:transparent;width:32px;height:100%;outline:none;border-radius:0;padding:0"}),Sl=(0,S.A)(k.In,{target:"e1ms1w5g0"})("height:16px;width:16px;",(function(e){return{transform:e.expanded?"rotate(180deg)":"none"}}),""),Ol=function(e){var t=document.body.querySelector(e);null===t||void 0===t||t.scrollIntoView({behavior:"smooth"})},Il=function(e){Ol('[data-rna-preset-item-name="'.concat(e,'"]'))},El=function(e){Ol('[data-monomer-item-id="'.concat(e,'"]'))},jl=function(e){var t=e.duplicatePreset,n=ta(Zo),i=ta(ni),l=ta(jr),c=ri(n),u=ea(),s=(0,a.useState)(!1),d=(0,r.A)(s,2),f=d[0],p=d[1];(0,a.useEffect)((function(){n?(n.name||i)&&p(!0):(u(wi()),u(vi(_o.Presets)))}),[n]),(0,a.useEffect)((function(){u(gi({rnaPreset:n,isEditMode:i}))}),[i]);return(0,o.FD)(Ml,{"data-testid":"rna-editor",children:[(0,o.FD)(Cl,{className:l?"styled-header--sequence-edit-mode":"",children:["RNA Builder",(0,o.Y)(kl,{onClick:function(){p(!f),null!==n&&void 0!==n&&n.nameInList||u(Ai(!0))},"data-testid":"rna-builder-expand-button",children:(0,o.Y)(Sl,{expanded:f,name:"chevron"})})]}),n?f?(0,o.Y)(Al,{isEditMode:i,onDuplicate:t}):(0,o.Y)(Qa,{name:n.name,fullName:c}):(0,o.Y)(o.FK,{})]})};var Pl=(0,S.A)("div",{target:"e1ocltcl0"})({name:"16fpk5u",styles:"height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between"}),Dl=function(e){var t=e.ketcher;return(0,l.AH)("scrollbar-width:thin;scrollbar-color:",t.color.scroll.regular," ",t.color.scroll.inactive,";&::-webkit-scrollbar{width:4px;height:4px;background-color:",t.color.scroll.inactive,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb{background-color:",t.color.scroll.regular,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb:active{background-color:",t.color.scroll.regular,";}","")},Nl="Modal-module_expandButton__J1QYl";function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yl=(0,S.A)(E.A,{target:"e45wfhi5"})({name:"dzuq2w",styles:".MuiPaper-root{min-width:304px;}"}),Tl=(0,S.A)(j.A,{target:"e45wfhi4"})((function(e){var t=e.theme;return{padding:"2px 4px 2px 12px;",display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:"".concat(t.ketcher.font.family.inter),fontSize:"".concat(t.ketcher.font.size.medium),fontWeight:500,textTransform:"capitalize",borderBottom:"1px solid rgba(202, 211, 221, 1)"}}),""),_l=(0,S.A)("div",{target:"e45wfhi3"})({name:"10by1a4",styles:"margin-right:10px;font-size:14px"}),zl=(0,S.A)(k.In,{target:"e45wfhi2"})({name:"4jxctt",styles:"width:16px;height:16px;color:rgba(51, 51, 51, 1)"}),Bl=(0,S.A)(P.A,{target:"e45wfhi1"})("padding:0;font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";line-height:17px;color:#000000;",(function(e){var t=e.theme;return Dl(t)}),";"),Rl=(0,S.A)(D.A,{target:"e45wfhi0"})("height:52px;margin:0;padding:0 12px;border-top:",(function(e){var t=e.theme;return"true"===e.withborder?t.ketcher.border.small:"none"}),";justify-content:flex-end;.MuiButtonBase-root{border-radius:4px;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";}"),ql=function(e){var t=e.children,n=e.title,r=e.isOpen,i=e.showCloseButton,l=void 0===i||i,u=e.showExpandButton,s=void 0!==u&&u,d=e.onClose,f=e.className,p=e.modalWidth,h=e.expanded,m=void 0!==h&&h,v=e.setExpanded,g=void 0===v?ua:v,y=(0,c.u)(),b=(0,a.useMemo)((function(){return{style:Fl({background:y.ketcher.color.background.primary,borderRadius:"8px",color:y.ketcher.color.text.primary},s&&{margin:"auto",width:m?"100%":p,height:m?"100%":void 0,maxWidth:"calc(min(1280px, 100%))",maxHeight:"calc(min(980px, 100%))"})}}),[y.ketcher.color.text.primary,y.ketcher.color.background.canvas,m]),x=(0,a.useMemo)((function(){return{style:{background:y.ketcher.color.background.overlay,opacity:.4}}}),[y.ketcher.color.background.overlay]),w={Content:null,Footer:null};return a.Children.forEach(t,(function(e){e.type===Bl?w.Content=e:e.type===Rl&&(w.Footer=e)})),(0,o.FD)(Yl,{BackdropProps:x,PaperProps:b,open:r,onClose:d,container:document.querySelector(k.tS),disableEscapeKeyDown:!l,className:f,sx:{padding:"24px"},children:[n||l||s?(0,o.FD)(Tl,{children:[(0,o.Y)(_l,{children:n}),(0,o.FD)("span",{children:[s&&(0,o.Y)(N.A,{title:"expand window",className:Nl,onClick:function(){g(!m)},children:(0,o.Y)(zl,{name:m?"minimize-expansion":"expand"})}),l&&(0,o.Y)(N.A,{title:"Close window",onClick:d,children:(0,o.Y)(zl,{name:"close"})})]})]}):"",w.Content,w.Footer]})};ql.Content=Bl,ql.Footer=Rl;var Hl=function(e){var t=e.libraryName,n=e.duplicatePreset,r=e.editPreset,i=ea(),a=ta(oi),l=ta(ii),c=function(){a.length>0&&i(Mi("")),l.length>0&&i(Ci(""))};return(0,o.FD)(Pl,{children:[(0,o.Y)(jl,{duplicatePreset:n}),(0,o.Y)(Ga,{libraryName:t,duplicatePreset:n,editPreset:r}),(0,o.FD)(ql,{isOpen:!!a||!!l,title:"Error Message",onClose:c,children:[(0,o.Y)(ql.Content,{children:(0,o.FD)("div",{style:{padding:"12px"},children:[a&&'Preset with name "'.concat(a,'" already exists. Please choose another name.'),l&&'Preset with name "'.concat(l,"\" can't be used. Because it is impossible to establish bonds between monomers. Edit it's structure or choose another one.")]})}),(0,o.Y)(ql.Footer,{children:(0,o.Y)(qa,{onClick:c,children:"Close"})})]})]})},Ul=function(e,t){return[{caption:"Favorites",component:Ta,testId:"FAVORITES-TAB",props:{libraryName:qr,duplicatePreset:e,editPreset:t}},{caption:"Peptides",component:Ta,testId:"PEPTIDES-TAB",props:{libraryName:Hr}},{caption:"RNA",testId:"RNA-TAB",component:Hl,props:{libraryName:Kr,duplicatePreset:e,editPreset:t}},{caption:"CHEM",component:Ta,testId:"CHEM-TAB",props:{libraryName:Ur}}]};function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gl="_Copy",Vl=function(){var e=(0,a.useRef)([]),t=ea();(0,a.useEffect)((function(){t(go(""))}),[t]),ta(ui,(function(t){return e.current=t,!0}));return(0,o.FD)(zi,{"data-testid":"monomer-library",children:[(0,o.FD)(Ri,{children:[(0,o.Y)(Bi,{children:"Library"}),(0,o.Y)(qi,{children:(0,o.FD)("div",{children:[(0,o.Y)("span",{children:(0,o.Y)(k.In,{name:"search"})}),(0,o.Y)(_i,{type:"search","data-testid":"monomer-library-input",onChange:function(e){t(go(e.target.value))},placeholder:"Search by name..."})]})})]}),(0,o.Y)(ca,{tabs:Ul((function(n){var r,o="".concat(null===n||void 0===n?void 0:n.name).concat(Gl);do{r=e.current.find((function(e){return e.name===o})),r&&(o+=Gl)}while(r);if(r)t(Mi(o));else{var i=r?"".concat(o,"_Copy"):o,a=Wl(Wl({},n),{},{name:i,nameInList:i,default:!1,favorite:!1});t(fi(a)),t(Ai(!0)),Il(null===n||void 0===n?void 0:n.name)}}),(function(e){t(fi(e)),t(Ai(!0))}))})]})},Zl=(0,S.A)("div",{target:"emj253a0"})((function(e){var t=e.theme;return{margin:0,fontSize:t.ketcher.font.size.regular,color:t.ketcher.color.text.secondary,position:"absolute",cursor:"pointer",top:"calc(8px + 12px)",right:"calc(4px + 12px)",visibility:"visible",opacity:1,whiteSpace:"nowrap",display:"flex",lineHeight:1,padding:"5px 8px",borderRadius:"4px",userSelect:"none","& > span":{display:"flex",justifyContent:"center",alignItems:"center","&.icon":{marginRight:"2px"}},"&.hidden":{backgroundColor:t.ketcher.color.button.primary.active,color:t.ketcher.color.button.text.primary}}}),""),$l=function(e){var t=e.isHidden,n=e.onClick;return(0,o.FD)(Zl,{className:t?"hidden":"",onClick:n,children:[(0,o.Y)("span",{className:"icon",children:t?(0,o.Y)(k.In,{name:"arrows-left"}):(0,o.Y)(k.In,{name:"arrows-right"})}),(0,o.Y)("span",{children:t?"Show Library":"Hide"})]})},Ql=(0,S.A)("div",{target:"e10ckbgw0"})("display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:40px;height:12px;margin-top:10px;& span{display:inline-block;width:8px;height:8px;border:2px solid ",(function(e){return e.theme.ketcher.color.spinner}),";border-radius:100%;box-sizing:border-box;&:nth-of-type(1){animation:bounce 1s ease-in-out infinite;}&:nth-of-type(2){animation:bounce 1s ease-in-out 0.33s infinite;}&:nth-of-type(3){animation:bounce 1s ease-in-out 0.66s infinite;}}@keyframes bounce{0%,75%,100%{-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);}25%{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);}}"),Xl=function(){return(0,o.FD)(Ql,{className:"loading-spinner",children:[(0,o.Y)("span",{}),(0,o.Y)("span",{}),(0,o.Y)("span",{})]})};var Jl=(0,S.A)("div",{target:"ep0evuw1"})({name:"1btsn9l",styles:"width:410px;min-height:23em;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center"}),ec=(0,S.A)("div",{target:"ep0evuw0"})({name:"vbftiw",styles:"display:flex;flex-direction:row;align-items:center;svg{margin-right:13px;}p{color:#585858;font-size:16px;line-height:19px;}"}),tc=function(e){var t=e.fileName;return(0,o.FD)(Jl,{children:[t&&(0,o.FD)(ec,{children:[(0,o.Y)(k.In,{name:"file-thumbnail"}),(0,o.Y)("p",{children:t})]}),(0,o.Y)(Xl,{})]})},nc=["textLabel","iconName","disabled","disabledText"];function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ic={width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between"},ac=(0,S.A)(k.In,{target:"erk2iw51"})("filter:",(function(e){return e.disabled?"grayscale(1)":""}),";opacity:",(function(e){return e.disabled?"0.6":"1"}),";"),lc={backgroundColor:"#F8FEFFFF"},cc=(0,S.A)("div",{target:"erk2iw50"})("display:flex;flex-direction:column;align-items:center;&>span{font-size:",(function(e){return e.theme.ketcher.font.size.small}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";opacity:50%;}&>svg{margin-bottom:8px;}"),uc=function(e){var t=e.textLabel,n=e.iconName,r=e.disabled,i=e.disabledText,l=(0,V.A)(e,nc),c=(0,Z.VB)(oc({multiple:!1,noClick:!0,disabled:r},l)),u=c.getRootProps,s=c.getInputProps,d=c.isDragActive,f=c.open,p=(0,a.useMemo)((function(){return oc(oc({},ic),d?lc:{})}),[d]);return(0,o.FD)("div",oc(oc({},u({style:p})),{},{onClick:f,children:[(0,o.Y)("input",oc({},s())),(0,o.Y)(ac,{name:n,disabled:r}),r?(0,o.Y)(hc,{children:i}):(0,o.FD)(o.FK,{children:[(0,o.Y)(cc,{children:t&&(0,o.Y)("span",{children:t})}),(0,o.Y)(pc,{children:"Open from file"})]})]}))};var sc="open-window-paste-icon",dc="open-window-upload-icon",fc="image-frame",pc=(0,S.A)("p",{target:"e1035cyz3"})("font-size:10px;text-transform:uppercase;color:",(function(e){return e.theme.ketcher.color.text.light}),";margin:0;text-align:center;line-height:12px;"),hc=(0,S.A)("p",{target:"e1035cyz2"})("font-size:10px;margin:0;text-align:center;color:",(function(e){return e.theme.ketcher.color.text.primary}),";opacity:50%;line-height:12px;"),mc=(0,S.A)("div",{target:"e1035cyz1"})({name:"h9hj7s",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;margin-bottom:20px;&>*{margin-right:18px;}& :last-child{margin-right:0;}"}),vc=(0,S.A)("div",{target:"e1035cyz0"})("width:128px;height:134px;box-shadow:0 4px 12px rgba(103, 104, 132, 0.18);padding:16px;border-radius:12px;flex:1;display:flex;flex-direction:column;justify-content:space-between;align-items:center;box-sizing:border-box;position:relative;cursor:pointer;&>p{margin-top:6px;text-align:center;}svg{fill:",(function(e){return e.theme.ketcher.color.button.primary.active}),";}"),gc=function(e){var t=e.selectClipboard,n=e.fileLoadHandler,r=e.errorHandler;return(0,o.FD)(mc,{children:[(0,o.FD)(vc,{"data-testid":"paste-from-clipboard-button",onClick:t,children:[(0,o.Y)(k.In,{name:sc}),(0,o.Y)(pc,{children:"Paste from clipboard"})]}),(0,o.Y)(vc,{children:(0,o.Y)(uc,{onDropAccepted:n,onDropRejected:function(e){return r("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:dc})}),(0,o.Y)(vc,{children:(0,o.Y)(uc,{accept:"image/*",onDropAccepted:n,onDropRejected:function(e){return r("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from image",textLabel:"or drag file here",iconName:fc,disabled:!0,disabledText:"Image Recognition service is not available"})})]})},yc=(0,S.A)("textarea",{target:"e1q335jk0"})("min-width:430px;padding:12px;width:100%;height:100%;overflow:auto;white-space:pre-wrap;resize:none;box-sizing:border-box;outline:transparent;border:none;color:",(function(e){return e.theme.ketcher.color.input.text.active}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";background-color:",(function(e){var t=e.theme;return e.readOnly?t.ketcher.color.input.background.disabled:t.ketcher.color.input.background.primary}),";",(function(e){var t=e.theme;return Dl(t)}),";"),bc=function(e){var t=e.value,n=e.inputHandler,r=e.readonly,i=void 0!==r&&r,l=e.selectOnInit,c=void 0!==l&&l,u=e.className,s=e.testId,d=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e;c&&(null===(e=d.current)||void 0===e||e.select())}),[d,t,c]),(0,o.Y)(yc,{value:t,readOnly:i,onChange:n&&function(e){return n(e.target.value)},ref:d,className:u,"data-testid":s})};function xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ac=(0,S.A)(bc,{target:"e17hogtk0"})({name:"17fmpnb",styles:"width:100%;height:320px"}),Mc=function(e){if(e.isAnalyzingFile)return(0,o.Y)(tc,{fileName:e.fileName});switch(e.currentState){case e.states.openOptions:return(0,o.Y)(gc,wc({},e));case e.states.textEditor:return(0,o.Y)(Ac,wc({testId:"open-structure-textarea"},e));default:return null}},Cc=["label","clickHandler","children","styleType"];function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oc={name:"zlt300",styles:"padding:5px 8px;border-radius:2px;text-transform:none;line-height:14px;font-size:12px;text-align:center;&.MuiButtonBase-root{width:unset;min-width:70px;}"},Ic=(0,S.A)($.A,{target:"ejign8b1"})((function(e){var t=e.theme;return{backgroundColor:t.ketcher.color.button.primary.active,border:"1px solid ".concat(t.ketcher.color.button.primary.active),color:"rgb(245, 245, 245)",fontWeight:t.ketcher.font.weight.regular,width:"62px",height:"24px","&:hover":{backgroundColor:t.ketcher.color.button.primary.hover},"&:disabled":{background:t.ketcher.color.button.primary.disabled,border:"1px solid transparent",opacity:.4}}}),Oc,""),Ec=(0,S.A)($.A,{target:"ejign8b0"})((function(e){var t=e.theme;return{backgroundColor:"transparent",border:"1px solid ".concat(t.ketcher.color.button.secondary.active),color:t.ketcher.color.button.secondary.active,fontWeight:t.ketcher.font.weight.regular,width:"72px",height:"24px","&:hover":{border:"1px solid ".concat(t.ketcher.color.button.secondary.hover),color:t.ketcher.color.button.secondary.hover},"&:disabled":{border:"1px solid ".concat(t.ketcher.color.button.secondary.disabled),color:t.ketcher.color.button.secondary.disabled},"&:clicked":{border:"1px solid ".concat(t.ketcher.color.button.secondary.clicked),color:t.ketcher.color.button.secondary.clicked}}}),Oc,""),jc=function(e){var t=e.label,n=e.clickHandler,r=e.children,i=e.styleType,a=(0,V.A)(e,Cc);return"secondary"===i?(0,o.Y)(Ec,Sc(Sc({onClick:n,title:a.title||t,role:"button"},a),{},{children:r||t})):(0,o.Y)(Ic,Sc(Sc({onClick:n,title:a.title||t,role:"button"},a),{},{children:r||t}))};function Pc(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var n=r.result;e.msClose&&e.msClose(),t(n)},r.onerror=function(e){n(e)},r.readAsText(e,"UTF-8")}))}var Dc=(0,S.A)("div",{target:"efvrr8x1"})("position:relative;padding:",(function(e){return e.currentState===mu.openOptions?"10px 12px":"0"}),";");(0,S.A)(jc,{target:"efvrr8x0"})({name:"1tx1l5v",styles:"margin-right:auto"}),(0,S.A)(k.In,{target:"e23iben1"})({name:"1ux2zfx",styles:"fill:#343434"});var Nc=(0,S.A)(k.In,{target:"e23iben0"})({name:"wpnrak",styles:"user-select:none;width:16px;height:1em;display:inline-block;flex-shrink:0;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - 0.5em);pointer-events:none;fill:#5b6077"}),Lc=function(e){var t=e.className;return(0,o.Y)(Nc,{name:"chevron",className:t})};function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tc=(0,S.A)(L.A,{target:"e944g1i2"})({name:"1pt8ucq",styles:"width:100%;padding:0 8px;& label{font-size:12px;line-height:unset;}"}),_c={name:"af34ib",styles:"background-color:white;border-bottom-left-radius:0;border-bottom-right-radius:0"},zc=(0,S.A)(F.A,{target:"e944g1i1"})("height:24px;border:1px solid #5b6077;border-radius:4px;font-size:14px;",(function(e){return e.open&&_c})," & .MuiSelect-select{padding:0 24px 0 8px;height:100%;}& span{",(function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.medium)}),";}& .MuiOutlinedInput-notchedOutline{border:0;}"),Bc={width:"120px",backgroundColor:"white",border:"1px solid #5B6077",borderTopWidth:"0",borderRadius:"0px 0px 2px 2px",boxShadow:"0 6px 10px rgba(103, 104, 132, 0.15)"},Rc=(0,S.A)(Y.A,{target:"e944g1i0"})("display:flex;flex-direction:row;justify-content:space-between;padding:0 8px;height:28px;font-size:14px;&.MuiButtonBase-root:hover{border-left:2px solid #167782;}& .MuiTypography-root{",(function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.medium)}),";}");var qc=(0,S.A)("form",{target:"el6v3ot5"})({name:"9pd72t",styles:"display:flex;flex-direction:column;height:300px"}),Hc=(0,S.A)("div",{target:"el6v3ot4"})({name:"itz7qk",styles:"display:flex;justify-content:space-between;margin-bottom:16px"}),Uc=(0,S.A)((function(e){var t=e.options,n=e.currentSelection,i=e.selectionHandler,l=e.className,c=e.label,u=e.testId,s=e.customStylesForExpanded,d=void 0===s?{}:s,f=e.disabled,p=void 0!==f&&f,h=(0,a.useState)(!1),m=(0,r.A)(h,2),v=m[0],g=m[1];return(0,o.FD)(Tc,{className:l,children:[c&&(0,o.Y)("label",{htmlFor:"fileformat",children:"File format:"}),(0,o.Y)(zc,{value:n,onChange:function(e){i(e.target.value)},open:v,onOpen:function(e){"keydown"!==e.type&&g(!0)},onClose:function(){g(!1)},renderValue:function(e){var n=t.filter((function(t){return t.id===e}))[0];return(0,o.Y)("span",{children:n.label})},IconComponent:Lc,disabled:p,fullWidth:!0,"data-testid":u||"dropdown-select",MenuProps:{PaperProps:{style:Yc(Yc({},Bc),d)},MenuListProps:{style:{padding:"0"}}},children:t.map((function(e){return(0,o.Y)(Rc,{value:e.id,children:(0,o.Y)(T.A,{primary:e.label})},e.id)}))})]})}),{target:"el6v3ot3"})((function(e){var t=e.theme;return{width:"calc(50% - 6px)",height:"28px","& .MuiOutlinedInput-root:hover:not(.Mui-disabled)":{border:"1px solid ".concat(t.ketcher.color.input.border.hover)},"& .MuiOutlinedInput-root":{border:"1px solid ".concat(t.ketcher.color.input.border.regular),backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary,fontFamily:t.ketcher.font.family.inter}}}),""),Kc={border:"none"},Wc=(0,S.A)("div",{target:"el6v3ot2"})({name:"kq43v2",styles:"position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff"}),Gc=(0,S.A)("div",{target:"el6v3ot1"})((function(e){var t=e.theme;return{height:"100%",position:"relative",border:"1px solid ".concat(t.ketcher.color.input.border.regular)}}),""),Vc=(0,S.A)("div",{target:"el6v3ot0"})((function(e){var t=e.theme;return{display:"flex",flexGrow:1,position:"relative","& button":{opacity:0,position:"absolute",right:"12px",top:"12px",borderRadius:"4px",padding:"2px",width:"28px",height:"28px","&:not(:active)":{backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary}},"&:hover button":{opacity:1},"&:focus-within button":{opacity:0},"&:focus-within button:hover":{opacity:1}}}),"");var Zc=(0,S.A)(ql,{target:"e1oaegu38"})((function(e){var t=e.modalWidth;return"\n    .MuiPaper-root {\n      width: ".concat(t,";\n      max-width: ").concat(t,";\n    }")}),""),$c=(0,S.A)("div",{target:"e1oaegu37"})({name:"kj5rtd",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center"}),Qc=(0,S.A)("div",{target:"e1oaegu36"})({name:"rpuipy",styles:"display:flex;height:24px;font-size:12px"}),Xc=(0,S.A)(Uc,{target:"e1oaegu35"})({name:"7nflbq",styles:"padding:0;font-size:12px;& .MuiSelect-select{display:flex;align-items:center;padding:0 20px 0 8px;padding-right:20px !important;height:100%;}& span{font-size:12px;}"}),Jc=(0,S.A)(Xc,{target:"e1oaegu34"})((function(){return{width:"140px"}}),""),eu=(0,S.A)(Xc,{target:"e1oaegu33"})({name:"16zm0c",styles:"width:76px;margin-left:8px"}),tu=(0,S.A)(Xc,{target:"e1oaegu32"})({name:"l4tg7k",styles:"width:105px;margin-left:8px"}),nu=(0,S.A)("div",{target:"e1oaegu31"})({name:"oq6u0f",styles:"display:flex;gap:10px"}),ru=(0,S.A)(jc,{target:"e1oaegu30"})({name:"b9l38d",styles:"width:min-content"}),ou="ket",iu="seq",au="rna",lu="peptide",cu="fasta",uu="one-letter",su="three-letter",du=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"seq",label:"Sequence"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"helm",label:"HELM"}],fu=[{id:au,label:"RNA"},{id:"dna",label:"DNA"},{id:lu,label:"Peptide"}],pu=[{id:uu,label:"1-letter code"},{id:su,label:"3-letter code"}],hu=h.macromoleculesFilesInputFormats,mu={openOptions:"openOptions",textEditor:"textEditor"},vu=function(e){var t=e.ketSerializer,n=e.editor,r=e.struct,o=!n.drawingEntitiesManager.hasDrawingEntities,i=t.deserializeToDrawingEntities(r);if(!i)throw new Error("Error during parsing file");i.drawingEntitiesManager.centerMacroStructure();var a=i.drawingEntitiesManager.mergeInto(n.drawingEntitiesManager).command,l=new h.EditorHistory(n),c=n.mode instanceof h.SequenceMode,u=n.mode instanceof h.SnakeMode;n.mode instanceof h.FlexMode&&(n.drawingEntitiesManager.recalculateAntisenseChains(),n.drawingEntitiesManager.hasAntisenseChains&&(a.merge(n.drawingEntitiesManager.applySnakeLayout(n.canvas.width.baseVal.value,!0,!0,!0)),a.setUndoOperationsByPriority())),n.drawingEntitiesManager.detectBondsOverlappedByMonomers(),n.renderersContainer.update(a),l.update(a),c&&(a.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:h.ModeTypes.sequence,mergeWithLatestHistoryCommand:!0})),u&&(a.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:h.ModeTypes.snake,mergeWithLatestHistoryCommand:!0})),o&&n.zoomToStructuresIfNeeded()},gu=function(){var e=(0,G.A)(v().mark((function e(t){var n,r,o,i,a,l,c,u,s,d,f,p,m,g,y,b,x,w;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.struct,r=t.formatSelection,o=t.additionalSelection,i=t.peptideLettersFormatSelection,a=t.onCloseCallback,l=t.setIsLoading,c=t.dispatch,u=r===ou,s=r===iu,d=r===cu,f=new h.KetSerializer,p=h.CoreEditor.provideEditorInstance(),g=n,y=function(e){c(Io({errorMessage:"Convert error! "+e,errorTitle:s||d?"Unsupported symbols":""}))},!u){e.next=13;break}try{vu({struct:n,ketSerializer:f,editor:p}),a()}catch(v){y("Error during file parsing.")}return e.abrupt("return");case 13:d||s&&i!==su?(m=hu[r][o],g=g.toUpperCase()):m=s&&i===su?hu.seq.peptide3Letter:hu[r];case 14:return b=k.e3.getIndigo(),e.prev=15,l(!0),e.next=19,b.convert({struct:g,output_format:h.ChemicalMimeType.KET,input_format:m});case 19:x=e.sent,vu({struct:x.struct,ketSerializer:f,editor:p}),a(),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),w="string"===typeof e.t0?e.t0:JSON.stringify(e.t0),y(w),h.KetcherLogger.error(e.t0);case 29:return e.prev=29,l(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[15,24,29,32]])})));return function(t){return e.apply(this,arguments)}}(),yu=function(e){},bu=["value","id","onChange","label"];function xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Au,Mu=(0,S.A)("label",{target:"e10m4n7r1"})((function(e){return{display:"flex",flexDirection:"column",marginRight:"8px",color:e.theme.ketcher.color.text.primary,fontSize:"12px"}}),""),Cu=(0,S.A)("input",{target:"e10m4n7r0"})((function(e){var t=e.theme;return{height:"24px",padding:"3px 7px",border:"1px solid ".concat(t.ketcher.color.input.border.regular),fontSize:"14px",borderRadius:"4px",backgroundColor:t.ketcher.color.input.background.primary,color:t.ketcher.color.text.primary,outline:"transparent",width:"164px",letterSpacing:"normal","&:active, &:focus":{color:t.ketcher.color.input.text.active},"&:hover":{border:"1px solid ".concat(t.ketcher.color.input.border.hover)}}}),""),ku=function(e){var t=e.value,n=e.id,r=e.onChange,i=e.label,a=(0,V.A)(e,bu);return(0,o.Y)(o.FK,{children:(0,o.FD)(Mu,{htmlFor:n,children:[i&&(0,o.Y)("span",{children:i}),(0,o.Y)(Cu,wu({type:"text",id:n,value:t,onChange:function(e){r(e.target.value)}},a))]})})};!function(e){e.Ket="chemical/x-ket",e.Mol="chemical/x-mdl-molfile",e.HELM="chemincal/x-helm",e.Fasta="chemical/x-fasta",e.Sequence="chemical/x-sequence",e.Idt="chemical/x-idt",e.Svg="image/svg+xml"}(Au||(Au={}));var Su=(0,w.A)((function e(t,n,r,o,i){(0,x.A)(this,e),this.name=t,this.mime=n,this.extensions=r,this.supportsCoords=o||!1,this.options=i||{}})),Ou={ket:new Su("Ket file",Au.Ket,[".ket"],!0,{}),mol:new Su("MDL Molfile V3000",Au.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),fasta:new Su("FASTA",Au.Fasta,[".fasta"],!1,{}),sequence:new Su("SEQUENCE",Au.Sequence,[".seq"],!1,{}),"sequence-3-letter":new Su("SEQUENCE (3-letter code)",Au.Sequence,[".seq"],!1,{}),idt:new Su("IDT",Au.Idt,[".idt"],!1,{}),helm:new Su("HELM",Au.HELM,[".helm"]),svg:new Su("SVG Document",Au.Svg,[".svg"])},Iu=function(e){return Ou[e]};var Eu=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"sequence",label:"Sequence (1-letter code)"},{id:"sequence-3-letter",label:"Sequence (3-letter code)"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"svg",label:"SVG Document"},{id:"helm",label:"HELM"}],ju={mol:h.ChemicalMimeType.Mol,fasta:h.ChemicalMimeType.FASTA,sequence:h.ChemicalMimeType.SEQUENCE,"sequence-3-letter":h.ChemicalMimeType.PeptideSequenceThreeLetter,idt:h.ChemicalMimeType.IDT,helm:h.ChemicalMimeType.HELM},Pu=(0,S.A)(ql,{target:"e12csxs60"})({name:"krpfk5",styles:"& div.MuiPaper-root{background:white;min-height:400px;min-width:430px;}& .MuiDialogContent-root{overflow:hidden;height:100%;}"}),Du=(0,S.A)(jc,{target:"e1kgbmg80"})((function(){return{width:"72px"}}),"");var Nu=(0,S.A)("div",{target:"e11sfr0q0"})({name:"606i4c",styles:"padding:12px"});var Lu=(0,S.A)("div",{target:"e1wvbgsi0"})({name:"606i4c",styles:"padding:12px"}),Fu=(0,S.A)("div",{target:"e1tvvbc92"})((function(){return{display:"flex",flexDirection:"column",rowGap:"2px",alignItems:"center",marginBottom:"5px"}}),""),Yu=(0,S.A)("span",{target:"e1tvvbc91"})((function(e){return{margin:0,padding:0,textAlign:"center",display:"block",font:e.theme.ketcher.font.family.inter,fontSize:e.theme.ketcher.font.size.small,fontWeight:e.theme.ketcher.font.weight.regular,color:e.disabled?"rgba(180, 185, 214, 1)":e.theme.ketcher.color.text.light}}),""),Tu=(0,S.A)("div",{target:"e1tvvbc90"})((function(){return{height:"100%"}}),""),_u=function(e){return"O"===e?"OH":e};var zu=(0,S.A)(k.c9,{target:"e1huhxto1"})((function(e){var t=e.theme,n=e.isExpanded;return{display:"flex",border:"1.5px solid ".concat(t.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:n?"auto":"150px",width:n?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}}),""),Bu=(0,S.A)("div",{target:"e1huhxto0"})({name:"wfzm1y",styles:"display:flex;flex-wrap:wrap;justify-content:center;align-self:flex-start;width:100%;gap:7px"});var Ru=(0,S.A)("div",{target:"e8i5wzj0"})({name:"2oefzz",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding:8px;color:#7c7c7f;border:1px solid #cad3dd;width:100%;height:100%"}),qu=function(){return(0,o.FD)(Ru,{children:[(0,o.Y)(k.In,{name:"questionMark"}),"Unknown structure"]})},Hu={value:()=>{}};function Uu(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Ku(r)}function Ku(e){this._=e}function Wu(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function Gu(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Hu,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Ku.prototype=Uu.prototype={constructor:Ku,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=i[a]).type)o[n]=Gu(o[n],e.name,t);else if(null==t)for(n in o)o[n]=Gu(o[n],e.name,null);return this}for(;++a<l;)if((n=(e=i[a]).type)&&(n=Wu(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ku(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var Vu="http://www.w3.org/1999/xhtml",Zu={svg:"http://www.w3.org/2000/svg",xhtml:Vu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $u(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Zu.hasOwnProperty(t)?{space:Zu[t],local:e}:e}function Qu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vu&&t.documentElement.namespaceURI===Vu?t.createElement(e):t.createElementNS(n,e)}}function Xu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ju(e){var t=$u(e);return(t.local?Xu:Qu)(t)}function es(){}function ts(e){return null==e?es:function(){return this.querySelector(e)}}function ns(){return[]}function rs(e){return null==e?ns:function(){return this.querySelectorAll(e)}}function os(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function is(e){return function(){return this.matches(e)}}function as(e){return function(t){return t.matches(e)}}var ls=Array.prototype.find;function cs(){return this.firstElementChild}var us=Array.prototype.filter;function ss(){return Array.from(this.children)}function ds(e){return new Array(e.length)}function fs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function ps(e,t,n,r,o,i){for(var a,l=0,c=t.length,u=i.length;l<u;++l)(a=t[l])?(a.__data__=i[l],r[l]=a):n[l]=new fs(e,i[l]);for(;l<c;++l)(a=t[l])&&(o[l]=a)}function hs(e,t,n,r,o,i,a){var l,c,u,s=new Map,d=t.length,f=i.length,p=new Array(d);for(l=0;l<d;++l)(c=t[l])&&(p[l]=u=a.call(c,c.__data__,l,t)+"",s.has(u)?o[l]=c:s.set(u,c));for(l=0;l<f;++l)u=a.call(e,i[l],l,i)+"",(c=s.get(u))?(r[l]=c,c.__data__=i[l],s.delete(u)):n[l]=new fs(e,i[l]);for(l=0;l<d;++l)(c=t[l])&&s.get(p[l])===c&&(o[l]=c)}function ms(e){return e.__data__}function vs(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function gs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ys(e){return function(){this.removeAttribute(e)}}function bs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xs(e,t){return function(){this.setAttribute(e,t)}}function ws(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function As(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ms(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Cs(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ks(e){return function(){this.style.removeProperty(e)}}function Ss(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Os(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Is(e,t){return e.style.getPropertyValue(t)||Cs(e).getComputedStyle(e,null).getPropertyValue(t)}function Es(e){return function(){delete this[e]}}function js(e,t){return function(){this[e]=t}}function Ps(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ds(e){return e.trim().split(/^|\s+/)}function Ns(e){return e.classList||new Ls(e)}function Ls(e){this._node=e,this._names=Ds(e.getAttribute("class")||"")}function Fs(e,t){for(var n=Ns(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Ys(e,t){for(var n=Ns(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Ts(e){return function(){Fs(this,e)}}function _s(e){return function(){Ys(this,e)}}function zs(e,t){return function(){(t.apply(this,arguments)?Fs:Ys)(this,e)}}function Bs(){this.textContent=""}function Rs(e){return function(){this.textContent=e}}function qs(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Hs(){this.innerHTML=""}function Us(e){return function(){this.innerHTML=e}}function Ks(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ws(){this.nextSibling&&this.parentNode.appendChild(this)}function Gs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vs(){return null}function Zs(){var e=this.parentNode;e&&e.removeChild(this)}function $s(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xs(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Js(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ed(e,t,n){var r=Cs(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function td(e,t){return function(){return ed(this,e,t)}}function nd(e,t){return function(){return ed(this,e,t.apply(this,arguments))}}fs.prototype={constructor:fs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Ls.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var rd=[null];function od(e,t){this._groups=e,this._parents=t}function id(){return new od([[document.documentElement]],rd)}function ad(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ld(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cd(){}od.prototype=id.prototype={constructor:od,select:function(e){"function"!==typeof e&&(e=ts(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,l=t[o],c=l.length,u=r[o]=new Array(c),s=0;s<c;++s)(i=l[s])&&(a=e.call(i,i.__data__,s,l))&&("__data__"in i&&(a.__data__=i.__data__),u[s]=a);return new od(r,this._parents)},selectAll:function(e){e="function"===typeof e?os(e):rs(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,l=t[i],c=l.length,u=0;u<c;++u)(a=l[u])&&(r.push(e.call(a,a.__data__,u,l)),o.push(a));return new od(r,o)},selectChild:function(e){return this.select(null==e?cs:function(e){return function(){return ls.call(this.children,e)}}("function"===typeof e?e:as(e)))},selectChildren:function(e){return this.selectAll(null==e?ss:function(e){return function(){return us.call(this.children,e)}}("function"===typeof e?e:as(e)))},filter:function(e){"function"!==typeof e&&(e=is(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],l=a.length,c=r[o]=[],u=0;u<l;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&c.push(i);return new od(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,ms);var n=t?hs:ps,r=this._parents,o=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,a=new Array(i),l=new Array(i),c=new Array(i),u=0;u<i;++u){var s=r[u],d=o[u],f=d.length,p=vs(e.call(s,s&&s.__data__,u,r)),h=p.length,m=l[u]=new Array(h),v=a[u]=new Array(h);n(s,d,m,v,c[u]=new Array(f),p,t);for(var g,y,b=0,x=0;b<h;++b)if(g=m[b]){for(b>=x&&(x=b+1);!(y=v[x])&&++x<h;);g._next=y||null}}return(a=new od(a,r))._enter=l,a._exit=c,a},enter:function(){return new od(this._enter||this._groups.map(ds),this._parents)},exit:function(){return new od(this._exit||this._groups.map(ds),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),l=new Array(o),c=0;c<a;++c)for(var u,s=n[c],d=r[c],f=s.length,p=l[c]=new Array(f),h=0;h<f;++h)(u=s[h]||d[h])&&(p[h]=u);for(;c<o;++c)l[c]=n[c];return new od(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=gs);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,l=n[i],c=l.length,u=o[i]=new Array(c),s=0;s<c;++s)(a=l[s])&&(u[s]=a);u.sort(t)}return new od(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,l=i.length;a<l;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=$u(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?bs:ys:"function"===typeof t?n.local?Ms:As:n.local?ws:xs)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ks:"function"===typeof t?Os:Ss)(e,t,null==n?"":n)):Is(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Es:"function"===typeof t?Ps:js)(e,t)):this.node()[e]},classed:function(e,t){var n=Ds(e+"");if(arguments.length<2){for(var r=Ns(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?zs:t?Ts:_s)(n,t))},text:function(e){return arguments.length?this.each(null==e?Bs:("function"===typeof e?qs:Rs)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Hs:("function"===typeof e?Ks:Us)(e)):this.node().innerHTML},raise:function(){return this.each(Ws)},lower:function(){return this.each(Gs)},append:function(e){var t="function"===typeof e?e:Ju(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:Ju(e),r=null==t?Vs:"function"===typeof t?t:ts(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Zs)},clone:function(e){return this.select(e?Qs:$s)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?Js:Xs,r=0;r<a;++r)this.each(l(i[r],t,n));return this}var l=this.node().__on;if(l)for(var c,u=0,s=l.length;u<s;++u)for(r=0,c=l[u];r<a;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"===typeof t?nd:td)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};var ud=.7,sd=1/ud,dd="\\s*([+-]?\\d+)\\s*",fd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hd=/^#([0-9a-f]{3,8})$/,md=new RegExp(`^rgb\\(${dd},${dd},${dd}\\)$`),vd=new RegExp(`^rgb\\(${pd},${pd},${pd}\\)$`),gd=new RegExp(`^rgba\\(${dd},${dd},${dd},${fd}\\)$`),yd=new RegExp(`^rgba\\(${pd},${pd},${pd},${fd}\\)$`),bd=new RegExp(`^hsl\\(${fd},${pd},${pd}\\)$`),xd=new RegExp(`^hsla\\(${fd},${pd},${pd},${fd}\\)$`),wd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ad(){return this.rgb().formatHex()}function Md(){return this.rgb().formatRgb()}function Cd(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?kd(t):3===n?new Id(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Sd(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Sd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=md.exec(e))?new Id(t[1],t[2],t[3],1):(t=vd.exec(e))?new Id(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=gd.exec(e))?Sd(t[1],t[2],t[3],t[4]):(t=yd.exec(e))?Sd(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=bd.exec(e))?Ld(t[1],t[2]/100,t[3]/100,1):(t=xd.exec(e))?Ld(t[1],t[2]/100,t[3]/100,t[4]):wd.hasOwnProperty(e)?kd(wd[e]):"transparent"===e?new Id(NaN,NaN,NaN,0):null}function kd(e){return new Id(e>>16&255,e>>8&255,255&e,1)}function Sd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Id(e,t,n,r)}function Od(e,t,n,r){return 1===arguments.length?function(e){return e instanceof cd||(e=Cd(e)),e?new Id((e=e.rgb()).r,e.g,e.b,e.opacity):new Id}(e):new Id(e,t,n,null==r?1:r)}function Id(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ed(){return`#${Nd(this.r)}${Nd(this.g)}${Nd(this.b)}`}function jd(){const e=Pd(this.opacity);return`${1===e?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${1===e?")":`, ${e})`}`}function Pd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nd(e){return((e=Dd(e))<16?"0":"")+e.toString(16)}function Ld(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yd(e,t,n,r)}function Fd(e){if(e instanceof Yd)return new Yd(e.h,e.s,e.l,e.opacity);if(e instanceof cd||(e=Cd(e)),!e)return new Yd;if(e instanceof Yd)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,l=i-o,c=(i+o)/2;return l?(a=t===i?(n-r)/l+6*(n<r):n===i?(r-t)/l+2:(t-n)/l+4,l/=c<.5?i+o:2-i-o,a*=60):l=c>0&&c<1?0:a,new Yd(a,l,c,e.opacity)}function Yd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Td(e){return(e=(e||0)%360)<0?e+360:e}function _d(e){return Math.max(0,Math.min(1,e||0))}function zd(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}ad(cd,Cd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ad,formatHex:Ad,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Fd(this).formatHsl()},formatRgb:Md,toString:Md}),ad(Id,Od,ld(cd,{brighter(e){return e=null==e?sd:Math.pow(sd,e),new Id(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?ud:Math.pow(ud,e),new Id(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Id(Dd(this.r),Dd(this.g),Dd(this.b),Pd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ed,formatHex:Ed,formatHex8:function(){return`#${Nd(this.r)}${Nd(this.g)}${Nd(this.b)}${Nd(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:jd,toString:jd})),ad(Yd,(function(e,t,n,r){return 1===arguments.length?Fd(e):new Yd(e,t,n,null==r?1:r)}),ld(cd,{brighter(e){return e=null==e?sd:Math.pow(sd,e),new Yd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?ud:Math.pow(ud,e),new Yd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Id(zd(e>=240?e-240:e+120,o,r),zd(e,o,r),zd(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Yd(Td(this.h),_d(this.s),_d(this.l),Pd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pd(this.opacity);return`${1===e?"hsl(":"hsla("}${Td(this.h)}, ${100*_d(this.s)}%, ${100*_d(this.l)}%${1===e?")":`, ${e})`}`}}));var Bd=e=>()=>e;function Rd(e){return 1===(e=+e)?qd:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Bd(isNaN(t)?n:t)}}function qd(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Bd(isNaN(e)?t:e)}var Hd=function e(t){var n=Rd(t);function r(e,t){var r=n((e=Od(e)).r,(t=Od(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=qd(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Ud(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Kd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wd=new RegExp(Kd.source,"g");function Gd(e,t){var n,r,o,i=Kd.lastIndex=Wd.lastIndex=0,a=-1,l=[],c=[];for(e+="",t+="";(n=Kd.exec(e))&&(r=Wd.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),l[a]?l[a]+=o:l[++a]=o),(n=n[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,c.push({i:a,x:Ud(n,r)})),i=Wd.lastIndex;return i<t.length&&(o=t.slice(i),l[a]?l[a]+=o:l[++a]=o),l.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)l[(n=c[r]).i]=n.x(e);return l.join("")})}var Vd,Zd=180/Math.PI,$d={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qd(e,t,n,r,o,i){var a,l,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Zd,skewX:Math.atan(c)*Zd,scaleX:a,scaleY:l}}function Xd(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],c=[];return i=e(i),a=e(a),function(e,r,o,i,a,l){if(e!==o||r!==i){var c=a.push("translate(",null,t,null,n);l.push({i:c-4,x:Ud(e,o)},{i:c-2,x:Ud(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,c),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Ud(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,l,c),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Ud(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,l,c),function(e,t,n,r,i,a){if(e!==n||t!==r){var l=i.push(o(i)+"scale(",null,",",null,")");a.push({i:l-4,x:Ud(e,n)},{i:l-2,x:Ud(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,c),i=a=null,function(e){for(var t,n=-1,r=c.length;++n<r;)l[(t=c[n]).i]=t.x(e);return l.join("")}}}var Jd,ef,tf=Xd((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$d:Qd(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),nf=Xd((function(e){return null==e?$d:(Vd||(Vd=document.createElementNS("http://www.w3.org/2000/svg","g")),Vd.setAttribute("transform",e),(e=Vd.transform.baseVal.consolidate())?Qd((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):$d)}),", ",")",")"),rf=0,of=0,af=0,lf=1e3,cf=0,uf=0,sf=0,df="object"===typeof performance&&performance.now?performance:Date,ff="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pf(){return uf||(ff(hf),uf=df.now()+sf)}function hf(){uf=0}function mf(){this._call=this._time=this._next=null}function vf(e,t,n){var r=new mf;return r.restart(e,t,n),r}function gf(){uf=(cf=df.now())+sf,rf=of=0;try{!function(){pf(),++rf;for(var e,t=Jd;t;)(e=uf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rf}()}finally{rf=0,function(){var e,t,n=Jd,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Jd=t);ef=e,bf(r)}(),uf=0}}function yf(){var e=df.now(),t=e-cf;t>lf&&(sf-=t,cf=e)}function bf(e){rf||(of&&(of=clearTimeout(of)),e-uf>24?(e<1/0&&(of=setTimeout(gf,e-df.now()-sf)),af&&(af=clearInterval(af))):(af||(cf=df.now(),af=setInterval(yf,lf)),rf=1,ff(gf)))}function xf(e,t,n){var r=new mf;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}mf.prototype=vf.prototype={constructor:mf,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?pf():+n)+(null==t?0:+t),this._next||ef===this||(ef?ef._next=this:Jd=this,ef=this),this._call=e,this._time=n,bf()},stop:function(){this._call&&(this._call=null,this._time=1/0,bf())}};var wf=Uu("start","end","cancel","interrupt"),Af=[],Mf=0,Cf=1,kf=2,Sf=3,Of=4,If=5,Ef=6;function jf(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=Cf,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var u,s,d,f;if(n.state!==Cf)return c();for(u in o)if((f=o[u]).name===n.name){if(f.state===Sf)return xf(a);f.state===Of?(f.state=Ef,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<t&&(f.state=Ef,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(xf((function(){n.state===Sf&&(n.state=Of,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=kf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kf){for(n.state=Sf,r=new Array(d=n.tween.length),u=0,s=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=f);r.length=s+1}}function l(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=If,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);n.state===If&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var r in n.state=Ef,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=vf(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:wf,tween:Af,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Mf})}function Pf(e,t){var n=Nf(e,t);if(n.state>Mf)throw new Error("too late; already scheduled");return n}function Df(e,t){var n=Nf(e,t);if(n.state>Sf)throw new Error("too late; already running");return n}function Nf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lf(e,t){var n,r;return function(){var o=Df(this,e),i=o.tween;if(i!==n)for(var a=0,l=(r=n=i).length;a<l;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function Ff(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var i=Df(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var l={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=l;break}c===u&&o.push(l)}i.tween=o}}function Yf(e,t,n){var r=e._id;return e.each((function(){var e=Df(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Nf(e,r).value[t]}}function Tf(e,t){var n;return("number"===typeof t?Ud:t instanceof Cd?Hd:(n=Cd(t))?(t=n,Hd):Gd)(e,t)}function _f(e){return function(){this.removeAttribute(e)}}function zf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bf(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Rf(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function qf(e,t,n){var r,o,i;return function(){var a,l,c=n(this);if(null!=c)return(a=this.getAttribute(e))===(l=c+"")?null:a===r&&l===o?i:(o=l,i=t(r=a,c));this.removeAttribute(e)}}function Hf(e,t,n){var r,o,i;return function(){var a,l,c=n(this);if(null!=c)return(a=this.getAttributeNS(e.space,e.local))===(l=c+"")?null:a===r&&l===o?i:(o=l,i=t(r=a,c));this.removeAttributeNS(e.space,e.local)}}function Uf(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Kf(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Wf(e,t){return function(){Pf(this,e).delay=+t.apply(this,arguments)}}function Gf(e,t){return t=+t,function(){Pf(this,e).delay=t}}function Vf(e,t){return function(){Df(this,e).duration=+t.apply(this,arguments)}}function Zf(e,t){return t=+t,function(){Df(this,e).duration=t}}var $f=id.prototype.constructor;function Qf(e){return function(){this.style.removeProperty(e)}}var Xf=0;function Jf(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ep(){return++Xf}var tp=id.prototype;Jf.prototype={constructor:Jf,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=ts(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var l,c,u=r[a],s=u.length,d=i[a]=new Array(s),f=0;f<s;++f)(l=u[f])&&(c=e.call(l,l.__data__,f,u))&&("__data__"in l&&(c.__data__=l.__data__),d[f]=c,jf(d[f],t,n,f,d,Nf(l,n)));return new Jf(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=rs(e));for(var r=this._groups,o=r.length,i=[],a=[],l=0;l<o;++l)for(var c,u=r[l],s=u.length,d=0;d<s;++d)if(c=u[d]){for(var f,p=e.call(c,c.__data__,d,u),h=Nf(c,n),m=0,v=p.length;m<v;++m)(f=p[m])&&jf(f,t,n,m,p,h);i.push(p),a.push(c)}return new Jf(i,a,t,n)},selectChild:tp.selectChild,selectChildren:tp.selectChildren,filter:function(e){"function"!==typeof e&&(e=is(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],l=a.length,c=r[o]=[],u=0;u<l;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&c.push(i);return new Jf(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),l=0;l<i;++l)for(var c,u=t[l],s=n[l],d=u.length,f=a[l]=new Array(d),p=0;p<d;++p)(c=u[p]||s[p])&&(f[p]=c);for(;l<r;++l)a[l]=t[l];return new Jf(a,this._parents,this._name,this._id)},selection:function(){return new $f(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ep(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,l=r[i],c=l.length,u=0;u<c;++u)if(a=l[u]){var s=Nf(a,t);jf(a,e,n,u,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Jf(r,this._parents,e,n)},call:tp.call,nodes:tp.nodes,node:tp.node,size:tp.size,empty:tp.empty,each:tp.each,on:function(e,t){var n=this._id;return arguments.length<2?Nf(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Pf:Df;return function(){var a=i(this,e),l=a.on;l!==r&&(o=(r=l).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=$u(e),r="transform"===n?nf:Tf;return this.attrTween(e,"function"===typeof t?(n.local?Hf:qf)(n,r,Yf(this,"attr."+e,t)):null==t?(n.local?zf:_f)(n):(n.local?Rf:Bf)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=$u(e);return this.tween(n,(r.local?Uf:Kf)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?tf:Tf;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Is(this,e),a=(this.style.removeProperty(e),Is(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,Qf(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=Is(this,e),l=n(this),c=l+"";return null==l&&(this.style.removeProperty(e),c=l=Is(this,e)),a===c?null:a===r&&c===o?i:(o=c,i=t(r=a,l))}}(e,r,Yf(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,l="end."+a;return function(){var c=Df(this,e),u=c.on,s=null==c.value[a]?i||(i=Qf(t)):void 0;u===n&&o===s||(r=(n=u).copy()).on(l,o=s),c.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=Is(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Yf(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=Nf(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?Lf:Ff)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Wf:Gf)(t,e)):Nf(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Vf:Zf)(t,e)):Nf(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){Df(this,e).ease=t}}(t,e)):Nf(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Df(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var l={value:a},c={value:function(){0===--o&&i()}};n.each((function(){var n=Df(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:tp[Symbol.iterator]};var np={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function rp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function op(e,t,n){this.k=e,this.x=t,this.y=n}id.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>kf&&n.state<If,n.state=Ef,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}(this,e)}))},id.prototype.transition=function(e){var t,n;e instanceof Jf?(t=e._id,e=e._name):(t=ep(),(n=np).time=pf(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,l=r[i],c=l.length,u=0;u<c;++u)(a=l[u])&&jf(a,e,t,u,l,n||rp(a,t));return new Jf(r,this._parents,e,t)},op.prototype={constructor:op,scale:function(e){return 1===e?this:new op(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new op(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new op(1,0,0),op.prototype;var ip=(0,S.A)("div",{target:"e1q9gayd0"})((function(e){var t=e.theme,n=e.expanded;return{display:"flex",border:"1.5px solid ".concat(t.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:n?"auto":"150px",width:n?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}}),""),ap=function(e){var t=e.monomer,n=e.expanded,r=e.selectedAttachmentPoint,i=e.connectedAttachmentPoints,l=e.usage,c=(0,a.useRef)(null);return(0,a.useLayoutEffect)((function(){var e=c.current;if(e){var n=function(e){return"string"===typeof e?new od([[document.querySelector(e)]],[document.documentElement]):new od([[e]],rd)}(e);if(t instanceof h.AmbiguousMonomer){var o=(e.width.baseVal.value-e.x.baseVal.value)/2,a=(e.height.baseVal.value-e.y.baseVal.value)/2,u=new h.Vec2(o,a),s=h.Coordinates.canvasToModel(u),d=new h.AmbiguousMonomer(t.variantMonomerItem,s);new h.AmbiguousMonomerRenderer(d).showExternal({canvas:n,usage:l,selectedAttachmentPoint:r,connectedAttachmentPoints:i})}}}),[r,i]),(0,o.Y)(ip,{expanded:n,children:(0,o.Y)("svg",{ref:c})})},lp=function(e){var t=e.monomer,n=e.attachmentPoints,r=e.connectedAttachmentPoints,i=e.selectedAttachmentPoint,a=e.usage,l=e.needCache,c=e.update,u=e.expanded,s=t instanceof h.AmbiguousMonomer,d=t.monomerItem.props.unresolved;return(0,o.FD)(o.FK,{children:[s?(0,o.Y)(ap,{monomer:t,expanded:u,selectedAttachmentPoint:i,connectedAttachmentPoints:r,usage:a}):d?(0,o.Y)(qu,{}):(0,o.Y)(zu,{struct:t.monomerItem.struct,options:{connectedMonomerAttachmentPoints:r,currentlySelectedMonomerAttachmentPoint:null!==i&&void 0!==i?i:void 0,usageInMacromolecule:a,labelInMonomerConnectionsModal:!0,needCache:null!==l&&void 0!==l&&l},update:c,isExpanded:u}),(0,o.Y)(Bu,{children:n})]})},cp=(0,S.A)("div",{target:"e14t14ao2"})((function(e){var t=e.theme,n=e.isExpanded;return{margin:0,padding:0,textAlign:"center",alignSelf:"flex-end",display:"block",font:t.ketcher.font.family.inter,fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular,flexBasis:"200px",lineHeight:"14px",maxWidth:n?void 0:"150px"}}),""),up=(0,S.A)("div",{target:"e14t14ao1"})((function(e){var t=e.theme;return{width:10,height:2,display:"block",color:t.ketcher.color.button.secondary.hover,backgroundColor:t.ketcher.color.button.secondary.hover,borderRadius:20,margin:"auto"}}),""),sp=(0,S.A)("div",{target:"e14t14ao0"})((function(){return{display:"grid",gridAutoFlow:"column",gridTemplateRows:"auto auto auto",gridTemplateColumns:"1fr 10px 1fr",justifyContent:"center",alignItems:"flex-start",padding:"12px",paddingBottom:0,height:"100%",columnGap:"12px",rowGap:"8px"}}),""),dp=function(e){return e instanceof h.AmbiguousMonomer?"Ambiguous ".concat(e.monomerClass):e.monomerItem.props.Name},fp=function(e){var t=e.firstMonomer,n=e.secondMonomer,r=e.expanded,i=e.firstMonomerOverview,a=e.secondMonomerOverview,l=dp(t),c=dp(n);return(0,o.FD)(sp,{children:[(0,o.Y)(cp,{isExpanded:r,children:l}),i,(0,o.Y)("span",{}),(0,o.Y)(up,{}),(0,o.Y)("span",{}),(0,o.Y)(cp,{isExpanded:r,children:c}),a]})};function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hp=(0,S.A)(ql,{target:"e1byht5d3"})({name:"1j7jcep",styles:"& .MuiPaper-root{background:#fff !important;}& .MuiDialogContent-root{overflow:hidden;}"}),mp=(0,S.A)(jc,{target:"e1byht5d2"})((function(){return{width:"97px !important"}}),""),vp=(0,S.A)(jc,{target:"e1byht5d1"})((function(e){return{width:"97px !important",color:e.disabled?"rgba(51, 51, 51, 0.6)":"",background:e.disabled?"rgba(225, 229, 234, 1) !important":"",opacity:"1 !important",minHeight:"0"}}),""),gp=(0,S.A)(jc,{target:"e1byht5d0"})((function(e){return{borderRadius:5,minWidth:"45px !important",padding:"4px",border:"1px solid ".concat(e.theme.ketcher.color.border.secondary),color:e.disabled?"rgba(51, 51, 51, 0.6) !important":"",background:e.disabled?"rgba(225, 229, 234)":"",borderColor:e.disabled?"rgba(225, 229, 234) !important":""}}),"");function yp(e){var t=e.monomer,n=e.selectedAttachmentPoint,i=e.onSelectAttachmentPoint,l=e.expanded,c=void 0!==l&&l,u=(0,a.useState)(t.attachmentPointsToBonds),s=(0,r.A)(u,2),d=s[0],f=s[1],p=(0,a.useState)((function(){return pa(d)})),m=(0,r.A)(p,2),v=m[0],g=m[1];(0,a.useEffect)((function(){f(t.attachmentPointsToBonds)}),[n]),(0,a.useEffect)((function(){var e=pa(d);g(e)}),[d]);var y=function(e){var n=t.monomerCaps,r=t instanceof h.AmbiguousMonomer;if(!n)return r?null:"H";var o=n[e];return _u(o)},x=function(e){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.attachmentPointsToBonds),o=n?r[n]:null;n&&o&&t.removeBond(o);var a=t.getPotentialBond(e);r[e]=a,f(r),i(e);var l=pa(r);g(l)};return(0,o.Y)(lp,{monomer:t,connectedAttachmentPoints:v,selectedAttachmentPoint:n,usage:h.UsageInMacromolecule.MonomerConnectionsModal,update:c,expanded:c,attachmentPoints:t.listOfAttachmentPoints.map((function(e){var t=Boolean(v.includes(e)&&e!==n);return(0,o.FD)(Fu,{children:[(0,o.Y)(gp,{label:e,styleType:e===n?"primary":"secondary",clickHandler:function(){return x(e)},disabled:t}),(0,o.Y)(Yu,{"data-testid":"leaving-group-value",disabled:t,children:y(e)})]},e)}))})}function bp(e){if(e.chosenFirstAttachmentPointForBond)return e.chosenFirstAttachmentPointForBond;if(e.chosenSecondAttachmentPointForBond)return e.chosenSecondAttachmentPointForBond;var t=Object.entries(e.attachmentPointsToBonds).filter((function(e){var t=(0,r.A)(e,2);return t[0],null==t[1]}));return 1===t.length?(0,r.A)(t[0],1)[0]:null}var xp=(0,S.A)("p",{target:"e1e4h5hm0"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),wp={open:function(e){var t=e.isModalOpen,i=e.onClose,l=ea(),c=(0,a.useState)(""),u=(0,r.A)(c,2),s=u[0],d=u[1],f=(0,a.useState)(""),p=(0,r.A)(f,2),m=p[0],v=p[1],g=(0,a.useState)(!1),y=(0,r.A)(g,2),b=y[0],x=y[1],w=(0,a.useState)(),A=(0,r.A)(w,2),M=A[0],C=A[1],k=(0,a.useState)(mu.openOptions),S=(0,r.A)(k,2),O=S[0],I=S[1],E=(0,a.useState)(ou),j=(0,r.A)(E,2),P=j[0],D=j[1],N=(0,a.useState)(au),L=(0,r.A)(N,2),F=L[0],Y=L[1],T=(0,a.useState)(uu),_=(0,r.A)(T,2),z=_[0],B=_[1];(0,a.useEffect)((function(){var e=null===m||void 0===m?void 0:m.split("."),t=e[e.length-1];if(t){var n=du.find((function(e){return e.id===t})),r=null!==n&&void 0!==n&&n.id?n.id:iu;D(r)}}),[m]),(0,a.useEffect)((function(){new Promise((function(e,t){n.g.FileReader?e(Pc):t(new Error("Your browser does not support opening files locally"))})).then((function(e){C({chosenOpener:e})}))}),[]);var R=(0,a.useCallback)((function(){I(mu.openOptions),d(""),D(ou),Y(au),i()}),[i]),q=function(){gu({struct:s,formatSelection:P,additionalSelection:F,peptideLettersFormatSelection:z,onCloseCallback:R,setIsLoading:x,dispatch:l})},H=function(){var e=h.CoreEditor.provideEditorInstance(),t=new h.EditorHistory(e),n=e.drawingEntitiesManager.deleteAllEntities();t.update(n),e.renderersContainer.update(n),e.zoomToStructuresIfNeeded(),gu({struct:s,formatSelection:P,additionalSelection:F,peptideLettersFormatSelection:z,onCloseCallback:R,setIsLoading:x,dispatch:l})};return(0,o.FD)(Zc,{isOpen:t,title:"Open Structure",onClose:R,modalWidth:O===mu.textEditor?"620px":"",children:[(0,o.Y)(ql.Content,{children:(0,o.FD)(Dc,{currentState:O,children:[(0,o.Y)(Mc,{isAnalyzingFile:false,fileName:m,currentState:O,states:mu,selectClipboard:function(){return I(mu.textEditor)},fileLoadHandler:function(e){v(e[0].name),null===M||void 0===M||M.chosenOpener(e[0]).then((function(e){d(e),I(mu.textEditor)}),(function(){}))},errorHandler:yu,value:s,inputHandler:d}),b&&(0,o.Y)(Wc,{children:(0,o.Y)(Xl,{})})]})}),O===mu.textEditor?(0,o.Y)(ql.Footer,{withborder:"true",children:(0,o.FD)($c,{children:[(0,o.FD)(Qc,{children:[(0,o.Y)(Jc,{options:du,currentSelection:P,selectionHandler:D,customStylesForExpanded:Kc},P),P===iu||P===cu?(0,o.Y)(eu,{options:fu,currentSelection:F,selectionHandler:Y,customStylesForExpanded:Kc,testId:"dropdown-select-type"},F):null,P===iu&&F===lu?(0,o.Y)(tu,{options:pu,currentSelection:z,selectionHandler:B,testId:"dropdown-select-peptide-letters-format"}):null]}),(0,o.FD)(nu,{children:[(0,o.Y)(ru,{disabled:!s,clickHandler:H,label:"Open as New",styleType:"secondary"},"openButton"),(0,o.Y)(ru,{disabled:!s,clickHandler:q,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard","data-testid":"add-to-canvas-button"},"copyButton")]})]})}):(0,o.Y)(o.FK,{})]})},save:function(e){var t=e.onClose,n=e.isModalOpen,i=ea(),l=(0,a.useState)("ket"),c=(0,r.A)(l,2),u=c[0],s=c[1],d=(0,a.useState)("ketcher"),f=(0,r.A)(d,2),p=f[0],m=f[1],g=(0,a.useState)(""),y=(0,r.A)(g,2),b=y[0],x=y[1],w=(0,a.useState)(!1),A=(0,r.A)(w,2),M=A[0],C=A[1],S=(0,a.useState)(),O=(0,r.A)(S,2),I=O[0],E=O[1],j=k.e3.getIndigo(),P=h.CoreEditor.provideEditorInstance(),D=function(){var e=(0,G.A)(v().mark((function e(t){var n,r,o,a,l,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),n=new h.KetSerializer,r=n.serialize(P.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),P.drawingEntitiesManager),E(void 0),"ket"!==t){e.next=7;break}return x(r),e.abrupt("return");case 7:if("svg"!==t){e.next=11;break}return o=(0,h.getSvgFromDrawnStructures)(P.canvas,"preview"),E(o),e.abrupt("return");case 11:if(e.prev=11,C(!0),"fasta"!==t&&"sequence"!==t){e.next=17;break}if(P.drawingEntitiesManager.validateIfApplicableForFasta()){e.next=17;break}throw new Error("Error during sequence type recognition(RNA, DNA or Peptide)");case 17:return e.next=19,j.convert({struct:r,output_format:ju[t]});case 19:a=e.sent,x(a.struct),e.next=30;break;case 23:e.prev=23,e.t0=e.catch(11),l=e.t0 instanceof Error?e.t0.message:"string"===typeof e.t0?e.t0:JSON.stringify(e.t0),i(Io(c="Convert error! "+l)),h.KetcherLogger.error(c),s("ket");case 30:return e.prev=30,C(!1),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[11,23,30,33]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e;if("svg"===u){var n=(0,h.getSvgFromDrawnStructures)(P.canvas,"file");if(!n)return void t();e=n}else e=b;var r=new Blob([e],{type:Iu(u).mime}),o=Iu(u);(0,Q.saveAs)(r,"".concat(p).concat(o.extensions[0])),t()};return(0,a.useEffect)((function(){if("ket"===u){var e=(new h.KetSerializer).serialize(P.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),P.drawingEntitiesManager);x(e)}}),[u]),(0,o.FD)(Pu,{title:"save structure",isOpen:n,onClose:t,children:[(0,o.Y)(ql.Content,{children:(0,o.FD)(qc,{onSubmit:N,id:"save",children:[(0,o.FD)(Hc,{style:{padding:"12px 12px 10px"},children:[(0,o.Y)("div",{children:(0,o.Y)(ku,{value:p,id:"filename",onChange:function(e){m(e)},label:"File name:"})}),(0,o.Y)(Uc,{label:"File format:",options:Eu,currentSelection:u,selectionHandler:D,customStylesForExpanded:Kc})]}),I?(0,o.Y)(Gc,{dangerouslySetInnerHTML:{__html:I}}):(0,o.FD)(Vc,{children:[(0,o.Y)(bc,{testId:"preview-area-text",value:b,readonly:!0}),(0,o.Y)(k.K0,{onClick:function(e){e.preventDefault();try{(0,h.isClipboardAPIAvailable)()?navigator.clipboard.writeText(b):(0,h.legacyCopy)(e.clipboardData,{"text/plain":b})}catch(t){h.KetcherLogger.error("copyAs.js::copyAs",t),i(Io("This feature is not available in your browser"))}},iconName:"copy",title:"Copy to clipboard",testId:"copy-to-clipboard"}),M&&(0,o.Y)(Wc,{children:(0,o.Y)(Xl,{})})]})]})}),(0,o.FD)(ql.Footer,{children:[(0,o.Y)(jc,{label:"Cancel",styleType:"secondary",clickHandler:t}),(0,o.Y)(jc,{label:"Save",clickHandler:N,disabled:!p})]})]})},delete:function(e){var t=e.isModalOpen,n=e.onClose,r=ea(),i=ta(li),l=ta(Er),c=(0,a.useCallback)((function(){n()}),[n]);return(0,o.FD)(ql,{isOpen:t,title:"Delete RNA Preset",onClose:c,children:[(0,o.Y)(ql.Content,{children:(0,o.FD)(Nu,{"data-testid":"delete-preset-popup-content",children:[(0,o.Y)("div",{children:"You are about to delete"}),(0,o.FD)("div",{children:['"',i.name,'" RNA preset.']}),(0,o.Y)("div",{children:"This operation cannot be undone."})]})}),(0,o.FD)(ql.Footer,{children:[(0,o.Y)(Du,{clickHandler:function(){c()},label:"Cancel",styleType:"secondary"},"cancel"),(0,o.Y)(Du,{clickHandler:function(){c(),r(xi(i)),r(Ai(!1)),r(wi()),l.events.selectPreset.dispatch(null)},label:"Delete"},"delete")]})]})},updateSequenceInRNABuilder:function(e){var t=e.isModalOpen,n=e.onClose,r=ea(),i=ta($o),l=ta(Er),c=bl(i),u=(0,a.useCallback)((function(){n()}),[n]);return(0,o.FD)(ql,{isOpen:t,title:"Update sequence",onClose:u,children:[(0,o.Y)(ql.Content,{children:(0,o.FD)(Lu,{children:["You are going to modify ",c," nucleotides. Are you sure?"]})}),(0,o.FD)(ql.Footer,{children:[(0,o.Y)(jc,{clickHandler:function(){u()},label:"Cancel",styleType:"secondary"},"cancel"),(0,o.Y)(jc,{clickHandler:function(){u(),l.events.modifySequenceInRnaBuilder.dispatch(i),yl(r,l)},label:"Yes"},"update")]})]})},monomerConnection:function(e){var t=e.onClose,n=e.isModalOpen,i=e.firstMonomer,l=e.secondMonomer,c=e.polymerBond,u=e.isReconnectionDialog,s=ta(Er),d=(0,a.useRef)(null===c||void 0===c?void 0:c.firstMonomerAttachmentPoint),f=(0,a.useRef)(null===c||void 0===c?void 0:c.secondMonomerAttachmentPoint),p=(0,a.useRef)((null===i||void 0===i?void 0:i.hasFreeAttachmentPoint)||(null===l||void 0===l?void 0:l.hasFreeAttachmentPoint));if(!i||!l)throw new Error("Monomers must exist!");var h=(0,a.useState)(d.current||bp(i)),m=(0,r.A)(h,2),v=m[0],g=m[1],y=(0,a.useState)(f.current||bp(l)),b=(0,r.A)(y,2),x=b[0],w=b[1],A=(0,a.useState)(!1),M=(0,r.A)(A,2),C=M[0],k=M[1],S=function(){var e;u?(null===c||void 0===c||c.firstMonomer.setBond(d.current,c),null===c||void 0===c||null===(e=c.secondMonomer)||void 0===e||e.setBond(f.current,c),t()):(s.events.cancelBondCreationViaModal.dispatch(l),t())};return(0,o.FD)(hp,{title:u?"Edit Connection Points":"Select connection points",isOpen:n,onClose:S,showExpandButton:!0,modalWidth:"358px",expanded:C,setExpanded:k,children:[(0,o.Y)(ql.Content,{children:(0,o.Y)(Tu,{children:(0,o.Y)(fp,{firstMonomer:i,secondMonomer:l,expanded:C,firstMonomerOverview:(0,o.Y)(yp,{monomer:i,selectedAttachmentPoint:v,onSelectAttachmentPoint:g,expanded:C}),secondMonomerOverview:(0,o.Y)(yp,{monomer:l,selectedAttachmentPoint:x,onSelectAttachmentPoint:w,expanded:C})})})}),(0,o.FD)(ql.Footer,{children:[(0,o.Y)(mp,{label:"Cancel",styleType:"secondary",clickHandler:S}),(0,o.Y)(vp,{label:u?"Reconnect":"Connect",disabled:!v||!x||!p.current,clickHandler:function(){if(!v||!x)throw new Error("Attachment points cannot be falsy");v!==d.current||x!==f.current?(s.events.createBondViaModal.dispatch({firstMonomer:i,secondMonomer:l,firstSelectedAttachmentPoint:v,secondSelectedAttachmentPoint:x,polymerBond:c,isReconnection:u,initialFirstMonomerAttachmentPoint:d.current,initialSecondMonomerAttachmentPoint:f.current}),t()):S()}})]})]})},confirmationDialog:function(e){var t=e.confirmationText,n=e.onConfirm,r=e.isModalOpen,i=e.onClose;return(0,o.FD)(ql,{isOpen:r,title:"Confirm your action",onClose:i,children:[(0,o.Y)(ql.Content,{children:(0,o.Y)(xp,{children:t})}),(0,o.FD)(ql.Footer,{children:[(0,o.Y)(jc,{label:"Cancel",clickHandler:i}),(0,o.Y)(jc,{label:"Yes",clickHandler:function(){n(),i()},styleType:"secondary"})]})]})}};function Ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mp=function(){var e=ta(Po),t=ta(jo),n=ta(Do),r=ea(),i=(0,a.useCallback)((function(){r(ko())}),[r]);if(!t)return null;var l=wp[t];if(!l)throw new Error("There is no modal window named ".concat(t));return n?(0,o.Y)(l,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ap(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClose:i,isModalOpen:e},n)):(0,o.Y)(l,{onClose:i,isModalOpen:e})};var Cp=(0,S.A)("div",{target:"e15avtnm2"})({name:"1bweptz",styles:"background-color:#333333;max-height:40px;display:flex;align-items:stretch"}),kp=(0,S.A)("div",{target:"e15avtnm1"})({name:"1my6l07",styles:"max-width:356px;padding:4px 10px 4px 10px;color:white;display:flex"}),Sp=(0,S.A)(k.K0,{target:"e15avtnm0"})({name:"1c8hqv0",styles:"color:white;width:24px;height:auto;display:flex;align-items:center;justify-content:center;&:hover{background-color:#585858;color:white;}svg{width:16px;height:16px;}"}),Op=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("symbol",{id:"chem",viewBox:"0 0 59 59",width:"59",height:"59",children:(0,o.Y)("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"0.75",fill:"#F5F6F7"})}),(0,o.Y)("symbol",{id:"chem-selection",viewBox:"0 0 59 59",width:"59",height:"59",children:(0,o.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"0.75",stroke:"#0097A8",fill:"none",strokeWidth:"1.5"})})]})},Ip=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("symbol",{id:"peptide",viewBox:"0 0 70 61",width:"70",height:"61",children:(0,o.Y)("path",{className:"monomer-body",transform:"scale(0.5)","data-actual-width":"35","data-actual-height":"30.5",d:"M16.9236 1.00466C17.2801 0.383231 17.9418 6.10888e-07 18.6583 5.98224e-07L51.3417 2.04752e-08C52.0582 7.81036e-09 52.7199 0.383234 53.0764 1.00466L69.4289 29.5047C69.7826 30.1211 69.7826 30.8789 69.4289 31.4953L53.0764 59.9953C52.7199 60.6168 52.0582 61 51.3417 61H18.6583C17.9418 61 17.2801 60.6168 16.9236 59.9953L0.571095 31.4953C0.217407 30.8789 0.217408 30.1211 0.571096 29.5047L16.9236 1.00466Z"})}),(0,o.FD)("symbol",{id:"peptide-hover",viewBox:"0 0 70 61",width:"70",height:"61",children:[(0,o.Y)("path",{d:"M18.2246 1.75116C18.3137 1.59581 18.4792 1.5 18.6583 1.5L51.3417 1.5C51.5208 1.5 51.6863 1.59581 51.7754 1.75116L53.06 1.01408L51.7754 1.75117L68.1279 30.2512C68.2163 30.4053 68.2163 30.5947 68.1279 30.7488L51.7754 59.2488C51.6863 59.4042 51.5208 59.5 51.3417 59.5H18.6583C18.4792 59.5 18.3137 59.4042 18.2246 59.2488L1.87215 30.7488C1.78372 30.5947 1.78372 30.4053 1.87215 30.2512L18.2246 1.75116Z",fill:"none",transform:"scale(0.5)",stroke:"#0097A8",strokeWidth:"3"})," "]}),(0,o.Y)("symbol",{id:"peptide-selection",viewBox:"0 0 70 61",width:"70",height:"61",children:(0,o.Y)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M17.3572 1.25349C17.6247 0.787424 18.1209 0.500001 18.6583 0.500001L51.3417 0.5C51.8791 0.5 52.3753 0.787425 52.6428 1.2535L53.0665 1.01035L52.6428 1.2535L68.9952 29.7535C69.2605 30.2158 69.2605 30.7842 68.9952 31.2465L52.6428 59.7465C52.3753 60.2126 51.8791 60.5 51.3417 60.5H18.6583C18.1209 60.5 17.6247 60.2126 17.3572 59.7465L1.00478 31.2465C0.739513 30.7842 0.739513 30.2158 1.00478 29.7535L17.3572 1.25349Z",fill:"none",transform:"scale(0.5)",stroke:"#0097A8"})}),(0,o.Y)("symbol",{id:"modified-background",viewBox:"0 0 60 20",width:"30",height:"20",x:"2.5",y:"5",children:(0,o.Y)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M6.52702 20C5.81057 20 5.14885 19.6168 4.79229 18.9953L0.570974 11.6382C0.217285 11.0218 \n           0.217285 10.2639 0.570974 9.64751L5.52999 1.00466C5.88654 0.383235 6.54827 0 7.26472 0H52.735C53.4515\n           0 54.1132 0.383234 54.4698 1.00466L59.4288 9.64751C59.7825 10.2639 59.7825 11.0218 59.4288 11.6382\n           L55.2075 18.9953C54.8509 19.6168 54.1892 20 53.4727 20H6.52702Z",fillOpacity:"0.6"})})]})},Ep=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("symbol",{id:"sugar",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,o.Y)("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",rx:"5"})}),(0,o.Y)("symbol",{id:"sugar-selection",viewBox:"-1 -1 100 100",width:"70",height:"70",children:(0,o.Y)("rect",{width:"39",height:"39",rx:"5",fill:"none",stroke:"#0097A8",strokeWidth:"2.5"})}),(0,o.Y)("symbol",{id:"sugar-variant",viewBox:"0 0 72 72",width:"70",height:"70",children:(0,o.Y)("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",x:"0.5",y:"0.5",rx:"5",stroke:"#585858",strokeWidth:"0.5"})}),(0,o.Y)("symbol",{id:"sugar-modified-background",viewBox:"0 0 28 10",width:"27",height:"10",x:"0.7",y:"10",children:(0,o.Y)("path",{d:"M1.5 10C0.947715 10 0.5 9.55229 0.5 9V1C0.5 0.447715 0.947715 0 1.5 0H26.5C27.0523 0 27.5 0.447715 27.5 1V9C27.5 9.55228 27.0523 10 26.5 10H1.5Z",fill:"white",fillOpacity:"0.6"})})]})},jp=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("symbol",{id:"phosphate",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,o.Y)("rect",{className:"monomer-body",width:"28",height:"28","data-actual-width":"28","data-actual-height":"28",rx:"15"})}),(0,o.Y)("symbol",{id:"phosphate-selection",viewBox:"-1 -1 75 75",width:"70",height:"70",children:(0,o.Y)("rect",{width:"28",height:"28",rx:"15",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),(0,o.Y)("symbol",{id:"phosphate-variant",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,o.Y)("rect",{className:"monomer-body",width:"27",height:"27","data-actual-width":"27","data-actual-height":"27",stroke:"#585858",strokeWidth:"0.5",x:"0.5",y:"0.5",rx:"15"})}),(0,o.Y)("symbol",{id:"phosphate-modified-background",viewBox:"0 0 28 10",width:"26",height:"10",x:"1",y:"9.5",children:(0,o.Y)("path",{d:"M2.13388 0C1.72465 0 1.35333 0.248229 1.22109 0.635509C0.753639 2.00455 0.5 3.47265 0.5 5C0.5 6.52735 0.753639 7.99545 1.22109 9.36449C1.35333 9.75177 1.72465 10 2.13389 10H25.8661C26.2753 10 26.6467 9.75177 26.7789 9.36449C27.2464 7.99545 27.5 6.52735 27.5 5C27.5 3.47265 27.2464 2.00455 26.7789 0.635509C26.6467 0.248229 26.2753 0 25.8661 0H2.13388Z",fill:"#333333",fillOpacity:"0.6"})})]})},Pp=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("symbol",{id:"rna-base",viewBox:"-16 0 65 65",width:"65",height:"95",children:(0,o.Y)("rect",{width:"22.5",height:"22.5","data-actual-width":"31.82","data-actual-height":"31.82",rx:"1",x:"-11.25",y:"-11.25",transform:"rotate(45)",className:"monomer-body"})}),(0,o.Y)("symbol",{id:"rna-base-selection",viewBox:"-15.75 -0.25 65 65",width:"65",height:"95",children:(0,o.Y)("rect",{width:"21",height:"21",rx:"1",x:"-10.5",y:"-10.5",transform:"rotate(45)",stroke:"#0097A8",strokeWidth:"1.5",fill:"none"})}),(0,o.Y)("symbol",{id:"rna-base-variant",viewBox:"-16 0 65 65",width:"65",height:"94",children:(0,o.Y)("rect",{width:"21.5",height:"21.5","data-actual-width":"30","data-actual-height":"30",stroke:"#585858",strokeWidth:"0.5",rx:"1",x:"-10.25",y:"-10.25",transform:"rotate(45)",className:"monomer-body"})}),(0,o.Y)("symbol",{id:"rna-base-modified-background",viewBox:"0 0 32 10",width:"30",height:"9",x:"0.8",y:"10.8",children:(0,o.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30156 10C6.03634 10 5.78199 9.89464 5.59445 9.70711L1.1508 5.26346C0.760279 4.87293 0.760279 4.23977 1.1508 3.84924L4.70715 0.292893C4.89469 0.105357 5.14904 0 5.41426 0H26.5858C26.851 0 27.1054 0.105357 27.2929 0.292893L30.8493 3.84924C31.2398 4.23977 31.2398 4.87293 30.8493 5.26346L26.4056 9.70711C26.2181 9.89464 25.9637 10 25.6985 10H6.30156Z",fill:"#333333",fillOpacity:"0.6"})})]})},Dp=function(){return(0,o.FD)(o.FK,{children:[(0,o.FD)("symbol",{id:"unresolved-monomer",viewBox:"0 0 59 59",width:"59",height:"59",children:[(0,o.Y)("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",stroke:"#333333"}),(0,o.Y)("rect",{width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"#585858"})]}),(0,o.Y)("symbol",{id:"unresolved-monomer-selection",children:(0,o.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"none",stroke:"#0097A8"})}),(0,o.Y)("symbol",{id:"unresolved-monomer-hover",children:(0,o.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})})]})},Np=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("symbol",{id:"nucleotide",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,o.Y)("path",{className:"monomer-body","data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)"})}),(0,o.Y)("symbol",{id:"nucleotide-selection",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,o.Y)("path",{"data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)",fill:"none",stroke:"#0097A8"})}),(0,o.Y)("symbol",{id:"nucleotide-hover",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,o.Y)("path",{"data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)",fill:"none",stroke:"#0097A8",strokeWidth:"3"})})]})},Lp=function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("path",{strokeLinecap:"round",d:"M5,0 0,2.5 5,5z",id:"arrow-marker-content"}),(0,o.Y)("marker",{id:"arrow-marker",markerHeight:"3",markerWidth:"5",orient:"auto",refX:"2.5",refY:"1.5",children:(0,o.Y)("use",{href:"#arrow-marker-content",transform:"rotate(180 2.5 1.5) scale(1,0.6)",strokeWidth:"1.2500",fill:"black",stroke:"none"})})]})},Fp=function(){return(0,o.Y)(o.FK,{children:(0,o.Y)("symbol",{id:"sequence-start-arrow",viewBox:"0 0 65 65",width:"65",height:"95",children:(0,o.Y)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.Y)("path",{d:"M10.2802 5.09664C10.9756 5.49813 10.9756 6.50187 10.2802 6.90336L2.56467 11.3579C1.86926 11.7594 1 11.2576 1 10.4546V1.54541C1 0.742426 1.86926 0.240558 2.56467 0.642053L10.2802 5.09664Z",stroke:"#7C7C7F"})})})})};var Yp=(0,S.A)("div",{target:"e1phidy70"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),Tp=function(){var e=ea(),t=ta(Lo),n=ta(Fo)||"Error message",r=""!==t,i=function(){e(Eo())};return(0,o.FD)(ql,{isOpen:r,title:n,onClose:i,children:[(0,o.Y)(ql.Content,{children:(0,o.Y)(Yp,{children:t})}),(0,o.Y)(ql.Footer,{children:(0,o.Y)(jc,{label:"Close",clickHandler:i})})]})},_p=(0,S.A)("div",{target:"embh3ih3"})((function(){return{height:"100%"}}),""),zp=(0,S.A)("div",{target:"embh3ih2"})((function(){return{display:"flex",alignItems:"center"}}),""),Bp=(0,S.A)("div",{target:"embh3ih1"})((function(){return{background:"","&.toggler-component-wrapper--disabled":{opacity:.4,pointerEvents:"none",cursor:"default"}}}),""),Rp=(0,S.A)("svg",{target:"embh3ih0"})((function(){return{"&.handCursor":{cursor:"\n      url('data:image/svg+xml;base64,PHN2ZwogICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICB3aWR0aD0iMjQiCiAgICAgICAgaGVpZ2h0PSIyNCIKICAgICAgICBmaWxsPSJub25lIgogICAgICAgIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjMDAwIgogICAgICAgICAgICBkPSJNMjAuNDM0IDcuNjczYy0uMS0uNi0uNzEzLTEuNzMxLTIuMzItMS43MzEtLjEyNiAwLS4yNTIuMDA3LS4zNzcuMDIzdi0uNzlhMS4wMSAxLjAxIDAgMCAwLS4wNDUtLjNjLS4xNzctLjU2NC0uODc2LTEuNjMxLTIuMjYyLTEuNjMxYTIuNTk5IDIuNTk5IDAgMCAwLS42NzYuMDg2IDIuMzk0IDIuMzk0IDAgMCAwLS4xNDYtLjIzYy0uNDUzLS42NDUtMS4xODYtMS0yLjA2My0xLS44NzcgMC0xLjU4NC4zNi0yLjAyNSAxLjAxN2EyLjQ2MSAyLjQ2MSAwIDAgMC0uMzYxLjg1IDIuNjYzIDIuNjYzIDAgMCAwLS40MDgtLjAzYy0xLjQ3NCAwLTIuMTI0IDEuMTUtMi4yNjIgMS43NTdhMS4wMzQgMS4wMzQgMCAwIDAtLjAyNC4yMjJWMTEuMWwtLjEzLS4xYy0uNTg4LS41LTIuMDM0LTEuMTIxLTMuMzkxLjAyOS0xLjM1NyAxLjE1LTEuMDE1IDIuNjY0LS40MzEgMy40NTIuNDUzLjc3MyA0LjUxMiA3LjQyNSAxMC4yMjMgNy40MjUgMy4yNSAwIDQuOTEtMS41MTIgNS43MjktMi43ODFhNi4yOTEgNi4yOTEgMCAwIDAgLjk4LTIuOFY3LjgzOGMuMDAxLS4wNTYtLjAwMy0uMTEtLjAxMS0uMTY1WiIKICAgIC8+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjZmZmIgogICAgICAgICAgICBzdHJva2U9IiNmZmYiCiAgICAgICAgICAgIGQ9Ik0xOC40NDggMTYuMjE1YTQuNDc0IDQuNDc0IDAgMCAxLS43IDEuODg3Yy0uODA1IDEuMi0yLjE1MyAxLjgtNC4wMDggMS44LTQuNzY4IDAtOC40ODQtNi40MTItOC41Mi02LjQ3NmEuNjY5LjY2OSAwIDAgMC0uMDktLjEyNmMtLjI5NC0uNDA4IDAtLjY1NS4xMDctLjc0OC4yNjctLjIyNy41NC0uMjM3LjgxLS4wMzFsMS43NyAxLjQ1MmExIDEgMCAwIDAgMS42NDQtLjc2M1Y2LjA4YS4yODcuMjg3IDAgMCAxIC4yOS0uMTQ4LjQ0LjQ0IDAgMCAxIC4zNzIuMTZ2NC43YTEgMSAwIDEgMCAyIDB2LTYuNDVjLjA2OC0uMjQ4LjMtLjI0OC40MjItLjI0OC4yIDAgLjQxNC4wMzIuNDgyLjI1NXY2LjQ0YTEgMSAwIDEgMCAyIDB2LTUuMmEuNzUuNzUgMCAwIDEgLjA3NC0uMTljLjA0OS0uMDgxLjEwOC0uMTUuMzI1LS4xNWEuMzUuMzUgMCAwIDEgLjMwNy4xNXY1LjM5YTEgMSAwIDEgMCAyIDBWOC4wNDdhLjU4My41ODMgMCAwIDEgLjM3Ny0uMWMuMDY1IDAgLjI1OC4wMDYuMzM0LjA3OGwuMDA0IDguMTlaIgogICAgLz4KPC9zdmc+Cg=='),\n      auto\n    "},"&.handCursorGrabbing":{cursor:"\n      url('data:image/svg+xml;base64,PHN2ZwogICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgd2lkdGg9IjI0IgogICAgaGVpZ2h0PSIyNCIKICAgIGZpbGw9Im5vbmUiCiAgICB2aWV3Qm94PSIwIDAgMzAgMzAiCiAgPgogICAgPHBhdGgKICAgICAgZmlsbD0iI2ZmZiIKICAgICAgZD0iTTEwLjc0NCAzQzguODkgMyA3LjM4NCA0LjUyNSA3LjM4NCA2LjR2LjIyaC0uMDEyYy0xLjk5NyAwLTMuNjIyIDEuNjAyLTMuNjIyIDMuNTY4bC4wMDEgNy4wMmMwIDEuNzcgMS41MTIgMy41MTUgMy4xMTIgNS4zNjEuNzIuODMgMS45MTkgMi4yMTYgMi4wMzQgMi43MzF2MS41MjJoMTMuNDQydi0xLjU1NGMwLS41OS42MTgtMS43NyAxLjE2My0yLjgxLjkzOC0xLjc4OSAxLjk5OC0zLjgxNSAxLjk5OC01Ljk5MSAwLTMuMjU4LS4wMS02LjI0OC0uMDEtNi4yNDggMC0xLjY5Ni0xLjM5LTMuMDgtMy4xLTMuMDgtLjIwMyAwLS40LjAyLS41OTIuMDU3YTMuNjUgMy42NSAwIDAgMC0zLjAzMy0xLjYwN2MtLjM2NyAwLS43Mi4wNTMtMS4wNTUuMTUzYTMuNjM2IDMuNjM2IDAgMCAwLTMuMDktMS43MDVjLS40NDQgMC0uODcuMDgtMS4yNjQuMjI1QTMuMzQ1IDMuMzQ1IDAgMCAwIDEwLjc0NCAzWiIKICAgIC8+CiAgICA8cGF0aAogICAgICBmaWxsPSIjMDAwIgogICAgICBkPSJNMTAuNzQ0IDQuNTU0YzEgMCAxLjgwOC44MjYgMS44MDggMS44NDV2MS4xOTdjMC0xLjEwOS45MjctMi4wMDggMi4wNjgtMi4wMDggMS4xNDMgMCAyLjA2OC45IDIuMDY4IDIuMDA4djEuNTUyYzAtMS4xMS45My0yLjAwOCAyLjA3Ny0yLjAwOCAxLjE0NyAwIDIuMDc2Ljg5OSAyLjA3NiAyLjAwOHYxLjA2OEExLjU0IDEuNTQgMCAwIDEgMjIuMzkgOC42OWMuODU2IDAgMS41NDguNjg0IDEuNTQ4IDEuNTMgMCAwIC4wMSAyLjk4OC4wMSA2LjI0NCAwIDMuMjU3LTMuMTYxIDYuNjM2LTMuMTYxIDguODAySDEwLjQ1YzAtMS45NC01LjE0Ni01Ljc3My01LjE0Ni04LjA2MXYtNy4wMmMwLTEuMTEyLjkyNi0yLjAxNCAyLjA3LTIuMDE1djQuMDUxYzAgLjM0Mi4zNS42Mi43ODEuNjIuNDMyIDAgLjc4Mi0uMjc4Ljc4Mi0uNjJWNi40YzAtMS4wMi44MDktMS44NDUgMS44MDctMS44NDVabTAtMS41NTRDOC44OSAzIDcuMzg0IDQuNTI1IDcuMzg0IDYuNHYuMjJoLS4wMTJjLTEuOTk3IDAtMy42MjIgMS42MDItMy42MjIgMy41NjhsLjAwMSA3LjAyYzAgMS43NyAxLjUxMiAzLjUxNSAzLjExMiA1LjM2MS43Mi44MyAxLjkxOSAyLjIxNiAyLjAzNCAyLjczMXYxLjUyMmgxMy40NDJ2LTEuNTU0YzAtLjU5LjYxOC0xLjc3IDEuMTYzLTIuODEuOTM4LTEuNzg5IDEuOTk4LTMuODE1IDEuOTk4LTUuOTkxIDAtMy4yNTgtLjAxLTYuMjQ4LS4wMS02LjI0OCAwLTEuNjk2LTEuMzktMy4wOC0zLjEtMy4wOC0uMjAzIDAtLjQuMDItLjU5Mi4wNTdhMy42NSAzLjY1IDAgMCAwLTMuMDMzLTEuNjA3Yy0uMzY3IDAtLjcyLjA1My0xLjA1NS4xNTNhMy42MzYgMy42MzYgMCAwIDAtMy4wOS0xLjcwNWMtLjQ0NCAwLS44Ny4wOC0xLjI2NC4yMjVBMy4zNDUgMy4zNDUgMCAwIDAgMTAuNzQ0IDNaIgogICAgLz4KICA8L3N2Zz4='),\n      auto\n    "}}}),"");function qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Up(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Kp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kp(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Kp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wp=(0,S.A)("div",{target:"ex562360"})({name:"1vtgpt7",styles:"position:absolute;top:0;left:0;height:100%;width:100%;display:flex;justify-content:center;align-items:center"}),Gp=function(){return(0,o.Y)(Wp,{children:(0,o.Y)(Xl,{})})};var Vp=(0,S.A)("div",{target:"e1yct69a0"})({name:"14ocoqf",styles:"display:flex;& svg:first-of-type{display:flex;justify-content:center;align-items:center;width:24px;height:24px;padding:2px;border-radius:4px;}"}),Zp=function(e){var t=(0,a.useState)(!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)),n=(0,r.A)(t,2),i=n[0],l=n[1];return(0,o.Y)(Vp,{className:e.className,children:(0,o.Y)(k.K0,{onClick:function(){var e,t=document.querySelector(k.tS)||document.documentElement;i?document.exitFullscreen&&document.exitFullscreen()||document.msExitFullscreen&&document.msExitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=t).requestFullscreen&&e.requestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),l(!i)},iconName:i?"fullscreen-exit":"fullscreen-enter"})})},$p=a.createContext({}),Qp=function(){return a.useContext($p)};var Xp=(0,S.A)(k.K0,{target:"e1erwxoo0"})({name:"1y95nj0",styles:"margin:2px;outline:none"});var Jp=function(e){var t=e.itemId,n=e.title,r=void 0===n?"":n,i=e.disabled,l=e.testId,c=e.onClick,u=Qp(),s=u.isActive,d=u.activate,f=(0,a.useCallback)((function(){d(t),function(){var e;null===(e=document.activeElement)||void 0===e||e.blur()}(),c&&c()}),[d,t]),p=s(t),h=p?" active":"";return(0,o.Y)(Xp,{title:r,className:t+h,isActive:p,onClick:f,iconName:t,testId:l,disabled:i})};var eh=(0,S.A)(k.In,{shouldForwardProp:function(e){return"isActive"!==e},target:"e13kdqxv4"})("position:absolute;height:7px;width:7px;right:2px;bottom:2px;cursor:pointer;path{fill:",(function(e){return e.isActive?"white":void 0}),";}"),th=(0,S.A)("div",{target:"e13kdqxv3"})({name:"k5saax",styles:"display:flex;position:relative;align-items:center;&:active{.dropdown{fill:white;}}"}),nh=(0,S.A)("div",{target:"e13kdqxv2"})("display:flex;position:absolute;left:",(function(e){return e.isVertical?"-34px":"5px"}),";top:",(function(e){var t=e.isVertical,n=e.islayoutModeButton;return t&&n?"24px":t?"38px":"0px"}),";border-radius:4px;flex-direction:",(function(e){return e.isVertical?"column":"row"}),";z-index:1;background-color:white;padding:2px;"),rh=(0,S.A)(_.A,{target:"e13kdqxv1"})({name:"bjn8wh",styles:"position:relative"}),oh=(0,S.A)("div",{target:"e13kdqxv0"})({name:"a1qh1t",styles:"display:flex;align-items:center;position:relative;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px"}),ih=function(e){var t=e.children,n=e.vertical,i=void 0!==n&&n,l=e.disabled,c=void 0!==l&&l,u=e.needOpenByMenuItemClick,s=void 0!==u&&u,d=e.testId,f=e.layoutModeButton,p=void 0!==f&&f,h=(0,a.useState)(!1),m=(0,r.A)(h,2),v=m[0],g=m[1],y=Qp().isActive,b=function(){c||g((function(e){return!e}))},x=function(){v&&g(!1)},w=a.Children.map(t,(function(e){return e.type===Jp?e:null})),A=w.map((function(e){return e.props.itemId})).filter((function(e){return e})),M=A.filter((function(e){return y(e)})),C=M.length?M[0]:A[0],k=w.find((function(e){return e.props.itemId===C})),S=null===k||void 0===k?void 0:k.props.testId,O=null===k||void 0===k?void 0:k.props.title;return(0,o.FD)(th,{"data-testid":d,children:[(0,o.FD)(oh,{children:[(0,o.Y)(Jp,{disabled:c,itemId:C,title:O,testId:S,onClick:s?b:ua}),v||(0,o.Y)(eh,{className:"dropdown",name:"dropdown",onClick:b,isActive:y(C)})]}),(0,o.Y)(rh,{in:v,timeout:"auto",unmountOnExit:!0,onClick:x,children:(0,o.Y)(z.x,{onClickAway:x,children:(0,o.Y)(nh,{isVertical:i,islayoutModeButton:p,children:w.map((function(e){return e}))})})})]})},ah=(0,S.A)("div",{target:"e1fh0ozy3"})((function(e){var t=e.theme,n=e.isHorizontal;return{backgroundColor:t.ketcher.color.background.primary,borderRadius:"4px",display:"flex",flexDirection:n?"row":"column"}}),""),lh=(0,S.A)("hr",{target:"e1fh0ozy2"})("width:18px;margin:6px 0;align-self:center;border-width:thin 0px 0px 0px;border-style:solid;border-color:",(function(e){return e.theme.ketcher.color.divider}),";"),ch=(0,S.A)("hr",{target:"e1fh0ozy1"})("height:18px;margin:0px 6px;align-self:center;border-width:0px thin 0px 0px;border-style:solid;border-color:",(function(e){return e.theme.ketcher.color.divider}),";"),uh=(0,S.A)("div",{target:"e1fh0ozy0"})((function(e){var t=e.theme,n=e.isHorizontal;return{display:"flex",flexDirection:n?"row":"column",flexWrap:"nowrap",alignItems:"center",backgroundColor:t.ketcher.color.background.primary,borderRadius:"2px",width:n?void 0:"32px",marginBottom:n?void 0:"8px","> :last-child":n?void 0:{marginBottom:0}}}),""),sh=function(e){var t=e.children,n=e.divider,r=void 0!==n&&n,i=e.isHorizontal,l=a.Children.map(t,(function(e){return e.type===Jp||e.type===ih?e:null}));return(0,o.FD)(o.FK,{children:[(0,o.Y)(uh,{isHorizontal:i,children:l.map((function(e){return e}))}),r&&(i?(0,o.Y)(ch,{}):(0,o.Y)(lh,{}))]})},dh=function(e){var t=e.children,n=e.onItemClick,r=e.activeMenuItems,i=e.testId,l=e.isHorizontal,c=a.useMemo((function(){return{isActive:function(e){return!!r&&r.includes(e)},activate:function(e){n(e)}}}),[r,n]),u=a.Children.map(t,(function(e){return e.type===sh?e:null}));return(0,o.Y)($p.Provider,{value:c,children:(0,o.Y)(ah,{"data-testid":i,isHorizontal:l,children:u.map((function(e){return e}))})})};dh.Group=sh,dh.Item=Jp,dh.Submenu=ih;var fh=function(){var e=ta(Er),t=na(),n=(0,a.useState)(t),i=(0,r.A)(n,2),l=i[0],c=i[1],u=ta(jr),s={isActive:function(e){return l===e},activate:function(t){t!==l&&(c(t),e.events.selectMode.dispatch(t),e.events.layoutModeChange.dispatch(t))}};return(0,a.useEffect)((function(){c(t)}),[t]),(0,o.Y)($p.Provider,{value:s,children:(0,o.FD)(dh.Submenu,{disabled:u,testId:"layout-mode",vertical:!0,needOpenByMenuItemClick:!0,layoutModeButton:!0,children:[(0,o.Y)(dh.Item,{itemId:"sequence-layout-mode",testId:"sequence-layout-mode",title:"Switch to sequence layout mode"}),(0,o.Y)(dh.Item,{itemId:"snake-layout-mode",testId:"snake-layout-mode",title:"Switch to snake layout mode"}),(0,o.Y)(dh.Item,{itemId:"flex-layout-mode",testId:"flex-layout-mode",title:"Switch to flex layout mode"})]})})};function ph(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return hh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hh(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function hh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mh(e){var t=e.node;return t instanceof h.Nucleotide||t instanceof h.Nucleoside||(null===t||void 0===t?void 0:t.monomer)instanceof h.Phosphate}var vh,gh=function(e){if(null!==e&&void 0!==e&&e.length){for(var t=(0,s.flatten)(e),n=t.length,r=bl(t),o=!1,i=!0,a=!1,l=!0,c=function(e){var t,n=[],r=ph(e);try{for(r.s();!(t=r.n()).done;){var o,i,a,l=t.value,c=l.node,u=l.nodeIndexOverall,s=l.isNucleosideConnectedAndSelectedWithPhosphate,d=l.hasR1Connection,f=l.twoStrandedNode,p=Boolean(null===f||void 0===f?void 0:f.antisenseNode);if(c instanceof h.Nucleotide)n.push({type:h.Entities.Nucleotide,baseLabel:null===c||void 0===c||null===(o=c.rnaBase)||void 0===o?void 0:o.label,sugarLabel:null===c||void 0===c||null===(i=c.sugar)||void 0===i?void 0:i.label,phosphateLabel:null===c||void 0===c||null===(a=c.phosphate)||void 0===a?void 0:a.label,hasR1Connection:d,nodeIndexOverall:u,hasAntisense:p});else if(c instanceof h.Nucleoside){var m,v;n.push({type:h.Entities.Nucleoside,baseLabel:null===c||void 0===c||null===(m=c.rnaBase)||void 0===m?void 0:m.label,sugarLabel:null===c||void 0===c||null===(v=c.sugar)||void 0===v?void 0:v.label,isNucleosideConnectedAndSelectedWithPhosphate:s,hasR1Connection:d,nodeIndexOverall:u,hasAntisense:p})}else if((null===c||void 0===c?void 0:c.monomer)instanceof h.Phosphate){var g;n.push({type:h.Entities.Phosphate,phosphateLabel:null===c||void 0===c||null===(g=c.monomer)||void 0===g?void 0:g.label,nodeIndexOverall:u,hasAntisense:p})}}}catch(y){r.e(y)}finally{r.f()}return n}(t),u=0;u<c.length;u++){var d=c[u],f=c[u-1],p=d.type===h.Entities.Nucleotide||d.type===h.Entities.Nucleoside,m=null===f||void 0===f?void 0:f.isNucleosideConnectedAndSelectedWithPhosphate;p&&(o=!0),p||m?d.hasR1Connection&&(l=!1):(l=!1,i=!1),d.hasAntisense&&(a=!0)}return n>r&&(t.every(mh)||(i=!1)),{title:1===n||1===r&&i?function(e){for(var t="",n=1===e.length?e[0]:s.merge.apply(void 0,[{}].concat((0,y.A)(e))),r=0,o=["sugarLabel","baseLabel","phosphateLabel"];r<o.length;r++){var i=o[r],a=(0,s.get)(n,i,"");t+="baseLabel"===i?"(".concat(a,")"):a}return t}(c):i?"".concat(r," nucleotides"):"".concat(n," elements"),selectedSequenceLabeledNodes:c,isSelectedOnlyNucleoelements:i,isSelectedAtLeastOneNucleoelement:o,isSequenceFirstsOnlyNucleoelementsSelected:l,hasAntisense:a}}};!function(e){e.title="sequence_menu_title",e.modifyInRnaBuilder="modify_in_rna_builder",e.editSequence="edit_sequence",e.startNewSequence="start_new_sequence"}(vh||(vh={}));var yh=function(e){var t=e.selections,n=ta(Er),r=ea(),i=gh(t),a=ta(jr),l=na()===h.ModeTypes.sequence,c=[{name:vh.title,title:null===i||void 0===i?void 0:i.title,isMenuTitle:!0,disabled:!0,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)||!(null!==i&&void 0!==i&&i.isSelectedAtLeastOneNucleoelement)}},{name:vh.modifyInRnaBuilder,title:"Modify in RNA Builder...",disabled:!(null!==i&&void 0!==i&&i.isSelectedOnlyNucleoelements)||i.hasAntisense,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)||!(null!==i&&void 0!==i&&i.isSelectedAtLeastOneNucleoelement)}},{name:vh.editSequence,title:"Edit sequence",disabled:!1,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:vh.startNewSequence,title:"Start new sequence",disabled:!1}],u=document.querySelector(k.tS);return u&&l&&!a?(0,K.createPortal)((0,o.Y)(La,{id:ka.FOR_SEQUENCE,handleMenuChange:function(e){var t,o=e.id,a=e.props;switch(o){case vh.modifyInRnaBuilder:n.events.turnOnSequenceEditInRNABuilderMode.dispatch(),r(yo(Xr)),r(Ai(!0)),r(fi({})),r(vi(null)),null!==i&&void 0!==i&&null!==(t=i.selectedSequenceLabeledNodes)&&void 0!==t&&t.length&&null!==i&&void 0!==i&&i.title&&(r(hi(null===i||void 0===i?void 0:i.title)),r(pi(null===i||void 0===i?void 0:i.selectedSequenceLabeledNodes)),r(mi(null===i||void 0===i?void 0:i.isSequenceFirstsOnlyNucleoelementsSelected)));break;case vh.startNewSequence:n.events.startNewSequence.dispatch(a.sequenceItemRenderer);break;case vh.editSequence:n.events.editSequence.dispatch(a.sequenceItemRenderer)}},menuItems:c}),u):null};var bh=(0,S.A)("div",{target:"e1amohl43"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",(function(e){return e.theme.ketcher.color.background.primary}),";border:",(function(e){return e.theme.ketcher.border.regular}),";border-radius:",(function(e){return e.theme.ketcher.border.radius.regular}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";"),xh=(0,S.A)("p",{target:"e1amohl42"})("width:calc(100% - 16px);padding:8px;color:",(function(e){return e.theme.ketcher.color.text.primary}),";background-color:#cceaee;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:700;word-break:break-all;text-align:left;margin:0;"),wh=(0,S.A)(k.c9,{target:"e1amohl41"})({name:"156nqlv",styles:"height:100%;width:100%;padding:0 8px"}),Ah=(0,S.A)("div",{target:"e1amohl40"})({name:"10sp49k",styles:"width:100%;display:flex;gap:8px;padding:0 8px 4px"}),Mh=function(e){var t=e.monomerCaps,n=e.attachmentPointsToBonds;return(0,a.useMemo)((function(){var e=[],o=[];return t?(Object.entries(t).forEach((function(t){var i=(0,r.A)(t,2),a=i[0],l=i[1],c=Boolean(null===n||void 0===n?void 0:n[a]);c&&o.push(a);var u={id:a,label:_u(l),connected:c};e.push(u)})),{preparedAttachmentPointsData:e,connectedAttachmentPoints:o}):{preparedAttachmentPointsData:e,connectedAttachmentPoints:o}}),[t,n])};var Ch=(0,S.A)("div",{target:"e112ss7f3"})({name:"1m2mukt",styles:"flex:1;display:flex;align-items:center;flex-wrap:wrap;gap:8px;font-size:12px;line-height:14px"}),kh=(0,S.A)("div",{target:"e112ss7f2"})("display:flex;align-items:center;gap:2px;border-radius:4px;background-color:",(function(e){return e.connected?"#E1E5EA":"transparent"}),";padding:",(function(e){return e.connected?"4px":"0"}),";color:",(function(e){return e.connected?"#8A8B8E":"inherit"}),";"),Sh=(0,S.A)("span",{target:"e112ss7f1"})({name:"f3vz0n",styles:"font-weight:500"}),Oh=(0,S.A)("span",{target:"e112ss7f0"})({name:"16ceglb",styles:"font-weight:600"}),Ih=(0,a.memo)((function(e){var t=e.preparedAttachmentPointsData;return t.length?(0,o.Y)(Ch,{children:t.map((function(e){var t=e.id,n=e.connected,r=e.label;return(0,o.FD)(kh,{connected:n,children:[(0,o.FD)(Sh,{children:[t,!n&&":"]}),!n&&(0,o.Y)(Oh,{children:r})]},t)}))}):null}));var Eh=(0,S.A)("span",{target:"e1v1msbx3"})("max-width:",(function(e){return e.preset?"100%":"50%"}),";display:flex;align-items:center;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:500;line-height:normal;color:",(function(e){return e.theme.ketcher.color.text.lightgrey}),";padding-left:",(function(e){return e.preset?"0":"8px"}),";border-left:",(function(e){return e.preset?"none":"1px solid #D9DCEA"}),";"),jh=(0,S.A)("p",{target:"e1v1msbx2"})({name:"ti75j2",styles:"margin:0"}),Ph=(0,S.A)("span",{target:"e1v1msbx1"})({name:"1b7n4tc",styles:"color:#7c7c7c"}),Dh=(0,S.A)("span",{target:"e1v1msbx0"})({name:"dtvj5",styles:"color:#585858;text-wrap:wrap"}),Nh=(0,a.memo)((function(e){var t=e.idtAliasesText,n=e.preset;return(0,o.Y)(Eh,{preset:n,children:(0,o.FD)(jh,{children:[(0,o.Y)(Ph,{children:"IDT: "}),(0,o.Y)(Dh,{children:t})]})})})),Lh=(0,S.A)((function(e){var t,n=e.className,i=ta(Or),l=i.monomer,c=i.attachmentPointsToBonds,u=null===l||void 0===l?void 0:l.props.idtAliases,s=Mh({monomerCaps:null===l||void 0===l?void 0:l.props.MonomerCaps,attachmentPointsToBonds:c}),d=s.preparedAttachmentPointsData,f=s.connectedAttachmentPoints,p=function(e){var t=e.idtAliases,n=e.attachmentPointsToBonds,o=e.monomerClass;return(0,a.useMemo)((function(){if(!t)return null;var e=t.base,i=t.modifications;if(n){if(!i)return e;var a,l,c=i.endpoint5,u=i.internal,s=i.endpoint3,d=n.R1,f=n.R2;return o===h.KetMonomerClass.Phosphate&&d&&!(d instanceof h.MonomerToAtomBond)&&d.firstMonomer instanceof h.Sugar?null:null!==d&&null===f?null!==s&&void 0!==s?s:u:null===d&&null!==f?null!==c&&void 0!==c?c:u:null!==d&&null!==f?null!==(a=null!==u&&void 0!==u?u:c)&&void 0!==a?a:s:null!==(l=null!==c&&void 0!==c?c:u)&&void 0!==l?l:s}if(!i)return e;if(Object.values(i).every((function(t){return t.includes(e)})))return e;var p={};return Object.values(i).forEach((function(e){var t=[e.charAt(0),e.slice(1)],n=t[0],r=t[1];p[r]=p[r]?[].concat((0,y.A)(p[r]),[n]):[n]})),Object.entries(p).map((function(e){var t=(0,r.A)(e,2),n=t[0],o=t[1];return"(".concat(o.join(", "),")").concat(n)})).join(", ")}),[t,n,o])}({idtAliases:u,attachmentPointsToBonds:c,monomerClass:null===l||void 0===l?void 0:l.props.MonomerClass});if(!l)return null;var m=l.props.unresolved,v=m?l.label:null===(t=l.struct)||void 0===t?void 0:t.name;return(l.struct||m)&&(0,o.FD)(bh,{className:n,"data-testid":"polymer-library-preview",children:[v&&(0,o.Y)(xh,{children:v}),m?(0,o.Y)(qu,{}):(0,o.Y)(wh,{struct:l.struct,options:{connectedMonomerAttachmentPoints:f,usageInMacromolecule:h.UsageInMacromolecule.MonomerPreview,labelInPreview:!0,needCache:!1}}),(0,o.FD)(Ah,{children:[(0,o.Y)(Ih,{preparedAttachmentPointsData:d}),p&&(0,o.Y)(Nh,{idtAliasesText:p})]})]})}),{target:"e86yc5p0"})("width:",k.VH.width+"px",";height:",k.VH.height+"px",";");var Fh=(0,S.A)("div",{target:"ec5fs975"})("display:flex;flex-direction:column;align-items:center;gap:8px;padding:8px;background:",(function(e){return e.theme.ketcher.color.background.primary}),";border:",(function(e){return e.theme.ketcher.border.regular}),";border-radius:",(function(e){return e.theme.ketcher.border.radius.regular}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";"),Yh=(0,S.A)("div",{target:"ec5fs974"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Th=(0,S.A)("div",{target:"ec5fs973"})("font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";line-height:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:600;padding-right:2px;"),_h=(0,S.A)("div",{target:"ec5fs972"})("color:",(function(e){return e.theme.ketcher.color.text.lightgrey}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:400;white-space:nowrap;"),zh=(0,S.A)("p",{target:"ec5fs971"})("color:",(function(e){return e.theme.ketcher.color.text.primary}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:700;word-break:break-all;text-align:center;margin-top:0;margin-bottom:8px;"),Bh=(0,S.A)(k.In,{target:"ec5fs970"})("color:",(function(e){return e.theme.ketcher.color.icon.grey}),";padding-right:",(function(e){return"sugar"===e.name?"4px":"phosphate"===e.name?"1px":0}),";padding-left:",(function(e){return"base"===e.name?"2px":"phosphate"===e.name?"1px":0}),";stroke:",(function(e){return e.theme.ketcher.color.icon.grey}),";height:",(function(e){return"sugar"===e.name?"12px":"14px"}),";width:",(function(e){return"sugar"===e.name?"12px":"14px"}),";"),Rh=["sugar","base","phosphate"],qh=(0,S.A)((function(e){var t=e.className,n=ta(Or),i=n.monomers,l=n.name,c=n.position,u=n.idtAliases,s=(0,r.A)(i,2)[1],d=null!==l&&void 0!==l?l:null===s||void 0===s?void 0:s.props.Name,f=function(e){var t=e.presetName,n=e.position,r=e.idtAliases;return(0,a.useMemo)((function(){if(!t||!r)return null;if(t.includes("MOE")){var e,o,i,a=r.base,l=r.modifications,c=null!==(e=null===l||void 0===l?void 0:l.endpoint5)&&void 0!==e?e:"5".concat(a),u=null!==(o=null===l||void 0===l?void 0:l.internal)&&void 0!==o?o:"i".concat(a),s=null!==(i=null===l||void 0===l?void 0:l.endpoint3)&&void 0!==i?i:"3".concat(a);switch(n){case vr.Library:return"".concat(c,", ").concat(u);case vr.ChainStart:return c;case vr.ChainMiddle:return u;case vr.ChainEnd:return s}}return r.base}),[t,n,r])}({presetName:d,position:c,idtAliases:u});return(0,o.FD)(Fh,{className:t,style:{alignItems:"flex-start"},"data-testid":"polymer-library-preview",children:[(0,o.Y)(zh,{children:d}),i.map((function(e,t){return e&&(0,o.FD)(Yh,{children:[(0,o.Y)(Bh,{name:Rh[t]}),(0,o.Y)(Th,{children:e.label}),(0,o.FD)(_h,{children:["(",e.props.Name,")"]})]},t)})),f&&(0,o.Y)(Nh,{idtAliasesText:f,preset:!0})]})}),{target:"e1wupxfd0"})(""),Hh=(0,S.A)("div",{target:"envzkt90"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",(function(e){return e.theme.ketcher.color.background.primary}),";border:",(function(e){return e.theme.ketcher.border.regular}),";border-radius:",(function(e){return e.theme.ketcher.border.radius.regular}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";"),Uh=(0,S.A)("div",{target:"e1m0yzrp2"})((function(e){var t=e.connected,n=e.inBond,r=e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",color:n||!t?r.ketcher.color.text.primary:"#B4B9D6"}}),""),Kh=(0,S.A)("p",{target:"e1m0yzrp1"})((function(e){return{margin:0,fontSize:e.theme.ketcher.font.size.small,lineHeight:"12px"}}),""),Wh=(0,S.A)("p",{target:"e1m0yzrp0"})((function(e){var t=e.inBond;return{margin:0,padding:"4px",fontWeight:e.theme.ketcher.font.weight.bold,lineHeight:"14px",borderRadius:"4px",backgroundColor:t?"#CDF1FC":"transparent"}}),""),Gh=function(e){var t=e.attachmentPoints,n=e.attachmentPointInBond;return(0,o.Y)(o.FK,{children:t.map((function(e){return(0,o.FD)(Uh,{connected:e.connected,inBond:e.id===n,children:[(0,o.Y)(Kh,{children:e.id}),(0,o.Y)(Wh,{inBond:e.id===n,children:e.label})]},e.id)}))})},Vh=(0,S.A)((function(e){var t=e.className,n=ta(Or),r=n.polymerBond,i=n.style,l=(0,a.useMemo)((function(){return i?(0,S.A)(Hh,{target:"e18hk05c1"})("top:",(null===i||void 0===i?void 0:i.top)||"",";left:",(null===i||void 0===i?void 0:i.left)||"",";right:",(null===i||void 0===i?void 0:i.right)||"",";"):(0,S.A)(Hh,{target:"e18hk05c2"})("")}),[i]),c=r.firstMonomer,u=r.secondMonomer,s=r.firstMonomerAttachmentPoint,d=r.secondMonomerAttachmentPoint,f=Mh({monomerCaps:c.monomerCaps,attachmentPointsToBonds:c.attachmentPointsToBonds}),p=f.preparedAttachmentPointsData,m=f.connectedAttachmentPoints,v=Mh({monomerCaps:null===u||void 0===u?void 0:u.monomerCaps,attachmentPointsToBonds:null===u||void 0===u?void 0:u.attachmentPointsToBonds}),g=v.preparedAttachmentPointsData,y=v.connectedAttachmentPoints;return c&&u?(0,o.Y)(l,{className:t,"data-testid":"polymer-library-preview",children:(0,o.Y)(fp,{firstMonomer:c,secondMonomer:u,firstMonomerOverview:(0,o.Y)(lp,{monomer:c,usage:h.UsageInMacromolecule.BondPreview,connectedAttachmentPoints:m,selectedAttachmentPoint:s,attachmentPoints:(0,o.Y)(Gh,{attachmentPoints:p,attachmentPointInBond:s})}),secondMonomerOverview:(0,o.Y)(lp,{monomer:u,usage:h.UsageInMacromolecule.BondPreview,connectedAttachmentPoints:y,selectedAttachmentPoint:d,attachmentPoints:(0,o.Y)(Gh,{attachmentPoints:g,attachmentPointInBond:d})})})}):null}),{target:"e18hk05c0"})("width:",k.VH.widthForBond,"px;height:",k.VH.heightForBond,"px;");function Zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zh(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qh=(0,S.A)("div",{target:"e88xzqx0"})((function(){return{display:"inline-block",position:"absolute",background:"white"}}),""),Xh=function(){var e=ta(Or),t=(0,a.useRef)(null),n=(0,a.useState)(!1),i=(0,r.A)(n,2),l=i[0],c=i[1];return(0,a.useEffect)((function(){if(t.current&&!e.style)if(e&&e.type){var n,r,o;t.current.setAttribute("style",""),c(!0);var i=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect(),a=(null===i||void 0===i?void 0:i.height)||0,u=(null===i||void 0===i?void 0:i.width)||0,s=null===(r=h.ZoomTool.instance)||void 0===r||null===(r=r.canvasWrapper.node())||void 0===r?void 0:r.getBoundingClientRect(),d=(null===s||void 0===s?void 0:s.bottom)||0,f=(null===s||void 0===s?void 0:s.left)||0,p=(null===s||void 0===s?void 0:s.right)||0,m=null===(o=e.target)||void 0===o?void 0:o.getBoundingClientRect(),v=(null===m||void 0===m?void 0:m.top)||0,g=(null===m||void 0===m?void 0:m.bottom)||0,y=(null===m||void 0===m?void 0:m.left)||0,b=(null===m||void 0===m?void 0:m.width)||0,x=y-b/2,w=v-a-5,A=g+5,M=y+b/2-u/2;if(t.current.style.top="".concat(v>a+5||g+a>d&&g>d/2?w:A,"px"),x>u/2&&x+u/2<p)t.current.style.left="".concat(M,"px");else if(x<u/2)t.current.style.left="".concat(f,"px");else{t.current.style.left="".concat(p-u-10,"px")}}else l&&(c(!1),t.current.setAttribute("style",""))}),[e]),e?(0,o.FD)(Qh,{ref:t,style:$h({},null===e||void 0===e?void 0:e.style),children:[e.type===mr.Monomer&&(0,o.Y)(Lh,{}),e.type===mr.Preset&&(0,o.Y)(qh,{}),e.type===mr.Bond&&(0,o.Y)(Vh,{}),e.type===mr.AmbiguousMonomer&&(0,o.Y)(k.ye,{preview:e})]}):null},Jh=(0,S.A)(B.A,{target:"e1brfei30"})((function(e){var t=e.theme,n=e.variant;return{color:"outlined"===n?t.ketcher.color.text.primary:t.ketcher.color.button.text.primary,boxShadow:"none",transition:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"4px 8px",border:"outlined"===n?t.ketcher.outline.small:"none",background:"outlined"===n?t.ketcher.color.background.primary:t.ketcher.color.button.group.active,borderRadius:t.ketcher.border.radius.regular,textTransform:"none",fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular,":hover":{color:"outlined"===n?t.ketcher.color.text.dark:t.ketcher.color.button.text.primary,background:"outlined"===n?t.ketcher.color.background.primary:t.ketcher.color.button.group.hover,boxShadow:"none"},":disabled":{cursor:"auto",background:"#e1e5ea",outline:"none"}}}),""),em=function(){var e=ta(Er),t=(0,a.useState)(null===e||void 0===e?void 0:e.events.changeSequenceTypeEnterMode),n=(0,r.A)(t,2),i=n[0],l=n[1],c=(0,a.useState)(!1),u=(0,r.A)(c,2),s=u[0],d=u[1],f=ta(jr),p=na(),m=!!f,v=ea(),g=function(e){var t="object"===(0,X.A)(e)?e.mode:e;d("sequence-layout-mode"===t)};(0,a.useEffect)((function(){return null===e||void 0===e||e.events.selectMode.add(g),null===e||void 0===e||e.events.changeSequenceTypeEnterMode.add((function(e){v(yo(e===Hr?Qr:Xr)),l(e)})),null===e||void 0===e||e.events.changeSequenceTypeEnterMode.dispatch(h.SequenceType.RNA),function(){null===e||void 0===e||e.events.selectMode.remove(g)}}),[e]),(0,a.useEffect)((function(){g(p)}),[p]);var y=function(t){e.events.changeSequenceTypeEnterMode.dispatch(t)};return s?(0,o.Y)(o.FK,{children:(0,o.Y)(R.A,{sx:{mr:1,ml:1},children:(0,o.FD)(q.A,{disabled:m,children:[(0,o.Y)(Jh,{"data-testid":"".concat(h.SequenceType.RNA,"Btn"),title:"RNA (Ctrl+Alt+R)",variant:i===h.SequenceType.RNA?"contained":"outlined",onClick:function(){return y(h.SequenceType.RNA)},children:"RNA"}),(0,o.Y)(Jh,{"data-testid":"".concat(h.SequenceType.DNA,"Btn"),title:"DNA (Ctrl+Alt+D)",variant:i===h.SequenceType.DNA?"contained":"outlined",onClick:function(){return y(h.SequenceType.DNA)},children:"DNA"}),(0,o.Y)(Jh,{"data-testid":"".concat(h.SequenceType.PEPTIDE,"Btn"),title:"Peptides (Ctrl+Alt+P)",variant:i===h.SequenceType.PEPTIDE?"contained":"outlined",onClick:function(){return y(h.SequenceType.PEPTIDE)},children:"PEP"})]})})}):null},tm=(0,h.generateMenuShortcuts)(h.hotkeysConfiguration);function nm(){var e=ea(),t=ta(Ir),n=ta(Er),r=ta(jr),i=[t],a=r;return(0,o.FD)(dh,{onItemClick:function(t){wp[t]?e(Co(t)):"undo"===t||"redo"===t?n.events.selectHistory.dispatch(t):"clear"===t&&(n.events.selectTool.dispatch([t]),e(Mr("select-rectangle")),n.events.selectTool.dispatch(["select-rectangle"]),r&&yl(e,n))},activeMenuItems:i,isHorizontal:!0,children:[(0,o.FD)(dh.Group,{isHorizontal:!0,divider:!0,children:[(0,o.Y)(dh.Item,{itemId:"clear",title:"Clear Canvas (".concat(tm.clear,")"),testId:"clear-canvas"}),(0,o.Y)(dh.Item,{itemId:"open",title:"Open...",disabled:a,testId:"open-button"}),(0,o.Y)(dh.Item,{itemId:"save",title:"Save as...",testId:"save-button"})]}),(0,o.FD)(dh.Group,{isHorizontal:!0,children:[(0,o.Y)(dh.Item,{itemId:"undo",title:"Undo (".concat(tm.undo,")"),disabled:a,testId:"undo"}),(0,o.Y)(dh.Item,{itemId:"redo",title:"Redo (".concat(tm.redo,")"),disabled:a,testId:"redo"})]})]})}var rm=(0,h.generateMenuShortcuts)(h.hotkeysConfiguration);function om(){var e=ta(Ir),t=ta(Er),n=na()===h.ModeTypes.sequence,r=[e];return(0,o.FD)(dh,{testId:"left-toolbar",onItemClick:function(e){t.events.selectTool.dispatch([e,{toolName:e}])},activeMenuItems:r,children:[(0,o.FD)(dh.Group,{divider:!0,children:[(0,o.Y)(dh.Item,{itemId:"hand",title:"Hand Tool",testId:"hand-tool"}),(0,o.Y)(dh.Item,{itemId:"select-rectangle",title:"Select Rectangle",testId:"select-rectangle"}),(0,o.Y)(dh.Item,{itemId:"erase",title:"Erase (".concat(rm.erase,")"),testId:"erase",disabled:n})]}),(0,o.Y)(dh.Group,{children:(0,o.FD)(dh.Submenu,{disabled:n,testId:"bond-tool-submenu",needOpenByMenuItemClick:!1,children:[(0,o.Y)(dh.Item,{itemId:"bond-single",title:"Single Bond (1)",testId:"single-bond",disabled:n}),(0,o.Y)(dh.Item,{itemId:"bond-hydrogen",title:"Hydrogen Bond (2)",testId:"hydrogen-bond",disabled:n})]})})]})}var im=(0,S.A)("div",{target:"e1aw4j3q7"})({name:"bjn8wh",styles:"position:relative"}),am=(0,S.A)(B.A,{target:"e1aw4j3q6"})("display:flex;color:",(function(e){return e.theme.ketcher.color.dropdown.primary}),";padding-right:0;padding-left:0;& svg{margin-left:2px;width:1rem;height:1rem;}"),lm=(0,S.A)("span",{target:"e1aw4j3q5"})({name:"td41hq",styles:"width:35px"}),cm=(0,S.A)(H.Ay,{target:"e1aw4j3q4"})("& .MuiPopover-paper{padding:8px;width:175px;border:none;border-radius:0px 0px 4px 4px;box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";box-sizing:border-box;}"),um=(0,S.A)("div",{target:"e1aw4j3q3"})({name:"5s1n17",styles:"display:flex;flex-direction:column;white-space:nowrap;word-break:keep-all;background:white"}),sm=(0,S.A)(B.A,{target:"e1aw4j3q2"})("display:flex;justify-content:space-between;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";line-height:14px;padding:7px 8px;text-transform:none;color:",(function(e){return e.theme.ketcher.color.dropdown.primary}),";"),dm=(0,S.A)("span",{target:"e1aw4j3q1"})({name:"btyqtq",styles:"color:#cad3dd"}),fm=(0,S.A)("input",{target:"e1aw4j3q0"})("border:1px solid #cad3dd;border-radius:4px;padding:3px 8px;color:",(function(e){return e.theme.ketcher.color.text.light}),";font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";line-height:16px;margin-bottom:8px;&:hover{border-color:",(function(e){return e.theme.ketcher.color.input.border.hover}),";}&:active,&:focus{border-color:",(function(e){return e.theme.ketcher.outline.selected.color}),";outline:none;}&::after,&::before{display:none;}"),pm=(0,h.generateMenuShortcuts)(h.hotkeysConfiguration),hm=function(e,t){t&&(t.value="".concat(Math.round(e),"%"))},mm=function(e){var t=e.onZoomSubmit,n=e.currentZoom,r=e.inputRef,i=(0,a.useCallback)((function(e){var n=r.current;n&&([pm["zoom-out"],pm["zoom-in"]].includes(e.key)||e.nativeEvent.stopImmediatePropagation(),"Enter"===e.key&&(t(),n.select()))}),[t,r,pm]);return(0,a.useEffect)((function(){var e=r.current;hm(n,e),document.activeElement===e&&(null===e||void 0===e||e.select())}),[n,r]),(0,a.useEffect)((function(){var e=r.current;null===e||void 0===e||e.focus(),null===e||void 0===e||e.select()}),[r]),(0,o.Y)(fm,{ref:r,"data-testid":"zoom-value",onFocus:function(e){e.target.select()},onKeyDown:i})},vm=function(){var e=(0,a.useState)(!1),t=(0,r.A)(e,2),n=t[0],i=t[1],l=(0,a.useState)(100),c=(0,r.A)(l,2),u=c[0],s=c[1],d=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)((function(){var e;null===h.ZoomTool||void 0===h.ZoomTool||null===(e=h.ZoomTool.instance)||void 0===e||e.subscribeOnZoomEvent((function(){var e;s(Math.round(100*(null===h.ZoomTool||void 0===h.ZoomTool||null===(e=h.ZoomTool.instance)||void 0===e?void 0:e.getZoomLevel())))}))}),[null===h.ZoomTool||void 0===h.ZoomTool?void 0:h.ZoomTool.instance]);var p=(0,a.useCallback)((function(){var e=f.current;if(e){var t=function(e){var t=parseInt(e||"");return isNaN(t)?0:t}(e.value);if(t&&t!==u){var n=function(e,t){if(0===e)return t;var n=100*h.ZoomTool.instance.MINZOOMSCALE,r=100*h.ZoomTool.instance.MAXZOOMSCALE;return e<n?n:e>r?r:e}(t,u);hm(n,e),h.ZoomTool.instance.zoomTo(n/100)}else hm(u,e)}}),[u]);return(0,o.FD)(im,{ref:d,children:[(0,o.FD)(am,{onClick:function(){i(!0)},"data-testid":"zoom-selector",children:[(0,o.FD)(lm,{"data-testid":"zoom-input",children:[u,"%"]}),(0,o.Y)(k.In,{name:"chevron"})]}),(0,o.Y)(cm,{open:n,onClose:function(){i(!1)},anchorEl:d.current,container:document.querySelector(k.tS),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,o.FD)(um,{children:[(0,o.Y)(mm,{onZoomSubmit:p,inputRef:f,currentZoom:u}),(0,o.FD)(sm,{"data-testid":"zoom-out-button",title:"Zoom Out",onClick:function(){h.ZoomTool.instance.zoomOut()},children:[(0,o.Y)("span",{children:"Zoom out"}),(0,o.Y)(dm,{children:pm["zoom-minus"]})]}),(0,o.FD)(sm,{"data-testid":"zoom-in-button",title:"Zoom In",onClick:function(){h.ZoomTool.instance.zoomIn()},children:[(0,o.Y)("span",{children:"Zoom in"}),(0,o.Y)(dm,{children:pm["zoom-plus"]})]}),(0,o.FD)(sm,{"data-testid":"reset-zoom-button",title:"Zoom 100%",onClick:function(){h.ZoomTool.instance.resetZoom()},children:[(0,o.Y)("span",{children:"Zoom 100%"}),(0,o.Y)(dm,{children:pm["zoom-reset"]})]})]})})]})},gm=function(){var e=ta(Er),t=document.querySelector(k.tS);return t?(0,K.createPortal)((0,o.Y)(La,{id:ka.FOR_POLYMER_BOND,handleMenuChange:function(t){var n=t.id,r=t.props;if("edit_connection_points"===n){var o=r.polymerBondRenderer.polymerBond;e.events.openMonomerConnectionModal.dispatch({firstMonomer:o.firstMonomer,secondMonomer:o.secondMonomer,polymerBond:o,isReconnectionDialog:!0}),e.events.startNewSequence.dispatch(r.sequenceItemRenderer)}},menuItems:[{name:"edit_connection_points",title:"Edit Connection Points...",disabled:!1,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.polymerBondRenderer)}}]}),t):null};function ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bm=["bond-single"],xm=function(){var e=ta(Er),t=ta(Ir),n=ea(),i=ta(ui),l=(0,a.useCallback)((function(){n(ho(null===e||void 0===e?void 0:e.monomersLibrary))}),[e]);(0,a.useEffect)((function(){return null===e||void 0===e||e.events.updateMonomersLibrary.add(l),function(){null===e||void 0===e||e.events.updateMonomersLibrary.remove(l)}}),[e]),(0,a.useEffect)((function(){var o=function(e){var o=(0,r.A)(e,1)[0];o!==t&&n(Mr(o))};return e&&(e.events.error.add((function(e){n(So(e))})),e.events.openErrorModal.add((function(e){n(Io(e))})),n(Mr("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add((function(e){return n(Co({name:"monomerConnection",additionalProps:e}))})),e.events.openConfirmationDialog.add((function(e){return n(Co({name:"confirmationDialog",additionalProps:e}))})),e.events.selectTool.add(o)),function(){n(Mr(null)),null===e||void 0===e||e.events.selectTool.remove(o)}}),[e]);var c=(0,a.useCallback)((function(e){return n(kr(e))}),[n]),u=(0,a.useCallback)((0,s.debounce)((function(e){return c(e)}),500),[c]);(0,a.useEffect)((function(){var o=function(e){var o=(0,r.A)(e,1)[0];o!==t&&n(Mr(o))};return e&&(e.events.error.add((function(e){n(So(e))})),e.events.openErrorModal.add((function(e){n(Io(e))})),n(Mr("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add((function(e){return n(Co({name:"monomerConnection",additionalProps:e}))})),e.events.selectTool.add(o)),function(){n(Mr(null)),null===e||void 0===e||e.events.selectTool.remove(o)}}),[e]);var d=(0,a.useCallback)((function(e,t){var n={type:mr.Bond,polymerBond:e,style:t};u(n)}),[u]),f=(0,a.useCallback)((function(e){var t,n,r,o=null===(t=e.target.__data__)||void 0===t?void 0:t.polymerBond;if(!(o&&!o.finished||o instanceof h.HydrogenBond))if(o){var a=(0,k.Xx)(o,e.target.getBoundingClientRect());d(o,a)}else{var l=null===(n=e.target.__data__)||void 0===n?void 0:n.node,c=(null===(r=e.target.__data__)||void 0===r?void 0:r.monomer)||(null===l||void 0===l?void 0:l.monomer);if(!(l&&l instanceof h.BackBoneSequenceNode))if(c instanceof h.AmbiguousMonomer){var s={type:mr.AmbiguousMonomer,monomer:c.variantMonomerItem,target:e.target};u(s)}else{var f=c.monomerItem,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ym(Object(n),!0).forEach((function(t){(0,b.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ym(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c.attachmentPointsToBonds);if(l instanceof h.Nucleotide||l instanceof h.Nucleoside){var m,v=l instanceof h.Nucleotide?[l.sugar.monomerItem,l.rnaBase.monomerItem,null===(m=l.phosphate)||void 0===m?void 0:m.monomerItem]:[l.sugar.monomerItem,l.rnaBase.monomerItem];if(l.rnaBase instanceof h.AmbiguousMonomer){var g={type:mr.AmbiguousMonomer,monomer:l.rnaBase.variantMonomerItem,presetMonomers:v,target:e.target};return void u(g)}var y,x=i.find((function(e){var t=[e.sugar,e.base,e.phosphate];return v.every((function(e,n){var r;return(null===e||void 0===e?void 0:e.props.Name)===(null===(r=t[n])||void 0===r?void 0:r.props.Name)}))}));y=l instanceof h.Nucleoside?vr.ChainEnd:void 0!==l.firstMonomerInNode.R1AttachmentPoint?vr.ChainStart:vr.ChainMiddle;var w={type:mr.Preset,monomers:v,name:null===x||void 0===x?void 0:x.name,idtAliases:null===x||void 0===x?void 0:x.idtAliases,position:y,target:e.target};u(w)}else{var A={type:mr.Monomer,monomer:f,attachmentPointsToBonds:p,target:e.target};u(A)}}}}),[d,u,i]),p=(0,a.useCallback)((function(){u.cancel(),n(kr(void 0))}),[u,n]);return(0,a.useEffect)((function(){null===e||void 0===e||e.events.mouseOverMonomer.add(f),null===e||void 0===e||e.events.mouseLeaveMonomer.add(p),null===e||void 0===e||e.events.mouseOverSequenceItem.add(f),null===e||void 0===e||e.events.mouseLeaveSequenceItem.add(p),null===e||void 0===e||e.events.mouseOverPolymerBond.add(f),null===e||void 0===e||e.events.mouseLeavePolymerBond.add(p);var n=function(e){p(),1===e.buttons&&bm.includes(t)||f(e)};return null===e||void 0===e||e.events.mouseOnMoveMonomer.add(n),null===e||void 0===e||e.events.mouseOnMoveSequenceItem.add(n),null===e||void 0===e||e.events.mouseOnMovePolymerBond.add(n),function(){null===e||void 0===e||e.events.mouseOverMonomer.remove(f),null===e||void 0===e||e.events.mouseLeaveMonomer.remove(p),null===e||void 0===e||e.events.mouseOnMoveMonomer.remove(n),null===e||void 0===e||e.events.mouseOnMoveSequenceItem.remove(n),null===e||void 0===e||e.events.mouseOnMovePolymerBond.remove(n),null===e||void 0===e||e.events.mouseOverSequenceItem.remove(f),null===e||void 0===e||e.events.mouseLeaveSequenceItem.remove(p),null===e||void 0===e||e.events.mouseOverPolymerBond.remove(f),null===e||void 0===e||e.events.mouseLeavePolymerBond.remove(p)}}),[e,t,f,p]),(0,o.Y)(o.FK,{})},wm=function(e){var t=e.monomerItem;if("A"===t.props.MonomerNaturalAnalogCode||"C"===t.props.MonomerNaturalAnalogCode||"G"===t.props.MonomerNaturalAnalogCode||"T"===t.props.MonomerNaturalAnalogCode||"U"===t.props.MonomerNaturalAnalogCode)return!0;if(!e.monomerItem.isAmbiguous)return!1;if(e.subtype===h.KetAmbiguousMonomerTemplateSubType.MIXTURE)return!1;var n=["ACGT","ACGU","CGT","CGU","AGT","AGU","ACT","ACU","GT","GU","AT","AU","CT","CU","AC","AG","CG","ACG"],r=e.monomers.map((function(e){return e.monomerItem.props.MonomerNaturalAnalogCode})).sort().join("");return n.some((function(e){return e===r}))},Am=function(e){var t=e.selectedMonomers,n=ta(Er),r=[{name:"copy",title:"Copy"},{name:"create_antisense_chain",title:"Create Antisense Strand",separator:!0,disabled:null===t||void 0===t?void 0:t.some((function(e){var t=e instanceof h.Sugar&&(0,h.getRnaBaseFromSugar)(e);return e instanceof h.RNABase&&(e.hydrogenBonds.length>0||e.covalentBonds.length>1)||(0,h.isRnaBaseOrAmbiguousRnaBase)(e)&&!wm(e)||t&&(t.hydrogenBonds.length>0||!wm(t))})),hidden:function(e){var t,n=e.props;return!(null!==n&&void 0!==n&&null!==(t=n.selectedMonomers)&&void 0!==t&&t.some((function(e){return e instanceof h.RNABase&&(0,h.getSugarFromRnaBase)(e)||e instanceof h.Sugar&&(0,h.getRnaBaseFromSugar)(e)})))}},{name:"delete",title:"Delete"}],i=document.querySelector(k.tS);return i&&(0,K.createPortal)((0,o.Y)(La,{id:ka.FOR_SELECTED_MONOMERS,handleMenuChange:function(e){switch(e.id){case"copy":n.events.copySelectedStructure.dispatch();break;case"create_antisense_chain":n.events.createAntisenseChain.dispatch();break;case"delete":n.events.deleteSelectedStructure.dispatch()}},menuItems:r}),i)},Mm=(0,u.A)({});function Cm(e){var t=e.onInit,n=e.theme,r=e.togglerComponent,u=e.monomersLibraryUpdate,d=(0,a.useRef)(null),f=n?(0,s.merge)(Fi,n):Fi,p=(0,s.merge)(Mm,{ketcher:f});return(0,a.useEffect)((function(){null===t||void 0===t||t()}),[t]),(0,o.Y)(i.Kq,{store:Di,children:(0,o.FD)(c.a,{theme:p,children:[(0,o.Y)(l.mL,{styles:Yi}),(0,o.Y)(_p,{ref:d,className:k.$2,children:(0,o.Y)(km,{theme:f,togglerComponent:r,monomersLibraryUpdate:u})})]})})}function km(e){var t=e.theme,n=e.togglerComponent,i=e.monomersLibraryUpdate,l=ea(),c=(0,a.useRef)(null),u=ta(No),s=ta(Er),d=ta(Dr),f=function(){var e=h.ketcherProvider.getKetcher(),t=(0,a.useState)(!1),n=(0,r.A)(t,2),o=n[0],i=n[1],l=(0,a.useCallback)((function(){return i(!0)}),[i]),c=(0,a.useCallback)((function(){return i(!1)}),[i]);return(0,a.useEffect)((function(){return e.eventBus.addListener(h.KetcherAsyncEvents.LOADING,l),e.eventBus.addListener(h.KetcherAsyncEvents.SUCCESS,c),e.eventBus.addListener(h.KetcherAsyncEvents.FAILURE,c),function(){e.eventBus.removeListener(h.KetcherAsyncEvents.LOADING,l),e.eventBus.removeListener(h.KetcherAsyncEvents.SUCCESS,c),e.eventBus.removeListener(h.KetcherAsyncEvents.FAILURE,c)}}),[e.eventBus,c,l]),o}(),p=(0,a.useState)(!1),m=(0,r.A)(p,2),v=m[0],g=m[1],b=function(){var e=ta(Er),t=ta(jr),n=(0,a.useState)(t),o=(0,r.A)(n,2),i=o[0],l=o[1],c=function(e){l(e)};return(0,a.useEffect)((function(){return null===e||void 0===e||e.events.toggleSequenceEditInRNABuilderMode.add(c),function(){null===e||void 0===e||e.events.toggleSequenceEditInRNABuilderMode.remove(c)}}),[c,null===e||void 0===e?void 0:e.events.toggleSequenceEditInRNABuilderMode]),i}(),x=(0,a.useState)(),w=(0,r.A)(x,2),A=w[0],M=w[1],C=(0,a.useState)([]),k=(0,r.A)(C,2),S=k[0],O=k[1],I=(0,W.EF)({id:ka.FOR_SEQUENCE}).show,E=(0,W.EF)({id:ka.FOR_POLYMER_BOND}).show,j=(0,W.EF)({id:ka.FOR_SELECTED_MONOMERS}).show;(0,a.useEffect)((function(){return l(Cr({theme:t,canvas:c.current,monomersLibraryUpdate:i})),function(){l(Sr(null))}}),[l]),function(){var e=ea(),t=ta(Er);(0,a.useEffect)((function(){if(t){var n=t.monomersLibrary,r=t.defaultRnaPresetsLibraryItems,o=(0,y.A)(fa(n,r,!0)),i=zo(),a=[],l=o.map((function(e){return e.name}));if(i){var c,u=Up(i);try{for(u.s();!(c=u.n()).done;){for(var s=c.value,d=0,f=s.name;l.includes(f);)d++,f="".concat(s.name).concat("_Copy".repeat(d));f!==s.name&&Ro(Hp(Hp({},s),{},{name:f}))}}catch(p){u.e(p)}finally{u.f()}i=zo(),a=fa(n,i)}return e(ho(n)),e(mo(null)),e(ki(o)),i&&e(Si(a)),e(Ei()),function(){e(ho([])),e(ji())}}}),[t])}(),(0,a.useEffect)((function(){null===s||void 0===s||s.events.rightClickSequence.add((function(e){var t=(0,r.A)(e,2),n=t[0],o=t[1];M(o),I({event:n,props:{sequenceItemRenderer:n.target.__data__}})})),null===s||void 0===s||s.events.rightClickPolymerBond.add((function(e){var t=(0,r.A)(e,2),n=t[0],o=t[1];E({event:n,props:{polymerBondRenderer:o}})})),null===s||void 0===s||s.events.rightClickSelectedMonomers.add((function(e){var t=(0,r.A)(e,2),n=t[0],o=t[1];O(o),j({event:n,props:{selectedMonomers:o}})})),null===s||void 0===s||s.events.rightClickCanvas.add((function(e){I({event:e,props:{}})}))}),[s]),(0,a.useEffect)((function(){return null===s||void 0===s||s.zoomTool.observeCanvasResize(),function(){null===s||void 0===s||s.zoomTool.destroy()}}),[s]);var P=function(){l(Oo())};return(0,o.FD)(o.FK,{children:[(0,o.FD)(Ji,{children:[(0,o.FD)(Ji.Top,{shortened:v,"data-testid":"top-toolbar",children:[(0,o.Y)(nm,{}),(0,o.FD)(zp,{children:[(0,o.Y)(fh,{}),(0,o.Y)(em,{}),(0,o.Y)(Bp,{className:b?"toggler-component-wrapper--disabled":"",children:n}),(0,o.Y)(Zp,{}),(0,o.Y)(ch,{}),(0,o.Y)(vm,{})]})]}),(0,o.Y)(Ji.Left,{children:(0,o.Y)(om,{})}),(0,o.FD)(Ji.Main,{children:[(0,o.Y)(xm,{}),(0,o.FD)(Rp,{id:"polymer-editor-canvas","data-testid":"ketcher-canvas",preserveAspectRatio:"xMidYMid meet",ref:c,width:"100%",height:"100%",style:{overflow:"hidden",overflowClipMargin:"content-box"},children:[(0,o.FD)("defs",{children:[(0,o.Y)(Ip,{}),(0,o.Y)(Op,{}),(0,o.Y)(Ep,{}),(0,o.Y)(jp,{}),(0,o.Y)(Pp,{}),(0,o.Y)(Dp,{}),(0,o.Y)(Np,{}),(0,o.Y)(Fp,{}),(0,o.Y)(Lp,{})]}),(0,o.Y)("g",{className:"drawn-structures"}),d&&(0,o.Y)("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",pointerEvents:"all"})]}),f&&(0,o.Y)(Gp,{})]}),(0,o.Y)(Ji.Right,{hide:v,children:(0,o.Y)(Vl,{})}),(0,o.Y)(Ji.InsideRoot,{children:(0,o.Y)($l,{isHidden:v,onClick:function(){return g((function(e){return!e}))}})})]}),(0,o.Y)(Xh,{}),(0,o.Y)(yh,{selections:A}),(0,o.Y)(gm,{}),(0,o.Y)(Am,{selectedMonomers:S}),(0,o.Y)(Mp,{}),(0,o.Y)(Tp,{}),(0,o.Y)(U.A,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(u),onClose:P,autoHideDuration:6e3,children:(0,o.FD)(Cp,{id:"error-tooltip",children:[(0,o.Y)(kp,{"data-testid":"error-tooltip",children:u}),(0,o.Y)(Sp,{iconName:"close",onClick:P})]})})]})}}}]);